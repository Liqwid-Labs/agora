<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{- |
Module     : Agora.Utils
Maintainer : emi@haskell.fyi
Description: Plutarch utility functions that should be upstreamed or don't belong anywhere else.

Plutarch utility functions that should be upstreamed or don't belong anywhere else.
-}</span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agora.Utils</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><span class="hs-comment">-- * TermCont-based combinators. Some of these will live in plutarch eventually.</span></span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#tcassert"><span class="hs-identifier">tcassert</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#tclet"><span class="hs-identifier">tclet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier">tcmatch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#tctryFrom"><span class="hs-identifier">tctryFrom</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Validator-level utility functions</span></span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pfind%27"><span class="hs-identifier">pfind'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pfindDatum"><span class="hs-identifier">pfindDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#ptryFindDatum"><span class="hs-identifier">ptryFindDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pvalueSpent"><span class="hs-identifier">pvalueSpent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#ptxSignedBy"><span class="hs-identifier">ptxSignedBy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#paddValue"><span class="hs-identifier">paddValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#plookup"><span class="hs-identifier">plookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pfromMaybe"><span class="hs-identifier">pfromMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#psymbolValueOf"><span class="hs-identifier">psymbolValueOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pgeqByClass"><span class="hs-identifier">pgeqByClass</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pgeqBySymbol"><span class="hs-identifier">pgeqBySymbol</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pgeqByClass%27"><span class="hs-identifier">pgeqByClass'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pfindTxInByTxOutRef"><span class="hs-identifier">pfindTxInByTxOutRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#psingletonValue"><span class="hs-identifier">psingletonValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pfindMap"><span class="hs-identifier">pfindMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pnotNull"><span class="hs-identifier">pnotNull</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pisJust"><span class="hs-identifier">pisJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#ptokenSpent"><span class="hs-identifier">ptokenSpent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pkeysEqual"><span class="hs-identifier">pkeysEqual</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pnubSortBy"><span class="hs-identifier">pnubSortBy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pisUniq"><span class="hs-identifier">pisUniq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pisUniqBy"><span class="hs-identifier">pisUniqBy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pisDJust"><span class="hs-identifier">pisDJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pisUTXOSpent"><span class="hs-identifier">pisUTXOSpent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pmsortBy"><span class="hs-identifier">pmsortBy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pmsort"><span class="hs-identifier">pmsort</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pnubSort"><span class="hs-identifier">pnubSort</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pupdate"><span class="hs-identifier">pupdate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pmapMap"><span class="hs-identifier">pmapMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pmapMaybe"><span class="hs-identifier">pmapMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Functions which should (probably) not be upstreamed</span></span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#findTxOutByTxOutRef"><span class="hs-identifier">findTxOutByTxOutRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#scriptHashFromAddress"><span class="hs-identifier">scriptHashFromAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#findOutputsToAddress"><span class="hs-identifier">findOutputsToAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#findTxOutDatum"><span class="hs-identifier">findTxOutDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#validatorHashToTokenName"><span class="hs-identifier">validatorHashToTokenName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pvalidatorHashToTokenName"><span class="hs-identifier">pvalidatorHashToTokenName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#getMintingPolicySymbol"><span class="hs-identifier">getMintingPolicySymbol</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#hasOnlyOneTokenOfCurrencySymbol"><span class="hs-identifier">hasOnlyOneTokenOfCurrencySymbol</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#mustFindDatum%27"><span class="hs-identifier">mustFindDatum'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#mustBePJust"><span class="hs-identifier">mustBePJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#mustBePDJust"><span class="hs-identifier">mustBePDJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#validatorHashToAddress"><span class="hs-identifier">validatorHashToAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#pmergeBy"><span class="hs-identifier">pmergeBy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#phalve"><span class="hs-identifier">phalve</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#isScriptAddress"><span class="hs-identifier">isScriptAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#isPubKey"><span class="hs-identifier">isPubKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">PlutusLedgerApi.V1</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">Address</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">CurrencySymbol</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">TokenName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">ValidatorHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">PlutusLedgerApi.V1.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">AssetClass</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Api.V1</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">AmountGuarantees</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">NoGuarantees</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">NonZero</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Positive</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">KeyGuarantees</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Sorted</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Unsorted</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PScriptCredential</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PCurrencySymbol</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PDatumHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PMaybeData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PDJust</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PMintingPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PPubKeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTokenName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTokenName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTuple</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTxInInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTxInInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTxOut</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTxOutRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PValidatorHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">mintingPolicySymbol</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">mkMintingPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">Plutarch.Api.V1.AssetClass</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">PAssetClass</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">passetClassValueOf</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">pvalueOf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Api.V1.AssocMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PMap</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="hs-string">&quot;plutarch&quot;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Api.V1.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PValue</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Builtin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">pforgetData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">ppairDataBuiltin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">Plutarch.Extra.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">pkeys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Reducible</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Reducible</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Reduce</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.TryFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTryFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTryFromExcess</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Unsafe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">punsafeCoerce</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- TermCont-based combinators. Some of these will live in plutarch eventually.</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">-- | Assert a particular 'PBool', trace if false.</span><span>
</span><span id="line-114"></span><span class="annot"><a href="Agora.Utils.html#tcassert"><span class="hs-identifier hs-type">tcassert</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556950"><span class="annot"><a href="#local-6989586621679556950"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556954"><span class="annot"><a href="#local-6989586621679556954"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556954"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556954"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">TermCont</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679556950"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556954"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span id="tcassert"><span class="annot"><span class="annottext">tcassert :: forall (r :: PType) (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="Agora.Utils.html#tcassert"><span class="hs-identifier hs-var hs-var">tcassert</span></a></span></span><span> </span><span id="local-6989586621679556249"><span class="annot"><span class="annottext">Term s (PString @S)
</span><a href="#local-6989586621679556249"><span class="hs-identifier hs-var">errorMessage</span></a></span></span><span> </span><span id="local-6989586621679556248"><span class="annot"><span class="annottext">Term s PBool
</span><a href="#local-6989586621679556248"><span class="hs-identifier hs-var">check</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((() -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s ()
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">(((() -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s ())
-&gt; ((() -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556246"><span class="annot"><span class="annottext">() -&gt; Term s r
</span><a href="#local-6989586621679556246"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s PBool -&gt; Term s r -&gt; Term s r -&gt; Term s r
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PBool
</span><a href="#local-6989586621679556248"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Term s r
</span><a href="#local-6989586621679556246"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s r
forall (s :: S) (a :: PType). Term s (PString @S) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptraceError</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><a href="#local-6989586621679556249"><span class="hs-identifier hs-var">errorMessage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-comment">-- | 'plet' but for use in 'TermCont'.</span><span>
</span><span id="line-118"></span><span class="annot"><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-type">tclet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556934"><span class="annot"><a href="#local-6989586621679556934"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556936"><span class="annot"><a href="#local-6989586621679556936"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556935"><span class="annot"><a href="#local-6989586621679556935"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556936"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556935"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">TermCont</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679556934"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556936"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556936"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556935"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span id="tclet"><span class="annot"><span class="annottext">tclet :: forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var hs-var">tclet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Term s a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s (Term s a)
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">(((Term s a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s (Term s a))
-&gt; (Term s a -&gt; (Term s a -&gt; Term s r) -&gt; Term s r)
-&gt; Term s a
-&gt; TermCont @r s (Term s a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; (Term s a -&gt; Term s r) -&gt; Term s r
forall (s :: S) (a :: PType) (b :: PType).
Term s a -&gt; (Term s a -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plet</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- | 'pmatch' but for use in 'TermCont'.</span><span>
</span><span id="line-122"></span><span class="annot"><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-type">tcmatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556924"><span class="annot"><a href="#local-6989586621679556924"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556922"><span class="annot"><a href="#local-6989586621679556922"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PlutusType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556924"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556922"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556924"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">TermCont</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556922"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556924"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556922"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span id="tcmatch"><span class="annot"><span class="annottext">tcmatch :: forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var hs-var">tcmatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a s -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s (a s)
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">(((a s -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s (a s))
-&gt; (Term s a -&gt; (a s -&gt; Term s r) -&gt; Term s r)
-&gt; Term s a
-&gt; TermCont @r s (a s)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; (a s -&gt; Term s r) -&gt; Term s r
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- | 'ptryFrom' but for use in 'TermCont'.</span><span>
</span><span id="line-126"></span><span class="annot"><a href="Agora.Utils.html#tctryFrom"><span class="hs-identifier hs-type">tctryFrom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556911"><span class="annot"><a href="#local-6989586621679556911"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679556912"><span class="annot"><a href="#local-6989586621679556912"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679556909"><span class="annot"><a href="#local-6989586621679556909"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679556908"><span class="annot"><a href="#local-6989586621679556908"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTryFrom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556912"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556911"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556909"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556912"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">TermCont</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679556908"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556909"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556909"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556911"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTryFromExcess</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556912"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556911"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556909"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span id="tctryFrom"><span class="annot"><span class="annottext">tctryFrom :: forall (b :: PType) (a :: PType) (s :: S) (r :: PType).
PTryFrom a b =&gt;
Term s a
-&gt; TermCont @r s (Term s b, Reduce @Type (PTryFromExcess a b s))
</span><a href="Agora.Utils.html#tctryFrom"><span class="hs-identifier hs-var hs-var">tctryFrom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(((Term s b, Reduce @Type (PTryFromExcess a b s)) -&gt; Term s r)
 -&gt; Term s r)
-&gt; TermCont @r s (Term s b, Reduce @Type (PTryFromExcess a b s))
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">((((Term s b, Reduce @Type (PTryFromExcess a b s)) -&gt; Term s r)
  -&gt; Term s r)
 -&gt; TermCont @r s (Term s b, Reduce @Type (PTryFromExcess a b s)))
-&gt; (Term s a
    -&gt; ((Term s b, Reduce @Type (PTryFromExcess a b s)) -&gt; Term s r)
    -&gt; Term s r)
-&gt; Term s a
-&gt; TermCont @r s (Term s b, Reduce @Type (PTryFromExcess a b s))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
-&gt; ((Term s b, Reduce @Type (PTryFromExcess a b s)) -&gt; Term s r)
-&gt; Term s r
forall (b :: PType) (a :: PType) (s :: S) (r :: PType).
PTryFrom a b =&gt;
Term s a
-&gt; ((Term s b, Reduce @Type (PTryFromExcess a b s)) -&gt; Term s r)
-&gt; Term s r
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptryFrom</span></a></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-comment">-- | Escape with a particular value on expecting 'Just'. For use in monadic context.</span><span>
</span><span id="line-130"></span><span class="annot"><a href="Agora.Utils.html#tcexpectJust"><span class="hs-identifier hs-type">tcexpectJust</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556896"><span class="annot"><a href="#local-6989586621679556896"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556895"><span class="annot"><a href="#local-6989586621679556895"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556897"><span class="annot"><a href="#local-6989586621679556897"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556897"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556896"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556897"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556895"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">TermCont</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679556896"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556897"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556897"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556895"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span id="tcexpectJust"><span class="annot"><span class="annottext">tcexpectJust :: forall (r :: PType) (a :: PType) (s :: S).
Term s r -&gt; Term s (PMaybe a) -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tcexpectJust"><span class="hs-identifier hs-var hs-var">tcexpectJust</span></a></span></span><span> </span><span id="local-6989586621679556228"><span class="annot"><span class="annottext">Term s r
</span><a href="#local-6989586621679556228"><span class="hs-identifier hs-var">escape</span></a></span></span><span> </span><span id="local-6989586621679556227"><span class="annot"><span class="annottext">Term s (PMaybe a)
</span><a href="#local-6989586621679556227"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Term s a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s (Term s a)
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">(((Term s a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s (Term s a))
-&gt; ((Term s a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s (Term s a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556226"><span class="annot"><span class="annottext">Term s a -&gt; Term s r
</span><a href="#local-6989586621679556226"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-136"></span><span>  </span><span class="annot"><span class="annottext">Term s (PMaybe a) -&gt; (PMaybe a s -&gt; Term s r) -&gt; Term s r
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe a)
</span><a href="#local-6989586621679556227"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">((PMaybe a s -&gt; Term s r) -&gt; Term s r)
-&gt; (PMaybe a s -&gt; Term s r) -&gt; Term s r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span id="local-6989586621679556224"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556224"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s r
</span><a href="#local-6989586621679556226"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556224"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="annottext">PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s r
</span><a href="#local-6989586621679556228"><span class="hs-identifier hs-var">escape</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- Validator-level utility functions</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-comment">-- | Find a datum with the given hash.</span><span>
</span><span id="line-144"></span><span id="local-6989586621679556889"><span class="annot"><a href="Agora.Utils.html#pfindDatum"><span class="hs-identifier hs-type">pfindDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556889"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatumHash</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTuple</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatumHash</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatum</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatum</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-145"></span><span id="pfindDatum"><span class="annot"><span class="annottext">pfindDatum :: forall (s :: S).
Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
</span><a href="Agora.Utils.html#pfindDatum"><span class="hs-identifier hs-var hs-var">pfindDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s
   (PDatumHash
    :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
          :--&gt; PMaybe PDatum)))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe PDatum))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s
    (PDatumHash
     :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
           :--&gt; PMaybe PDatum)))
 -&gt; Term
      s
      (PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; PMaybe PDatum)))
-&gt; (forall (s :: S).
    Term
      s
      (PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; PMaybe PDatum)))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe PDatum))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="annot"><span class="annottext">(Term s PDatumHash
 -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
 -&gt; Term s (PMaybe PDatum))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe PDatum))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PDatumHash
  -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
  -&gt; Term s (PMaybe PDatum))
 -&gt; Term
      s
      (PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; PMaybe PDatum)))
-&gt; (Term s PDatumHash
    -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
    -&gt; Term s (PMaybe PDatum))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe PDatum))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556200"><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679556200"><span class="hs-identifier hs-var">datumHash</span></a></span></span><span> </span><span id="local-6989586621679556199"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679556199"><span class="hs-identifier hs-var">datums</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
forall (a :: PType) (list :: PType -&gt; PType) (b :: PType) (s :: S).
(PEq a, PIsListLike list (PAsData (PTuple a b)), PIsData a,
 PIsData b) =&gt;
Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
</span><a href="Agora.Utils.html#plookupTuple"><span class="hs-identifier hs-var">plookupTuple</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
-&gt; Term s PDatumHash
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; PMaybe PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679556200"><span class="hs-identifier hs-var">datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
   :--&gt; PMaybe PDatum)
-&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
-&gt; Term s (PMaybe PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679556199"><span class="hs-identifier hs-var">datums</span></a></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-comment">-- | Find a datum with the given hash, and `ptryFrom` it.</span><span>
</span><span id="line-149"></span><span class="annot"><a href="Agora.Utils.html#ptryFindDatum"><span class="hs-identifier hs-type">ptryFindDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556848"><span class="annot"><a href="#local-6989586621679556848"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556847"><span class="annot"><a href="#local-6989586621679556847"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTryFrom</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556848"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556847"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatumHash</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTuple</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatumHash</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatum</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556848"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span id="ptryFindDatum"><span class="annot"><span class="annottext">ptryFindDatum :: forall (a :: PType) (s :: S).
PTryFrom PData a =&gt;
Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe a))
</span><a href="Agora.Utils.html#ptryFindDatum"><span class="hs-identifier hs-var hs-var">ptryFindDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe a))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe a))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PDatumHash
    :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
          :--&gt; PMaybe a))
 -&gt; Term
      s
      (PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; PMaybe a)))
-&gt; ClosedTerm
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe a))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><span class="annottext">(Term s PDatumHash
 -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
 -&gt; Term s (PMaybe a))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe a))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PDatumHash
  -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
  -&gt; Term s (PMaybe a))
 -&gt; Term
      s
      (PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; PMaybe a)))
-&gt; (Term s PDatumHash
    -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
    -&gt; Term s (PMaybe a))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556178"><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679556178"><span class="hs-identifier hs-var">datumHash</span></a></span></span><span> </span><span id="local-6989586621679556177"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679556177"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybe PDatum)
-&gt; (PMaybe PDatum s -&gt; Term s (PMaybe a)) -&gt; Term s (PMaybe a)
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
forall (s :: S).
Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
</span><a href="Agora.Utils.html#pfindDatum"><span class="hs-identifier hs-var">pfindDatum</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
-&gt; Term s PDatumHash
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; PMaybe PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679556178"><span class="hs-identifier hs-var">datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
   :--&gt; PMaybe PDatum)
-&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
-&gt; Term s (PMaybe PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679556177"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe PDatum s -&gt; Term s (PMaybe a)) -&gt; Term s (PMaybe a))
-&gt; (PMaybe PDatum s -&gt; Term s (PMaybe a)) -&gt; Term s (PMaybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-153"></span><span>      </span><span class="annot"><span class="annottext">PMaybe PDatum s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe a s -&gt; Term s (PMaybe a)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe a s
forall (a :: PType) (s :: S). PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span>
</span><span id="line-154"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span id="local-6989586621679556175"><span class="annot"><span class="annottext">Term s PDatum
</span><a href="#local-6989586621679556175"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont @(PMaybe a) s (Term s (PMaybe a)) -&gt; Term s (PMaybe a)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @(PMaybe a) s (Term s (PMaybe a)) -&gt; Term s (PMaybe a))
-&gt; TermCont @(PMaybe a) s (Term s (PMaybe a)) -&gt; Term s (PMaybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-155"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679556173"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556173"><span class="hs-identifier hs-var">datum'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reduce @Type (PTryFromExcess PData a s)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s PData
-&gt; TermCont
     @(PMaybe a) s (Term s a, Reduce @Type (PTryFromExcess PData a s))
forall (b :: PType) (a :: PType) (s :: S) (r :: PType).
PTryFrom a b =&gt;
Term s a
-&gt; TermCont @r s (Term s b, Reduce @Type (PTryFromExcess a b s))
</span><a href="Agora.Utils.html#tctryFrom"><span class="hs-identifier hs-var">tctryFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s PDatum -&gt; forall (b :: PType). Term s (PInner PDatum b)
forall (s :: S) (a :: PType).
Term s a -&gt; forall (b :: PType). Term s (PInner a b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PDatum
</span><a href="#local-6989586621679556175"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><span class="annottext">Term s (PMaybe a) -&gt; TermCont @(PMaybe a) s (Term s (PMaybe a))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PMaybe a) -&gt; TermCont @(PMaybe a) s (Term s (PMaybe a)))
-&gt; Term s (PMaybe a) -&gt; TermCont @(PMaybe a) s (Term s (PMaybe a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe a s -&gt; Term s (PMaybe a)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s a -&gt; PMaybe a s
forall (a :: PType) (s :: S). Term s a -&gt; PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556173"><span class="hs-identifier hs-var">datum'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">-- | Check if a PubKeyHash signs this transaction.</span><span>
</span><span id="line-159"></span><span id="local-6989586621679556825"><span class="annot"><a href="Agora.Utils.html#ptxSignedBy"><span class="hs-identifier hs-type">ptxSignedBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556825"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PPubKeyHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PPubKeyHash</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-160"></span><span id="ptxSignedBy"><span class="annot"><span class="annottext">ptxSignedBy :: forall (s :: S).
Term
  s
  (PBuiltinList (PAsData PPubKeyHash)
   :--&gt; (PAsData PPubKeyHash :--&gt; PBool))
</span><a href="Agora.Utils.html#ptxSignedBy"><span class="hs-identifier hs-var hs-var">ptxSignedBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s
   (PBuiltinList (PAsData PPubKeyHash)
    :--&gt; (PAsData PPubKeyHash :--&gt; PBool)))
-&gt; Term
     s
     (PBuiltinList (PAsData PPubKeyHash)
      :--&gt; (PAsData PPubKeyHash :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s
    (PBuiltinList (PAsData PPubKeyHash)
     :--&gt; (PAsData PPubKeyHash :--&gt; PBool)))
 -&gt; Term
      s
      (PBuiltinList (PAsData PPubKeyHash)
       :--&gt; (PAsData PPubKeyHash :--&gt; PBool)))
-&gt; (forall (s :: S).
    Term
      s
      (PBuiltinList (PAsData PPubKeyHash)
       :--&gt; (PAsData PPubKeyHash :--&gt; PBool)))
-&gt; Term
     s
     (PBuiltinList (PAsData PPubKeyHash)
      :--&gt; (PAsData PPubKeyHash :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PAsData PPubKeyHash))
 -&gt; Term s (PAsData PPubKeyHash) -&gt; Term s PBool)
-&gt; Term
     s
     (PBuiltinList (PAsData PPubKeyHash)
      :--&gt; (PAsData PPubKeyHash :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinList (PAsData PPubKeyHash))
  -&gt; Term s (PAsData PPubKeyHash) -&gt; Term s PBool)
 -&gt; Term
      s
      (PBuiltinList (PAsData PPubKeyHash)
       :--&gt; (PAsData PPubKeyHash :--&gt; PBool)))
-&gt; (Term s (PBuiltinList (PAsData PPubKeyHash))
    -&gt; Term s (PAsData PPubKeyHash) -&gt; Term s PBool)
-&gt; Term
     s
     (PBuiltinList (PAsData PPubKeyHash)
      :--&gt; (PAsData PPubKeyHash :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556159"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PPubKeyHash))
</span><a href="#local-6989586621679556159"><span class="hs-identifier hs-var">sigs</span></a></span></span><span> </span><span id="local-6989586621679556158"><span class="annot"><span class="annottext">Term s (PAsData PPubKeyHash)
</span><a href="#local-6989586621679556158"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData PPubKeyHash
   :--&gt; (PBuiltinList (PAsData PPubKeyHash) :--&gt; PBool))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PIsListLike list a, PEq a) =&gt;
Term s (a :--&gt; (list a :--&gt; PBool))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pelem</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData PPubKeyHash
   :--&gt; (PBuiltinList (PAsData PPubKeyHash) :--&gt; PBool))
-&gt; Term s (PAsData PPubKeyHash)
-&gt; Term s (PBuiltinList (PAsData PPubKeyHash) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PPubKeyHash)
</span><a href="#local-6989586621679556158"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PPubKeyHash) :--&gt; PBool)
-&gt; Term s (PBuiltinList (PAsData PPubKeyHash)) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PPubKeyHash))
</span><a href="#local-6989586621679556159"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">-- | Get the first element that matches a predicate or return Nothing.</span><span>
</span><span id="line-164"></span><span id="local-6989586621679556815"><span id="local-6989586621679556816"><span id="local-6989586621679556817"><span class="annot"><a href="Agora.Utils.html#pfind%27"><span class="hs-identifier hs-type">pfind'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556817"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556815"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556815"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556815"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556817"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556816"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-168"></span><span id="pfind%27"><span class="annot"><span class="annottext">pfind' :: forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
(Term s a -&gt; Term s PBool) -&gt; Term s (list a :--&gt; PMaybe a)
</span><a href="Agora.Utils.html#pfind%27"><span class="hs-identifier hs-var hs-var">pfind'</span></a></span></span><span> </span><span id="local-6989586621679556151"><span class="annot"><span class="annottext">Term s a -&gt; Term s PBool
</span><a href="#local-6989586621679556151"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><span class="annottext">(Term s (list a :--&gt; PMaybe a)
 -&gt; Term s a -&gt; Term s (list a) -&gt; Term s (PMaybe a))
-&gt; (Term s (list a :--&gt; PMaybe a) -&gt; Term s (PMaybe a))
-&gt; Term s (list a :--&gt; PMaybe a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (r :: PType).
PIsListLike list a =&gt;
(Term s (list a :--&gt; r) -&gt; Term s a -&gt; Term s (list a) -&gt; Term s r)
-&gt; (Term s (list a :--&gt; r) -&gt; Term s r) -&gt; Term s (list a :--&gt; r)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">precList</span></a></span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679556149"><span class="annot"><span class="annottext">Term s (list a :--&gt; PMaybe a)
</span><a href="#local-6989586621679556149"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679556148"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556148"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679556147"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679556147"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (PMaybe a) -&gt; Term s (PMaybe a) -&gt; Term s (PMaybe a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s a -&gt; Term s PBool
</span><a href="#local-6989586621679556151"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556148"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PMaybe a s -&gt; Term s (PMaybe a)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s a -&gt; PMaybe a s
forall (a :: PType) (s :: S). Term s a -&gt; PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556148"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; PMaybe a)
</span><a href="#local-6989586621679556149"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PMaybe a)
-&gt; Term s (list a) -&gt; Term s (PMaybe a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679556147"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PMaybe a)
-&gt; Term s (list a :--&gt; PMaybe a) -&gt; Term s (PMaybe a)
forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PMaybe a)
 -&gt; Term s (list a :--&gt; PMaybe a) -&gt; Term s (PMaybe a))
-&gt; Term s (PMaybe a)
-&gt; Term s (list a :--&gt; PMaybe a)
-&gt; Term s (PMaybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe a s -&gt; Term s (PMaybe a)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe a s
forall (a :: PType) (s :: S). PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-comment">-- | Get the first element that maps to a PJust in a list.</span><span>
</span><span id="line-174"></span><span id="local-6989586621679556802"><span id="local-6989586621679556803"><span id="local-6989586621679556804"><span id="local-6989586621679556805"><span class="annot"><a href="Agora.Utils.html#pfindMap"><span class="hs-identifier hs-type">pfindMap</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556805"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556803"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556802"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556805"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556802"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-177"></span><span id="pfindMap"><span class="annot"><span class="annottext">pfindMap :: forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (b :: PType).
PIsListLike list a =&gt;
Term s ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
</span><a href="Agora.Utils.html#pfindMap"><span class="hs-identifier hs-var hs-var">pfindMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-178"></span><span>  </span><span class="annot"><span class="annottext">ClosedTerm ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
-&gt; Term s ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
 -&gt; Term s ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b)))
-&gt; ClosedTerm ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
-&gt; Term s ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">(Term s (a :--&gt; PMaybe b) -&gt; Term s (list a :--&gt; PMaybe b))
-&gt; Term s ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (a :--&gt; PMaybe b) -&gt; Term s (list a :--&gt; PMaybe b))
 -&gt; Term s ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b)))
-&gt; (Term s (a :--&gt; PMaybe b) -&gt; Term s (list a :--&gt; PMaybe b))
-&gt; Term s ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556135"><span class="annot"><span class="annottext">Term s (a :--&gt; PMaybe b)
</span><a href="#local-6989586621679556135"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-180"></span><span>      </span><span class="annot"><span class="annottext">(Term s (list a :--&gt; PMaybe b)
 -&gt; Term s a -&gt; Term s (list a) -&gt; Term s (PMaybe b))
-&gt; (Term s (list a :--&gt; PMaybe b) -&gt; Term s (PMaybe b))
-&gt; Term s (list a :--&gt; PMaybe b)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (r :: PType).
PIsListLike list a =&gt;
(Term s (list a :--&gt; r) -&gt; Term s a -&gt; Term s (list a) -&gt; Term s r)
-&gt; (Term s (list a :--&gt; r) -&gt; Term s r) -&gt; Term s (list a :--&gt; r)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">precList</span></a></span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556134"><span class="annot"><span class="annottext">Term s (list a :--&gt; PMaybe b)
</span><a href="#local-6989586621679556134"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679556133"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556133"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679556132"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679556132"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-182"></span><span>            </span><span class="hs-comment">-- In the future, this should use `pmatchSum`, I believe?</span><span>
</span><span id="line-183"></span><span>            </span><span class="annot"><span class="annottext">Term s (PMaybe b)
-&gt; (PMaybe b s -&gt; Term s (PMaybe b)) -&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; PMaybe b)
</span><a href="#local-6989586621679556135"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; PMaybe b) -&gt; Term s a -&gt; Term s (PMaybe b)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556133"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe b s -&gt; Term s (PMaybe b)) -&gt; Term s (PMaybe b))
-&gt; (PMaybe b s -&gt; Term s (PMaybe b)) -&gt; Term s (PMaybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-184"></span><span>              </span><span class="annot"><span class="annottext">PMaybe b s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PMaybe b)
</span><a href="#local-6989586621679556134"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PMaybe b)
-&gt; Term s (list a) -&gt; Term s (PMaybe b)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679556132"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-185"></span><span>              </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span id="local-6989586621679556131"><span class="annot"><span class="annottext">Term s b
</span><a href="#local-6989586621679556131"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe b s -&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s b -&gt; PMaybe b s
forall (a :: PType) (s :: S). Term s a -&gt; PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s b
</span><a href="#local-6989586621679556131"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PMaybe b)
-&gt; Term s (list a :--&gt; PMaybe b) -&gt; Term s (PMaybe b)
forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PMaybe b)
 -&gt; Term s (list a :--&gt; PMaybe b) -&gt; Term s (PMaybe b))
-&gt; Term s (PMaybe b)
-&gt; Term s (list a :--&gt; PMaybe b)
-&gt; Term s (PMaybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe b s -&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe b s
forall (a :: PType) (s :: S). PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-comment">-- | Find the value for a given key in an associative list.</span><span>
</span><span id="line-190"></span><span id="local-6989586621679556792"><span id="local-6989586621679556794"><span id="local-6989586621679556795"><span id="local-6989586621679556796"><span class="annot"><a href="Agora.Utils.html#plookup"><span class="hs-identifier hs-type">plookup</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PEq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556796"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556795"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinPair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556796"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556794"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556792"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556796"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556795"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinPair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556796"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556794"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556794"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-193"></span><span id="plookup"><span class="annot"><span class="annottext">plookup :: forall (a :: PType) (list :: PType -&gt; PType) (b :: PType) (s :: S).
(PEq a, PIsListLike list (PBuiltinPair a b)) =&gt;
Term s (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
</span><a href="Agora.Utils.html#plookup"><span class="hs-identifier hs-var hs-var">plookup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="annottext">ClosedTerm (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
-&gt; Term s (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
 -&gt; Term s (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b)))
-&gt; ClosedTerm (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
-&gt; Term s (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">(Term s a -&gt; Term s (list (PBuiltinPair a b)) -&gt; Term s (PMaybe b))
-&gt; Term s (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s a
  -&gt; Term s (list (PBuiltinPair a b)) -&gt; Term s (PMaybe b))
 -&gt; Term s (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b)))
-&gt; (Term s a
    -&gt; Term s (list (PBuiltinPair a b)) -&gt; Term s (PMaybe b))
-&gt; Term s (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556115"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556115"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679556114"><span class="annot"><span class="annottext">Term s (list (PBuiltinPair a b))
</span><a href="#local-6989586621679556114"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>      </span><span class="annot"><span class="annottext">Term s (PMaybe (PBuiltinPair a b))
-&gt; (PMaybe (PBuiltinPair a b) s -&gt; Term s (PMaybe b))
-&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Term s (PBuiltinPair a b) -&gt; Term s PBool)
-&gt; Term s (list (PBuiltinPair a b) :--&gt; PMaybe (PBuiltinPair a b))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
(Term s a -&gt; Term s PBool) -&gt; Term s (list a :--&gt; PMaybe a)
</span><a href="Agora.Utils.html#pfind%27"><span class="hs-identifier hs-var">pfind'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679556113"><span class="annot"><span class="annottext">Term s (PBuiltinPair a b)
</span><a href="#local-6989586621679556113"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair a b :--&gt; a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (PBuiltinPair a b :--&gt; a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfstBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair a b :--&gt; a)
-&gt; Term s (PBuiltinPair a b) -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair a b)
</span><a href="#local-6989586621679556113"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s a -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556115"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (list (PBuiltinPair a b) :--&gt; PMaybe (PBuiltinPair a b))
-&gt; Term s (list (PBuiltinPair a b))
-&gt; Term s (PMaybe (PBuiltinPair a b))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list (PBuiltinPair a b))
</span><a href="#local-6989586621679556114"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe (PBuiltinPair a b) s -&gt; Term s (PMaybe b))
 -&gt; Term s (PMaybe b))
-&gt; (PMaybe (PBuiltinPair a b) s -&gt; Term s (PMaybe b))
-&gt; Term s (PMaybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-197"></span><span>        </span><span class="annot"><span class="annottext">PMaybe (PBuiltinPair a b) s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe b s -&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe b s
forall (a :: PType) (s :: S). PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span>
</span><span id="line-198"></span><span>        </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span id="local-6989586621679556110"><span class="annot"><span class="annottext">Term s (PBuiltinPair a b)
</span><a href="#local-6989586621679556110"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe b s -&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s b -&gt; PMaybe b s
forall (a :: PType) (s :: S). Term s a -&gt; PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair a b :--&gt; b)
forall (s :: S) (a :: PType) (b :: PType).
Term s (PBuiltinPair a b :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">psndBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair a b :--&gt; b)
-&gt; Term s (PBuiltinPair a b) -&gt; Term s b
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair a b)
</span><a href="#local-6989586621679556110"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- | Find the value for a given key in an assoclist which uses 'PTuple's.</span><span>
</span><span id="line-201"></span><span id="local-6989586621679556853"><span id="local-6989586621679556854"><span id="local-6989586621679556855"><span id="local-6989586621679556856"><span class="annot"><a href="Agora.Utils.html#plookupTuple"><span class="hs-identifier hs-type">plookupTuple</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PEq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556856"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556855"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTuple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556856"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556854"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556856"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556854"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556853"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556856"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556855"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTuple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556856"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556854"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556854"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-204"></span><span id="plookupTuple"><span class="annot"><span class="annottext">plookupTuple :: forall (a :: PType) (list :: PType -&gt; PType) (b :: PType) (s :: S).
(PEq a, PIsListLike list (PAsData (PTuple a b)), PIsData a,
 PIsData b) =&gt;
Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
</span><a href="Agora.Utils.html#plookupTuple"><span class="hs-identifier hs-var hs-var">plookupTuple</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><span class="annottext">ClosedTerm (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
-&gt; Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
 -&gt; Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b)))
-&gt; ClosedTerm (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
-&gt; Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">(Term s a
 -&gt; Term s (list (PAsData (PTuple a b))) -&gt; Term s (PMaybe b))
-&gt; Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s a
  -&gt; Term s (list (PAsData (PTuple a b))) -&gt; Term s (PMaybe b))
 -&gt; Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b)))
-&gt; (Term s a
    -&gt; Term s (list (PAsData (PTuple a b))) -&gt; Term s (PMaybe b))
-&gt; Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556068"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556068"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679556067"><span class="annot"><span class="annottext">Term s (list (PAsData (PTuple a b)))
</span><a href="#local-6989586621679556067"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-207"></span><span>      </span><span class="annot"><span class="annottext">Term s (PMaybe (PAsData (PTuple a b)))
-&gt; (PMaybe (PAsData (PTuple a b)) s -&gt; Term s (PMaybe b))
-&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Term s (PAsData (PTuple a b)) -&gt; Term s PBool)
-&gt; Term
     s (list (PAsData (PTuple a b)) :--&gt; PMaybe (PAsData (PTuple a b)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
(Term s a -&gt; Term s PBool) -&gt; Term s (list a :--&gt; PMaybe a)
</span><a href="Agora.Utils.html#pfind%27"><span class="hs-identifier hs-var">pfind'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679556066"><span class="annot"><span class="annottext">Term s (PAsData (PTuple a b))
</span><a href="#local-6989586621679556066"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;_0&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PTuple a b :--&gt; a) -&gt; Term s (PTuple a b) -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PTuple a b)) -&gt; Term s (PTuple a b)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PTuple a b))
</span><a href="#local-6989586621679556066"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s a -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556068"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
  s (list (PAsData (PTuple a b)) :--&gt; PMaybe (PAsData (PTuple a b)))
-&gt; Term s (list (PAsData (PTuple a b)))
-&gt; Term s (PMaybe (PAsData (PTuple a b)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list (PAsData (PTuple a b)))
</span><a href="#local-6989586621679556067"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe (PAsData (PTuple a b)) s -&gt; Term s (PMaybe b))
 -&gt; Term s (PMaybe b))
-&gt; (PMaybe (PAsData (PTuple a b)) s -&gt; Term s (PMaybe b))
-&gt; Term s (PMaybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-208"></span><span>        </span><span class="annot"><span class="annottext">PMaybe (PAsData (PTuple a b)) s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe b s -&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe b s
forall (a :: PType) (s :: S). PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span>
</span><span id="line-209"></span><span>        </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span id="local-6989586621679556063"><span class="annot"><span class="annottext">Term s (PAsData (PTuple a b))
</span><a href="#local-6989586621679556063"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe b s -&gt; Term s (PMaybe b)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s b -&gt; PMaybe b s
forall (a :: PType) (s :: S). Term s a -&gt; PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;_1&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PTuple a b :--&gt; b) -&gt; Term s (PTuple a b) -&gt; Term s b
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PTuple a b)) -&gt; Term s (PTuple a b)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PTuple a b))
</span><a href="#local-6989586621679556063"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-comment">-- | Extract a Maybe by providing a default value in case of Just.</span><span>
</span><span id="line-212"></span><span class="annot"><a href="Agora.Utils.html#pfromMaybe"><span class="hs-identifier hs-type">pfromMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556750"><span class="annot"><a href="#local-6989586621679556750"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679556751"><span class="annot"><a href="#local-6989586621679556751"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556751"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556750"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556750"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556750"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span id="pfromMaybe"><span class="annot"><span class="annottext">pfromMaybe :: forall (a :: PType) (s :: S). Term s (a :--&gt; (PMaybe a :--&gt; a))
</span><a href="Agora.Utils.html#pfromMaybe"><span class="hs-identifier hs-var hs-var">pfromMaybe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (a :--&gt; (PMaybe a :--&gt; a))
-&gt; Term s (a :--&gt; (PMaybe a :--&gt; a))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (a :--&gt; (PMaybe a :--&gt; a))
 -&gt; Term s (a :--&gt; (PMaybe a :--&gt; a)))
-&gt; ClosedTerm (a :--&gt; (PMaybe a :--&gt; a))
-&gt; Term s (a :--&gt; (PMaybe a :--&gt; a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><span class="annottext">(Term s a -&gt; Term s (PMaybe a) -&gt; Term s a)
-&gt; Term s (a :--&gt; (PMaybe a :--&gt; a))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s a -&gt; Term s (PMaybe a) -&gt; Term s a)
 -&gt; Term s (a :--&gt; (PMaybe a :--&gt; a)))
-&gt; (Term s a -&gt; Term s (PMaybe a) -&gt; Term s a)
-&gt; Term s (a :--&gt; (PMaybe a :--&gt; a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556054"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556054"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679556053"><span class="annot"><span class="annottext">Term s (PMaybe a)
</span><a href="#local-6989586621679556053"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybe a) -&gt; (PMaybe a s -&gt; Term s a) -&gt; Term s a
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe a)
</span><a href="#local-6989586621679556053"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">((PMaybe a s -&gt; Term s a) -&gt; Term s a)
-&gt; (PMaybe a s -&gt; Term s a) -&gt; Term s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span id="local-6989586621679556052"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556052"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556052"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-217"></span><span>      </span><span class="annot"><span class="annottext">PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679556054"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-comment">-- | Yield True if a given PMaybe is of form @'PJust' _@.</span><span>
</span><span id="line-220"></span><span class="annot"><a href="Agora.Utils.html#pisJust"><span class="hs-identifier hs-type">pisJust</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556745"><span class="annot"><a href="#local-6989586621679556745"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679556746"><span class="annot"><a href="#local-6989586621679556746"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556746"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556745"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span id="pisJust"><span class="annot"><span class="annottext">pisJust :: forall (a :: PType) (s :: S). Term s (PMaybe a :--&gt; PBool)
</span><a href="Agora.Utils.html#pisJust"><span class="hs-identifier hs-var hs-var">pisJust</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PMaybe a :--&gt; PBool) -&gt; Term s (PMaybe a :--&gt; PBool)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PMaybe a :--&gt; PBool) -&gt; Term s (PMaybe a :--&gt; PBool))
-&gt; ClosedTerm (PMaybe a :--&gt; PBool) -&gt; Term s (PMaybe a :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PMaybe a) -&gt; Term s PBool) -&gt; Term s (PMaybe a :--&gt; PBool)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PMaybe a) -&gt; Term s PBool)
 -&gt; Term s (PMaybe a :--&gt; PBool))
-&gt; (Term s (PMaybe a) -&gt; Term s PBool)
-&gt; Term s (PMaybe a :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679556042"><span class="annot"><span class="annottext">Term s (PMaybe a)
</span><a href="#local-6989586621679556042"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybe a) -&gt; (PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe a)
</span><a href="#local-6989586621679556042"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">((PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-224"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PLifted PBool -&gt; Term s PBool
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
PLifted PBool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-225"></span><span>      </span><span class="annot"><span class="annottext">PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PLifted PBool -&gt; Term s PBool
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
PLifted PBool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-comment">-- | Get the sum of all values belonging to a particular CurrencySymbol.</span><span>
</span><span id="line-228"></span><span class="annot"><a href="Agora.Utils.html#psymbolValueOf"><span class="hs-identifier hs-type">psymbolValueOf</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556734"><span class="annot"><a href="#local-6989586621679556734"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556733"><span class="annot"><a href="#local-6989586621679556733"><span class="hs-identifier hs-type">amounts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556736"><span class="annot"><a href="#local-6989586621679556736"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556736"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PCurrencySymbol</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556734"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556733"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PInteger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span id="psymbolValueOf"><span class="annot"><span class="annottext">psymbolValueOf :: forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
</span><a href="Agora.Utils.html#psymbolValueOf"><span class="hs-identifier hs-var hs-var">psymbolValueOf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><span class="annottext">ClosedTerm
  (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
-&gt; Term
     s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
 -&gt; Term
      s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S)))
-&gt; ClosedTerm
     (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
-&gt; Term
     s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><span class="annottext">(Term s PCurrencySymbol
 -&gt; Term s (PValue keys amounts) -&gt; Term s (PInteger @S))
-&gt; Term
     s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PCurrencySymbol
  -&gt; Term s (PValue keys amounts) -&gt; Term s (PInteger @S))
 -&gt; Term
      s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S)))
-&gt; (Term s PCurrencySymbol
    -&gt; Term s (PValue keys amounts) -&gt; Term s (PInteger @S))
-&gt; Term
     s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555997"><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555997"><span class="hs-identifier hs-var">sym</span></a></span></span><span> </span><span id="local-6989586621679555996"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555996"><span class="hs-identifier hs-var">value''</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont @(PInteger @S) s (Term s (PInteger @S))
-&gt; Term s (PInteger @S)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @(PInteger @S) s (Term s (PInteger @S))
 -&gt; Term s (PInteger @S))
-&gt; TermCont @(PInteger @S) s (Term s (PInteger @S))
-&gt; Term s (PInteger @S)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-234"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span id="local-6989586621679555995"><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555995"><span class="hs-identifier hs-var">value'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
-&gt; TermCont @(PInteger @S) s (PValue keys amounts s)
forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var">tcmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555996"><span class="hs-identifier hs-var">value''</span></a></span><span>
</span><span id="line-235"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span id="local-6989586621679555994"><span class="annot"><span class="annottext">Term
  s
  (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555994"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; TermCont
     @(PInteger @S)
     s
     (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)) s)
forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var">tcmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555995"><span class="hs-identifier hs-var">value'</span></a></span><span>
</span><span id="line-236"></span><span>      </span><span id="local-6989586621679555993"><span class="annot"><span class="annottext">Term s (PAsData (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555993"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
-&gt; Term s (PMaybe (PAsData (PMap keys PTokenName (PInteger @S))))
-&gt; TermCont
     @(PInteger @S)
     s
     (Term s (PAsData (PMap keys PTokenName (PInteger @S))))
forall (r :: PType) (a :: PType) (s :: S).
Term s r -&gt; Term s (PMaybe a) -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tcexpectJust"><span class="hs-identifier hs-var">tcexpectJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PAsData PCurrencySymbol
   :--&gt; (PBuiltinMap
           PCurrencySymbol (PMap keys PTokenName (PInteger @S))
         :--&gt; PMaybe (PAsData (PMap keys PTokenName (PInteger @S)))))
forall (a :: PType) (list :: PType -&gt; PType) (b :: PType) (s :: S).
(PEq a, PIsListLike list (PBuiltinPair a b)) =&gt;
Term s (a :--&gt; (list (PBuiltinPair a b) :--&gt; PMaybe b))
</span><a href="Agora.Utils.html#plookup"><span class="hs-identifier hs-var">plookup</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData PCurrencySymbol
   :--&gt; (PBuiltinMap
           PCurrencySymbol (PMap keys PTokenName (PInteger @S))
         :--&gt; PMaybe (PAsData (PMap keys PTokenName (PInteger @S)))))
-&gt; Term s (PAsData PCurrencySymbol)
-&gt; Term
     s
     (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S))
      :--&gt; PMaybe (PAsData (PMap keys PTokenName (PInteger @S))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol -&gt; Term s (PAsData PCurrencySymbol)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pdata</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555997"><span class="hs-identifier hs-var">sym</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S))
   :--&gt; PMaybe (PAsData (PMap keys PTokenName (PInteger @S))))
-&gt; Term
     s
     (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; Term s (PMaybe (PAsData (PMap keys PTokenName (PInteger @S))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555994"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span id="local-6989586621679555991"><span class="annot"><span class="annottext">Term s (PBuiltinMap PTokenName (PInteger @S))
</span><a href="#local-6989586621679555991"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys PTokenName (PInteger @S))
-&gt; TermCont @(PInteger @S) s (PMap keys PTokenName (PInteger @S) s)
forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var">tcmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PAsData (PMap keys PTokenName (PInteger @S)))
-&gt; Term s (PMap keys PTokenName (PInteger @S))
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555993"><span class="hs-identifier hs-var">m'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>      </span><span class="annot"><span class="annottext">Term s (PInteger @S)
-&gt; TermCont @(PInteger @S) s (Term s (PInteger @S))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PInteger @S)
 -&gt; TermCont @(PInteger @S) s (Term s (PInteger @S)))
-&gt; Term s (PInteger @S)
-&gt; TermCont @(PInteger @S) s (Term s (PInteger @S))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))
    :--&gt; (PInteger @S :--&gt; PInteger @S))
   :--&gt; (PInteger @S
         :--&gt; (PBuiltinMap PTokenName (PInteger @S) :--&gt; PInteger @S)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (b :: PType).
PIsListLike list a =&gt;
Term s ((a :--&gt; (b :--&gt; b)) :--&gt; (b :--&gt; (list a :--&gt; b)))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfoldr</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))
    :--&gt; (PInteger @S :--&gt; PInteger @S))
   :--&gt; (PInteger @S
         :--&gt; (PBuiltinMap PTokenName (PInteger @S) :--&gt; PInteger @S)))
-&gt; Term
     s
     (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))
      :--&gt; (PInteger @S :--&gt; PInteger @S))
-&gt; Term
     s
     (PInteger @S
      :--&gt; (PBuiltinMap PTokenName (PInteger @S) :--&gt; PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S)))
 -&gt; Term s (PInteger @S) -&gt; Term s (PInteger @S))
-&gt; Term
     s
     (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))
      :--&gt; (PInteger @S :--&gt; PInteger @S))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679555989"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S)))
</span><a href="#local-6989586621679555989"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679555988"><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><a href="#local-6989586621679555988"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PInteger @S)) -&gt; Term s (PInteger @S)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))
   :--&gt; PAsData (PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (PBuiltinPair a b :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">psndBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))
   :--&gt; PAsData (PInteger @S))
-&gt; Term
     s (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S)))
-&gt; Term s (PAsData (PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S)))
</span><a href="#local-6989586621679555989"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
-&gt; Term s (PInteger @S) -&gt; Term s (PInteger @S)
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><a href="#local-6989586621679555988"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PInteger @S
   :--&gt; (PBuiltinMap PTokenName (PInteger @S) :--&gt; PInteger @S))
-&gt; Term s (PInteger @S)
-&gt; Term s (PBuiltinMap PTokenName (PInteger @S) :--&gt; PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinMap PTokenName (PInteger @S) :--&gt; PInteger @S)
-&gt; Term s (PBuiltinMap PTokenName (PInteger @S))
-&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinMap PTokenName (PInteger @S))
</span><a href="#local-6989586621679555991"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-comment">-- | Extract amount from PValue belonging to a Haskell-level AssetClass.</span><span>
</span><span id="line-241"></span><span class="annot"><a href="Agora.Utils.html#passetClassValueOf%27"><span class="hs-identifier hs-type">passetClassValueOf'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556703"><span class="annot"><a href="#local-6989586621679556703"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556702"><span class="annot"><a href="#local-6989586621679556702"><span class="hs-identifier hs-type">amounts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556704"><span class="annot"><a href="#local-6989586621679556704"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">AssetClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556704"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556703"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556702"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PInteger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span id="passetClassValueOf%27"><span class="annot"><span class="annottext">passetClassValueOf' :: forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
AssetClass -&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
</span><a href="Agora.Utils.html#passetClassValueOf%27"><span class="hs-identifier hs-var hs-var">passetClassValueOf'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">AssetClass</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555982"><span class="annot"><span class="annottext">CurrencySymbol
</span><a href="#local-6989586621679555982"><span class="hs-identifier hs-var">sym</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679555981"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679555981"><span class="hs-identifier hs-var">token</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-246"></span><span>  </span><span class="annot"><span class="annottext">ClosedTerm (PValue keys amounts :--&gt; PInteger @S)
-&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PValue keys amounts :--&gt; PInteger @S)
 -&gt; Term s (PValue keys amounts :--&gt; PInteger @S))
-&gt; ClosedTerm (PValue keys amounts :--&gt; PInteger @S)
-&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PValue keys amounts) -&gt; Term s (PInteger @S))
-&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PValue keys amounts) -&gt; Term s (PInteger @S))
 -&gt; Term s (PValue keys amounts :--&gt; PInteger @S))
-&gt; (Term s (PValue keys amounts) -&gt; Term s (PInteger @S))
-&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555974"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555974"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
forall (s :: S) (keys :: KeyGuarantees)
       (amounts :: AmountGuarantees).
Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
</span><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier hs-var">pvalueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
-&gt; Term s (PValue keys amounts)
-&gt; Term s (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555974"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S))
-&gt; Term s PCurrencySymbol -&gt; Term s (PTokenName :--&gt; PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted PCurrencySymbol -&gt; Term s PCurrencySymbol
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted PCurrencySymbol
CurrencySymbol
</span><a href="#local-6989586621679555982"><span class="hs-identifier hs-var">sym</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PTokenName :--&gt; PInteger @S)
-&gt; Term s PTokenName -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted PTokenName -&gt; Term s PTokenName
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted PTokenName
TokenName
</span><a href="#local-6989586621679555981"><span class="hs-identifier hs-var">token</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | Return '&gt;=' on two values comparing by only a particular AssetClass.</span><span>
</span><span id="line-249"></span><span class="annot"><a href="Agora.Utils.html#pgeqByClass"><span class="hs-identifier hs-type">pgeqByClass</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556691"><span class="annot"><a href="#local-6989586621679556691"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556690"><span class="annot"><a href="#local-6989586621679556690"><span class="hs-identifier hs-type">amounts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556692"><span class="annot"><a href="#local-6989586621679556692"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556692"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PCurrencySymbol</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTokenName</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556691"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556690"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556691"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556690"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span id="pgeqByClass"><span class="annot"><span class="annottext">pgeqByClass :: forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s
  (PCurrencySymbol
   :--&gt; (PTokenName
         :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
</span><a href="Agora.Utils.html#pgeqByClass"><span class="hs-identifier hs-var hs-var">pgeqByClass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>  </span><span class="annot"><span class="annottext">ClosedTerm
  (PCurrencySymbol
   :--&gt; (PTokenName
         :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PTokenName
            :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PCurrencySymbol
    :--&gt; (PTokenName
          :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
 -&gt; Term
      s
      (PCurrencySymbol
       :--&gt; (PTokenName
             :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))))
-&gt; ClosedTerm
     (PCurrencySymbol
      :--&gt; (PTokenName
            :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PTokenName
            :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><span class="annottext">(Term s PCurrencySymbol
 -&gt; Term s PTokenName
 -&gt; Term s (PValue keys amounts)
 -&gt; Term s (PValue keys amounts)
 -&gt; Term s PBool)
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PTokenName
            :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PCurrencySymbol
  -&gt; Term s PTokenName
  -&gt; Term s (PValue keys amounts)
  -&gt; Term s (PValue keys amounts)
  -&gt; Term s PBool)
 -&gt; Term
      s
      (PCurrencySymbol
       :--&gt; (PTokenName
             :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))))
-&gt; (Term s PCurrencySymbol
    -&gt; Term s PTokenName
    -&gt; Term s (PValue keys amounts)
    -&gt; Term s (PValue keys amounts)
    -&gt; Term s PBool)
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PTokenName
            :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555961"><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555961"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679555960"><span class="annot"><span class="annottext">Term s PTokenName
</span><a href="#local-6989586621679555960"><span class="hs-identifier hs-var">tn</span></a></span></span><span> </span><span id="local-6989586621679555959"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555959"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679555958"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555958"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-255"></span><span>      </span><span class="annot"><span class="annottext">Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
forall (s :: S) (keys :: KeyGuarantees)
       (amounts :: AmountGuarantees).
Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
</span><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier hs-var">pvalueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
-&gt; Term s (PValue keys amounts)
-&gt; Term s (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555958"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S))
-&gt; Term s PCurrencySymbol -&gt; Term s (PTokenName :--&gt; PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555961"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PTokenName :--&gt; PInteger @S)
-&gt; Term s PTokenName -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTokenName
</span><a href="#local-6989586621679555960"><span class="hs-identifier hs-var">tn</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
POrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
forall (s :: S) (keys :: KeyGuarantees)
       (amounts :: AmountGuarantees).
Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
</span><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier hs-var">pvalueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
-&gt; Term s (PValue keys amounts)
-&gt; Term s (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555959"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S))
-&gt; Term s PCurrencySymbol -&gt; Term s (PTokenName :--&gt; PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555961"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PTokenName :--&gt; PInteger @S)
-&gt; Term s PTokenName -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTokenName
</span><a href="#local-6989586621679555960"><span class="hs-identifier hs-var">tn</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">-- | Return '&gt;=' on two values comparing by only a particular CurrencySymbol.</span><span>
</span><span id="line-258"></span><span class="annot"><a href="Agora.Utils.html#pgeqBySymbol"><span class="hs-identifier hs-type">pgeqBySymbol</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556681"><span class="annot"><a href="#local-6989586621679556681"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556680"><span class="annot"><a href="#local-6989586621679556680"><span class="hs-identifier hs-type">amounts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556682"><span class="annot"><a href="#local-6989586621679556682"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556682"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PCurrencySymbol</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556681"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556680"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556681"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556680"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span id="pgeqBySymbol"><span class="annot"><span class="annottext">pgeqBySymbol :: forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s
  (PCurrencySymbol
   :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
</span><a href="Agora.Utils.html#pgeqBySymbol"><span class="hs-identifier hs-var hs-var">pgeqBySymbol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>  </span><span class="annot"><span class="annottext">ClosedTerm
  (PCurrencySymbol
   :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PCurrencySymbol
    :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
 -&gt; Term
      s
      (PCurrencySymbol
       :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
-&gt; ClosedTerm
     (PCurrencySymbol
      :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><span class="annottext">(Term s PCurrencySymbol
 -&gt; Term s (PValue keys amounts)
 -&gt; Term s (PValue keys amounts)
 -&gt; Term s PBool)
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PCurrencySymbol
  -&gt; Term s (PValue keys amounts)
  -&gt; Term s (PValue keys amounts)
  -&gt; Term s PBool)
 -&gt; Term
      s
      (PCurrencySymbol
       :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))))
-&gt; (Term s PCurrencySymbol
    -&gt; Term s (PValue keys amounts)
    -&gt; Term s (PValue keys amounts)
    -&gt; Term s PBool)
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555947"><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555947"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679555946"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555946"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679555945"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555945"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-264"></span><span>      </span><span class="annot"><span class="annottext">Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
</span><a href="Agora.Utils.html#psymbolValueOf"><span class="hs-identifier hs-var">psymbolValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
-&gt; Term s PCurrencySymbol
-&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555947"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts :--&gt; PInteger @S)
-&gt; Term s (PValue keys amounts) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555945"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
POrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
</span><a href="Agora.Utils.html#psymbolValueOf"><span class="hs-identifier hs-var">psymbolValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
-&gt; Term s PCurrencySymbol
-&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555947"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts :--&gt; PInteger @S)
-&gt; Term s (PValue keys amounts) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555946"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | Return '&gt;=' on two values comparing by only a particular Haskell-level AssetClass.</span><span>
</span><span id="line-267"></span><span class="annot"><a href="Agora.Utils.html#pgeqByClass%27"><span class="hs-identifier hs-type">pgeqByClass'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556674"><span class="annot"><a href="#local-6989586621679556674"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556673"><span class="annot"><a href="#local-6989586621679556673"><span class="hs-identifier hs-type">amounts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556675"><span class="annot"><a href="#local-6989586621679556675"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-269"></span><span>  </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">AssetClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-270"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556675"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556674"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556673"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556674"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556673"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span id="pgeqByClass%27"><span class="annot"><span class="annottext">pgeqByClass' :: forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
AssetClass
-&gt; Term
     s (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))
</span><a href="Agora.Utils.html#pgeqByClass%27"><span class="hs-identifier hs-var hs-var">pgeqByClass'</span></a></span></span><span> </span><span id="local-6989586621679555942"><span class="annot"><span class="annottext">AssetClass
</span><a href="#local-6989586621679555942"><span class="hs-identifier hs-var">ac</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-272"></span><span>  </span><span class="annot"><span class="annottext">ClosedTerm
  (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))
-&gt; Term
     s (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))
 -&gt; Term
      s (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
-&gt; ClosedTerm
     (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))
-&gt; Term
     s (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span class="annot"><span class="annottext">(Term s (PValue keys amounts)
 -&gt; Term s (PValue keys amounts) -&gt; Term s PBool)
-&gt; Term
     s (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PValue keys amounts)
  -&gt; Term s (PValue keys amounts) -&gt; Term s PBool)
 -&gt; Term
      s (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool)))
-&gt; (Term s (PValue keys amounts)
    -&gt; Term s (PValue keys amounts) -&gt; Term s PBool)
-&gt; Term
     s (PValue keys amounts :--&gt; (PValue keys amounts :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555936"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555936"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679555935"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555935"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-274"></span><span>      </span><span class="annot"><span class="annottext">AssetClass -&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
AssetClass -&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
</span><a href="Agora.Utils.html#passetClassValueOf%27"><span class="hs-identifier hs-var">passetClassValueOf'</span></a></span><span> </span><span class="annot"><span class="annottext">AssetClass
</span><a href="#local-6989586621679555942"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts :--&gt; PInteger @S)
-&gt; Term s (PValue keys amounts) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555935"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
POrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">AssetClass -&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
AssetClass -&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
</span><a href="Agora.Utils.html#passetClassValueOf%27"><span class="hs-identifier hs-var">passetClassValueOf'</span></a></span><span> </span><span class="annot"><span class="annottext">AssetClass
</span><a href="#local-6989586621679555942"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts :--&gt; PInteger @S)
-&gt; Term s (PValue keys amounts) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555936"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-comment">-- | Union two maps using a merge function on collisions.</span><span>
</span><span id="line-277"></span><span class="annot"><a href="Agora.Utils.html#pmapUnionWith"><span class="hs-identifier hs-type">pmapUnionWith</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556665"><span class="annot"><a href="#local-6989586621679556665"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556668"><span class="annot"><a href="#local-6989586621679556668"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556666"><span class="annot"><a href="#local-6989586621679556666"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556667"><span class="annot"><a href="#local-6989586621679556667"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-279"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556668"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-280"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556667"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556668"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556668"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556668"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556666"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556665"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556668"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556666"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556665"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556668"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556666"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556665"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556668"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span id="pmapUnionWith"><span class="annot"><span class="annottext">pmapUnionWith :: forall (k :: PType) (v :: PType) (keys :: KeyGuarantees) (s :: S).
PIsData v =&gt;
Term
  s
  ((v :--&gt; (v :--&gt; v))
   :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
</span><a href="Agora.Utils.html#pmapUnionWith"><span class="hs-identifier hs-var hs-var">pmapUnionWith</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((v :--&gt; (v :--&gt; v))
   :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
-&gt; Term
     s
     ((v :--&gt; (v :--&gt; v))
      :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((v :--&gt; (v :--&gt; v))
    :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
 -&gt; Term
      s
      ((v :--&gt; (v :--&gt; v))
       :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v))))
-&gt; ClosedTerm
     ((v :--&gt; (v :--&gt; v))
      :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
-&gt; Term
     s
     ((v :--&gt; (v :--&gt; v))
      :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-comment">-- TODO: this function is kinda suspect. I feel like a lot of optimizations could be done here</span><span>
</span><span id="line-283"></span><span>  </span><span class="annot"><span class="annottext">(Term s (v :--&gt; (v :--&gt; v))
 -&gt; Term s (PMap keys k v)
 -&gt; Term s (PMap keys k v)
 -&gt; Term s (PMap keys k v))
-&gt; Term
     s
     ((v :--&gt; (v :--&gt; v))
      :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (v :--&gt; (v :--&gt; v))
  -&gt; Term s (PMap keys k v)
  -&gt; Term s (PMap keys k v)
  -&gt; Term s (PMap keys k v))
 -&gt; Term
      s
      ((v :--&gt; (v :--&gt; v))
       :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v))))
-&gt; (Term s (v :--&gt; (v :--&gt; v))
    -&gt; Term s (PMap keys k v)
    -&gt; Term s (PMap keys k v)
    -&gt; Term s (PMap keys k v))
-&gt; Term
     s
     ((v :--&gt; (v :--&gt; v))
      :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555892"><span class="annot"><span class="annottext">Term s (v :--&gt; (v :--&gt; v))
</span><a href="#local-6989586621679555892"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679555891"><span class="annot"><span class="annottext">Term s (PMap keys k v)
</span><a href="#local-6989586621679555891"><span class="hs-identifier hs-var">xs'</span></a></span></span><span> </span><span id="local-6989586621679555890"><span class="annot"><span class="annottext">Term s (PMap keys k v)
</span><a href="#local-6989586621679555890"><span class="hs-identifier hs-var">ys'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont @(PMap keys k v) s (Term s (PMap keys k v))
-&gt; Term s (PMap keys k v)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @(PMap keys k v) s (Term s (PMap keys k v))
 -&gt; Term s (PMap keys k v))
-&gt; TermCont @(PMap keys k v) s (Term s (PMap keys k v))
-&gt; Term s (PMap keys k v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span id="local-6989586621679555889"><span class="annot"><span class="annottext">Term s (PBuiltinMap k v)
</span><a href="#local-6989586621679555889"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k v)
-&gt; TermCont @(PMap keys k v) s (PMap keys k v s)
forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var">tcmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k v)
</span><a href="#local-6989586621679555891"><span class="hs-identifier hs-var">xs'</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span id="local-6989586621679555888"><span class="annot"><span class="annottext">Term s (PBuiltinMap k v)
</span><a href="#local-6989586621679555888"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k v)
-&gt; TermCont @(PMap keys k v) s (PMap keys k v s)
forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var">tcmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k v)
</span><a href="#local-6989586621679555890"><span class="hs-identifier hs-var">ys'</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555887"><span class="annot"><span class="annottext">ls :: Term s (PBuiltinMap k v)
</span><a href="#local-6989586621679555887"><span class="hs-identifier hs-var hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-287"></span><span>          </span><span class="annot"><span class="annottext">Term
  s
  ((PBuiltinPair (PAsData k) (PAsData v)
    :--&gt; PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; (PBuiltinMap k v :--&gt; PBuiltinMap k v))
forall (list :: PType -&gt; PType) (a :: PType) (b :: PType) (s :: S).
(PListLike list, PElemConstraint list a, PElemConstraint list b) =&gt;
Term s ((a :--&gt; b) :--&gt; (list a :--&gt; list b))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmap</span></a></span><span class="hs-cpp">
            # plam
</span><span>              </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">p</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unTermCont</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-290"></span><span>                  </span><span class="hs-identifier">pf</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">tclet</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">pfstBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">p</span><span>
</span><span id="line-291"></span><span>                  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-292"></span><span>                    </span><span class="hs-identifier">pmatch</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">plookup</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">pf</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">ys</span><span class="hs-special">)</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-293"></span><span>                      </span><span class="hs-identifier">PJust</span><span> </span><span class="hs-identifier">v</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-294"></span><span>                        </span><span class="hs-comment">-- Data conversions here are silly, aren't they?</span><span>
</span><span id="line-295"></span><span>                        </span><span class="hs-identifier">ppairDataBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">pf</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">pdata</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">f</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">psndBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">p</span><span class="hs-special">)</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-identifier">v</span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>                      </span><span class="hs-identifier">PNothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">p</span><span>
</span><span id="line-297"></span><span>              </span><span class="hs-special">)</span><span class="hs-cpp">
            # xs
</span><span>        </span><span id="local-6989586621679555882"><span class="annot"><span class="annottext">rs :: Term s (PBuiltinMap k v)
</span><a href="#local-6989586621679555882"><span class="hs-identifier hs-var hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-300"></span><span>          </span><span class="annot"><span class="annottext">Term
  s
  ((PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool)
   :--&gt; (PBuiltinMap k v :--&gt; PBuiltinMap k v))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s ((a :--&gt; PBool) :--&gt; (list a :--&gt; list a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfilter</span></a></span><span class="hs-cpp">
            # plam
</span><span>              </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">p</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-303"></span><span>                  </span><span class="hs-identifier">pnot</span><span> </span><span class="hs-operator">#$</span><span> </span><span class="hs-identifier">pany</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">plam</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">p'</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">pfstBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">p'</span><span> </span><span class="hs-operator">#==</span><span> </span><span class="hs-identifier">pfstBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">p</span><span class="hs-special">)</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">xs</span><span>
</span><span id="line-304"></span><span>              </span><span class="hs-special">)</span><span class="hs-cpp">
            # ys
</span><span>    </span><span class="annot"><span class="annottext">Term s (PMap keys k v)
-&gt; TermCont @(PMap keys k v) s (Term s (PMap keys k v))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PMap keys k v)
 -&gt; TermCont @(PMap keys k v) s (Term s (PMap keys k v)))
-&gt; Term s (PMap keys k v)
-&gt; TermCont @(PMap keys k v) s (Term s (PMap keys k v))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PMap keys k v s -&gt; Term s (PMap keys k v)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinMap k v) -&gt; PMap keys k v s
forall (keysort :: KeyGuarantees) (k :: PType) (v :: PType)
       (s :: S).
Term s (PBuiltinMap k v) -&gt; PMap keysort k v s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PMap</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinMap k v) -&gt; PMap keys k v s)
-&gt; Term s (PBuiltinMap k v) -&gt; PMap keys k v s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinMap k v :--&gt; (PBuiltinMap k v :--&gt; PBuiltinMap k v))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; (list a :--&gt; list a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconcat</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinMap k v :--&gt; (PBuiltinMap k v :--&gt; PBuiltinMap k v))
-&gt; Term s (PBuiltinMap k v)
-&gt; Term s (PBuiltinMap k v :--&gt; PBuiltinMap k v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinMap k v)
</span><a href="#local-6989586621679555887"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinMap k v :--&gt; PBuiltinMap k v)
-&gt; Term s (PBuiltinMap k v) -&gt; Term s (PBuiltinMap k v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinMap k v)
</span><a href="#local-6989586621679555882"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-comment">-- | A special version of `pmap` which allows list elements to be thrown out.</span><span>
</span><span id="line-309"></span><span class="annot"><a href="Agora.Utils.html#pmapMaybe"><span class="hs-identifier hs-type">pmapMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556635"><span class="annot"><a href="#local-6989586621679556635"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679556636"><span class="annot"><a href="#local-6989586621679556636"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679556637"><span class="annot"><a href="#local-6989586621679556637"><span class="hs-identifier hs-type">list</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556637"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556636"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556635"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556636"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556636"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556637"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556636"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556637"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556636"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span id="pmapMaybe"><span class="annot"><span class="annottext">pmapMaybe :: forall (s :: S) (a :: PType) (list :: PType -&gt; PType).
PIsListLike list a =&gt;
Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
</span><a href="Agora.Utils.html#pmapMaybe"><span class="hs-identifier hs-var hs-var">pmapMaybe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
-&gt; Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
 -&gt; Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a)))
-&gt; ClosedTerm ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
-&gt; Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-311"></span><span>  </span><span class="annot"><span class="annottext">Term
  s
  ((((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
    :--&gt; ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a)))
   :--&gt; ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (((a :--&gt; b) :--&gt; (a :--&gt; b)) :--&gt; (a :--&gt; b))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfix</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
    :--&gt; ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a)))
   :--&gt; ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a)))
-&gt; Term
     s
     (((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
      :--&gt; ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a)))
-&gt; Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
 -&gt; Term s (a :--&gt; PMaybe a) -&gt; Term s (list a) -&gt; Term s (list a))
-&gt; Term
     s
     (((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
      :--&gt; ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
  -&gt; Term s (a :--&gt; PMaybe a) -&gt; Term s (list a) -&gt; Term s (list a))
 -&gt; Term
      s
      (((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
       :--&gt; ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))))
-&gt; (Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
    -&gt; Term s (a :--&gt; PMaybe a) -&gt; Term s (list a) -&gt; Term s (list a))
-&gt; Term
     s
     (((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
      :--&gt; ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555847"><span class="annot"><span class="annottext">Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
</span><a href="#local-6989586621679555847"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679555846"><span class="annot"><span class="annottext">Term s (a :--&gt; PMaybe a)
</span><a href="#local-6989586621679555846"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679555845"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555845"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool) -&gt; Term s (list a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555845"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnil</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; Term s (list a))
-&gt; Term s (list a) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><span class="annottext">TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a))
-&gt; TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-313"></span><span>      </span><span id="local-6989586621679555842"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555842"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; TermCont @(list a) s (Term s a)
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; TermCont @(list a) s (Term s a))
-&gt; Term s a -&gt; TermCont @(list a) s (Term s a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a) -&gt; Term s (list a) -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555845"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-314"></span><span>      </span><span id="local-6989586621679555840"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555840"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555845"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span>      </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-317"></span><span>        </span><span class="annot"><span class="annottext">Term s (PMaybe a)
-&gt; (PMaybe a s -&gt; Term s (list a)) -&gt; Term s (list a)
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; PMaybe a)
</span><a href="#local-6989586621679555846"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; PMaybe a) -&gt; Term s a -&gt; Term s (PMaybe a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555842"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe a s -&gt; Term s (list a)) -&gt; Term s (list a))
-&gt; (PMaybe a s -&gt; Term s (list a)) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-318"></span><span>          </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span id="local-6989586621679555838"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555838"><span class="hs-identifier hs-var">ux</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcons</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
-&gt; Term s a -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555838"><span class="hs-identifier hs-var">ux</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
</span><a href="#local-6989586621679555847"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
-&gt; Term s (a :--&gt; PMaybe a) -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; PMaybe a)
</span><a href="#local-6989586621679555846"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555840"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-319"></span><span>          </span><span class="annot"><span class="annottext">PMaybe a s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
</span><a href="#local-6989586621679555847"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
-&gt; Term s (a :--&gt; PMaybe a) -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; PMaybe a)
</span><a href="#local-6989586621679555846"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555840"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- | / O(n) /. Update the value at a given key in a `PMap`, have the same functionalities as 'Data.Map.update'.</span><span>
</span><span id="line-322"></span><span class="annot"><a href="Agora.Utils.html#pupdate"><span class="hs-identifier hs-type">pupdate</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556614"><span class="annot"><a href="#local-6989586621679556614"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556613"><span class="annot"><a href="#local-6989586621679556613"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556611"><span class="annot"><a href="#local-6989586621679556611"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556612"><span class="annot"><a href="#local-6989586621679556612"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556614"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556613"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-325"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556612"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556613"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556613"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556614"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556611"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556614"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556613"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556611"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556614"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556613"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span id="pupdate"><span class="annot"><span class="annottext">pupdate :: forall (k :: PType) (v :: PType) (keys :: KeyGuarantees) (s :: S).
(PIsData k, PIsData v) =&gt;
Term
  s
  ((v :--&gt; PMaybe v)
   :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
</span><a href="Agora.Utils.html#pupdate"><span class="hs-identifier hs-var hs-var">pupdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((v :--&gt; PMaybe v)
   :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
-&gt; Term
     s
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((v :--&gt; PMaybe v)
    :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
 -&gt; Term
      s
      ((v :--&gt; PMaybe v)
       :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v))))
-&gt; ClosedTerm
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
-&gt; Term
     s
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-327"></span><span>  </span><span class="annot"><span class="annottext">(Term s (v :--&gt; PMaybe v)
 -&gt; Term s k -&gt; Term s (PMap keys k v) -&gt; Term s (PMap keys k v))
-&gt; Term
     s
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (v :--&gt; PMaybe v)
  -&gt; Term s k -&gt; Term s (PMap keys k v) -&gt; Term s (PMap keys k v))
 -&gt; Term
      s
      ((v :--&gt; PMaybe v)
       :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v))))
-&gt; (Term s (v :--&gt; PMaybe v)
    -&gt; Term s k -&gt; Term s (PMap keys k v) -&gt; Term s (PMap keys k v))
-&gt; Term
     s
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555806"><span class="annot"><span class="annottext">Term s (v :--&gt; PMaybe v)
</span><a href="#local-6989586621679555806"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s k -&gt; Term s (PAsData k)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pdata</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679555805"><span class="annot"><span class="annottext">Term s (PAsData k)
</span><a href="#local-6989586621679555805"><span class="hs-identifier hs-var">tk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PMap keys k v)
-&gt; forall (b :: PType). Term s (PInner (PMap keys k v) b)
forall (s :: S) (a :: PType).
Term s a -&gt; forall (b :: PType). Term s (PInner a b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555804"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679555804"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">PMap keys k v s -&gt; Term s (PMap keys k v)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PMap keys k v s -&gt; Term s (PMap keys k v))
-&gt; PMap keys k v s -&gt; Term s (PMap keys k v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-329"></span><span>      </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; PMap keys k v s
forall (keysort :: KeyGuarantees) (k :: PType) (v :: PType)
       (s :: S).
Term s (PBuiltinMap k v) -&gt; PMap keysort k v s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PMap</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
 -&gt; PMap keys k v s)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; PMap keys k v s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-330"></span><span>        </span><span class="annot"><span class="annottext">Term
  s
  ((PBuiltinPair (PAsData k) (PAsData v)
    :--&gt; PMaybe (PBuiltinPair (PAsData k) (PAsData v)))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
         :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
forall (s :: S) (a :: PType) (list :: PType -&gt; PType).
PIsListLike list a =&gt;
Term s ((a :--&gt; PMaybe a) :--&gt; (list a :--&gt; list a))
</span><a href="Agora.Utils.html#pmapMaybe"><span class="hs-identifier hs-var">pmapMaybe</span></a></span><span class="hs-cpp">
          # plam
</span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">kv</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-333"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span class="hs-identifier">k</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pfstBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">kv</span><span>
</span><span id="line-334"></span><span>                    </span><span class="hs-identifier">v</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">psndBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">kv</span><span>
</span><span id="line-335"></span><span>                 </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier">pif</span><span>
</span><span id="line-336"></span><span>                      </span><span class="hs-special">(</span><span class="hs-identifier">k</span><span> </span><span class="hs-operator">#==</span><span> </span><span class="hs-identifier">tk</span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>                      </span><span class="hs-comment">-- 'PBuiltinPair' doesn't have 'PFunctor', so:</span><span>
</span><span id="line-338"></span><span>                      </span><span class="hs-special">(</span><span> </span><span class="hs-identifier">pmatch</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">f</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">v</span><span class="hs-special">)</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-339"></span><span>                          </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-340"></span><span>                            </span><span class="hs-identifier">PJust</span><span> </span><span class="hs-identifier">uv</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">pcon</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">PJust</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">ppairDataBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">k</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">pdata</span><span> </span><span class="hs-identifier">uv</span><span>
</span><span id="line-341"></span><span>                            </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">pcon</span><span> </span><span class="hs-identifier">PNothing</span><span>
</span><span id="line-342"></span><span>                      </span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>                      </span><span class="hs-special">(</span><span class="hs-identifier">pcon</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">PJust</span><span> </span><span class="hs-identifier">kv</span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>            </span><span class="hs-special">)</span><span class="hs-cpp">
          # ps
</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- | / O(n) /. Map a function over all values in a 'PMap'.</span><span>
</span><span id="line-348"></span><span class="annot"><a href="Agora.Utils.html#pmapMap"><span class="hs-identifier hs-type">pmapMap</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-349"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556605"><span class="annot"><a href="#local-6989586621679556605"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556604"><span class="annot"><a href="#local-6989586621679556604"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556603"><span class="annot"><a href="#local-6989586621679556603"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556601"><span class="annot"><a href="#local-6989586621679556601"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556602"><span class="annot"><a href="#local-6989586621679556602"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556605"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556604"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556603"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-351"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556602"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556604"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556603"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556601"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556605"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556604"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556601"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556605"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556603"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span id="pmapMap"><span class="annot"><span class="annottext">pmapMap :: forall (k :: PType) (a :: PType) (b :: PType)
       (keys :: KeyGuarantees) (s :: S).
(PIsData k, PIsData a, PIsData b) =&gt;
Term s ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b))
</span><a href="Agora.Utils.html#pmapMap"><span class="hs-identifier hs-var hs-var">pmapMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b))
-&gt; Term s ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b))
 -&gt; Term s ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b)))
-&gt; ClosedTerm ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b))
-&gt; Term s ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-353"></span><span>  </span><span class="annot"><span class="annottext">(Term s (a :--&gt; b)
 -&gt; Term s (PMap keys k a) -&gt; Term s (PMap keys k b))
-&gt; Term s ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (a :--&gt; b)
  -&gt; Term s (PMap keys k a) -&gt; Term s (PMap keys k b))
 -&gt; Term s ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b)))
-&gt; (Term s (a :--&gt; b)
    -&gt; Term s (PMap keys k a) -&gt; Term s (PMap keys k b))
-&gt; Term s ((a :--&gt; b) :--&gt; (PMap keys k a :--&gt; PMap keys k b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555776"><span class="annot"><span class="annottext">Term s (a :--&gt; b)
</span><a href="#local-6989586621679555776"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PMap keys k a)
-&gt; forall (b :: PType). Term s (PInner (PMap keys k a) b)
forall (s :: S) (a :: PType).
Term s a -&gt; forall (b :: PType). Term s (PInner a b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555775"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679555775"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-354"></span><span>    </span><span class="annot"><span class="annottext">PMap keys k b s -&gt; Term s (PMap keys k b)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PMap keys k b s -&gt; Term s (PMap keys k b))
-&gt; PMap keys k b s -&gt; Term s (PMap keys k b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-355"></span><span>      </span><span class="annot"><span class="annottext">Term s (PBuiltinMap k b) -&gt; PMap keys k b s
forall (keysort :: KeyGuarantees) (k :: PType) (v :: PType)
       (s :: S).
Term s (PBuiltinMap k v) -&gt; PMap keysort k v s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PMap</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinMap k b) -&gt; PMap keys k b s)
-&gt; Term s (PBuiltinMap k b) -&gt; PMap keys k b s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><span class="annottext">Term
  s
  ((PBuiltinPair (PAsData k) (PAsData a)
    :--&gt; PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
         :--&gt; PBuiltinMap k b))
forall (list :: PType -&gt; PType) (a :: PType) (b :: PType) (s :: S).
(PListLike list, PElemConstraint list a, PElemConstraint list b) =&gt;
Term s ((a :--&gt; b) :--&gt; (list a :--&gt; list b))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmap</span></a></span><span class="hs-cpp">
          # plam
</span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">kv</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-359"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span class="hs-identifier">k</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pfstBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">kv</span><span>
</span><span id="line-360"></span><span>                    </span><span class="hs-identifier">v</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">psndBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">kv</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span>                    </span><span class="hs-identifier">nv</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pdata</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">f</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-identifier">v</span><span>
</span><span id="line-363"></span><span>                 </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier">ppairDataBuiltin</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">k</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">nv</span><span>
</span><span id="line-364"></span><span>            </span><span class="hs-special">)</span><span class="hs-cpp">
          # ps
</span><span>
</span><span id="line-367"></span><span class="hs-comment">-- | Compute the guarantees known after adding two values.</span><span>
</span><span id="line-368"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="AddGuarantees"><span class="annot"><a href="Agora.Utils.html#AddGuarantees"><span class="hs-identifier hs-var">AddGuarantees</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555770"><span class="annot"><a href="#local-6989586621679555770"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679555769"><span class="annot"><a href="#local-6989586621679555769"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-369"></span><span>  </span><span id="AddGuarantees"><span class="annot"><a href="Agora.Utils.html#AddGuarantees"><span class="hs-identifier hs-var">AddGuarantees</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Positive</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Positive</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Positive</span></a></span><span>
</span><span id="line-370"></span><span>  </span><span id="AddGuarantees"><span class="annot"><a href="Agora.Utils.html#AddGuarantees"><span class="hs-identifier hs-var">AddGuarantees</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">NoGuarantees</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">-- | Add two 'PValue's together.</span><span>
</span><span id="line-373"></span><span class="annot"><a href="Agora.Utils.html#paddValue"><span class="hs-identifier hs-type">paddValue</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556593"><span class="annot"><a href="#local-6989586621679556593"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556592"><span class="annot"><a href="#local-6989586621679556592"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556591"><span class="annot"><a href="#local-6989586621679556591"><span class="hs-identifier hs-type">bs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556594"><span class="annot"><a href="#local-6989586621679556594"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-375"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556594"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556593"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556592"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556593"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556591"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556593"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agora.Utils.html#AddGuarantees"><span class="hs-identifier hs-type">AddGuarantees</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556592"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556591"><span class="hs-identifier hs-type">bs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span id="paddValue"><span class="annot"><span class="annottext">paddValue :: forall (keys :: KeyGuarantees) (as :: AmountGuarantees)
       (bs :: AmountGuarantees) (s :: S).
Term
  s
  (PValue keys as
   :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs)))
</span><a href="Agora.Utils.html#paddValue"><span class="hs-identifier hs-var hs-var">paddValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  (PValue keys as
   :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs)))
-&gt; Term
     s
     (PValue keys as
      :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PValue keys as
    :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs)))
 -&gt; Term
      s
      (PValue keys as
       :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs))))
-&gt; ClosedTerm
     (PValue keys as
      :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs)))
-&gt; Term
     s
     (PValue keys as
      :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PValue keys as)
 -&gt; Term s (PValue keys bs)
 -&gt; Term s (PValue keys (AddGuarantees as bs)))
-&gt; Term
     s
     (PValue keys as
      :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PValue keys as)
  -&gt; Term s (PValue keys bs)
  -&gt; Term s (PValue keys (AddGuarantees as bs)))
 -&gt; Term
      s
      (PValue keys as
       :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs))))
-&gt; (Term s (PValue keys as)
    -&gt; Term s (PValue keys bs)
    -&gt; Term s (PValue keys (AddGuarantees as bs)))
-&gt; Term
     s
     (PValue keys as
      :--&gt; (PValue keys bs :--&gt; PValue keys (AddGuarantees as bs)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555744"><span class="annot"><span class="annottext">Term s (PValue keys as)
</span><a href="#local-6989586621679555744"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679555743"><span class="annot"><span class="annottext">Term s (PValue keys bs)
</span><a href="#local-6989586621679555743"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont
  @(PValue keys (AddGuarantees as bs))
  s
  (Term s (PValue keys (AddGuarantees as bs)))
-&gt; Term s (PValue keys (AddGuarantees as bs))
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont
   @(PValue keys (AddGuarantees as bs))
   s
   (Term s (PValue keys (AddGuarantees as bs)))
 -&gt; Term s (PValue keys (AddGuarantees as bs)))
-&gt; TermCont
     @(PValue keys (AddGuarantees as bs))
     s
     (Term s (PValue keys (AddGuarantees as bs)))
-&gt; Term s (PValue keys (AddGuarantees as bs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span id="local-6989586621679555742"><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555742"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys as)
-&gt; TermCont
     @(PValue keys (AddGuarantees as bs)) s (PValue keys as s)
forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var">tcmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys as)
</span><a href="#local-6989586621679555744"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-379"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span id="local-6989586621679555741"><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555741"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys bs)
-&gt; TermCont
     @(PValue keys (AddGuarantees as bs)) s (PValue keys bs s)
forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var">tcmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys bs)
</span><a href="#local-6989586621679555743"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-380"></span><span>    </span><span class="annot"><span class="annottext">Term s (PValue keys (AddGuarantees as bs))
-&gt; TermCont
     @(PValue keys (AddGuarantees as bs))
     s
     (Term s (PValue keys (AddGuarantees as bs)))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PValue keys (AddGuarantees as bs))
 -&gt; TermCont
      @(PValue keys (AddGuarantees as bs))
      s
      (Term s (PValue keys (AddGuarantees as bs))))
-&gt; Term s (PValue keys (AddGuarantees as bs))
-&gt; TermCont
     @(PValue keys (AddGuarantees as bs))
     s
     (Term s (PValue keys (AddGuarantees as bs)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-381"></span><span>      </span><span class="annot"><span class="annottext">PValue keys (AddGuarantees as bs) s
-&gt; Term s (PValue keys (AddGuarantees as bs))
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span>
</span><span id="line-382"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; PValue keys (AddGuarantees as bs) s
forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; PValue keys amounts s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Term
   s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
 -&gt; PValue keys (AddGuarantees as bs) s)
-&gt; Term
     s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; PValue keys (AddGuarantees as bs) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-383"></span><span>            </span><span class="annot"><span class="annottext">Term
  s
  ((PMap keys PTokenName (PInteger @S)
    :--&gt; (PMap keys PTokenName (PInteger @S)
          :--&gt; PMap keys PTokenName (PInteger @S)))
   :--&gt; (PMap
           keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
         :--&gt; (PMap
                 keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
               :--&gt; PMap
                      keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))))
forall (k :: PType) (v :: PType) (keys :: KeyGuarantees) (s :: S).
PIsData v =&gt;
Term
  s
  ((v :--&gt; (v :--&gt; v))
   :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
</span><a href="Agora.Utils.html#pmapUnionWith"><span class="hs-identifier hs-var">pmapUnionWith</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PMap keys PTokenName (PInteger @S)
    :--&gt; (PMap keys PTokenName (PInteger @S)
          :--&gt; PMap keys PTokenName (PInteger @S)))
   :--&gt; (PMap
           keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
         :--&gt; (PMap
                 keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
               :--&gt; PMap
                      keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))))
-&gt; Term
     s
     (PMap keys PTokenName (PInteger @S)
      :--&gt; (PMap keys PTokenName (PInteger @S)
            :--&gt; PMap keys PTokenName (PInteger @S)))
-&gt; Term
     s
     (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
      :--&gt; (PMap
              keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
            :--&gt; PMap
                   keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PMap keys PTokenName (PInteger @S))
 -&gt; Term s (PMap keys PTokenName (PInteger @S))
 -&gt; Term s (PMap keys PTokenName (PInteger @S)))
-&gt; Term
     s
     (PMap keys PTokenName (PInteger @S)
      :--&gt; (PMap keys PTokenName (PInteger @S)
            :--&gt; PMap keys PTokenName (PInteger @S)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679555740"><span class="annot"><span class="annottext">Term s (PMap keys PTokenName (PInteger @S))
</span><a href="#local-6989586621679555740"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679555739"><span class="annot"><span class="annottext">Term s (PMap keys PTokenName (PInteger @S))
</span><a href="#local-6989586621679555739"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PInteger @S :--&gt; (PInteger @S :--&gt; PInteger @S))
   :--&gt; (PMap keys PTokenName (PInteger @S)
         :--&gt; (PMap keys PTokenName (PInteger @S)
               :--&gt; PMap keys PTokenName (PInteger @S))))
forall (k :: PType) (v :: PType) (keys :: KeyGuarantees) (s :: S).
PIsData v =&gt;
Term
  s
  ((v :--&gt; (v :--&gt; v))
   :--&gt; (PMap keys k v :--&gt; (PMap keys k v :--&gt; PMap keys k v)))
</span><a href="Agora.Utils.html#pmapUnionWith"><span class="hs-identifier hs-var">pmapUnionWith</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PInteger @S :--&gt; (PInteger @S :--&gt; PInteger @S))
   :--&gt; (PMap keys PTokenName (PInteger @S)
         :--&gt; (PMap keys PTokenName (PInteger @S)
               :--&gt; PMap keys PTokenName (PInteger @S))))
-&gt; Term s (PInteger @S :--&gt; (PInteger @S :--&gt; PInteger @S))
-&gt; Term
     s
     (PMap keys PTokenName (PInteger @S)
      :--&gt; (PMap keys PTokenName (PInteger @S)
            :--&gt; PMap keys PTokenName (PInteger @S)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PInteger @S)
 -&gt; Term s (PInteger @S) -&gt; Term s (PInteger @S))
-&gt; Term s (PInteger @S :--&gt; (PInteger @S :--&gt; PInteger @S))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
-&gt; Term s (PInteger @S) -&gt; Term s (PInteger @S)
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">(+)</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap keys PTokenName (PInteger @S)
   :--&gt; (PMap keys PTokenName (PInteger @S)
         :--&gt; PMap keys PTokenName (PInteger @S)))
-&gt; Term s (PMap keys PTokenName (PInteger @S))
-&gt; Term
     s
     (PMap keys PTokenName (PInteger @S)
      :--&gt; PMap keys PTokenName (PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys PTokenName (PInteger @S))
</span><a href="#local-6989586621679555740"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap keys PTokenName (PInteger @S)
   :--&gt; PMap keys PTokenName (PInteger @S))
-&gt; Term s (PMap keys PTokenName (PInteger @S))
-&gt; Term s (PMap keys PTokenName (PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys PTokenName (PInteger @S))
</span><a href="#local-6989586621679555739"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
   :--&gt; (PMap
           keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
         :--&gt; PMap
                keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))))
-&gt; Term
     s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; Term
     s
     (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
      :--&gt; PMap
             keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555742"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))
   :--&gt; PMap
          keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; Term
     s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; Term
     s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555741"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-384"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="hs-comment">-- | Sum of all value at input.</span><span>
</span><span id="line-387"></span><span class="annot"><a href="Agora.Utils.html#pvalueSpent"><span class="hs-identifier hs-type">pvalueSpent</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556581"><span class="annot"><a href="#local-6989586621679556581"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-389"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556581"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxInInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Sorted</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Positive</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span id="pvalueSpent"><span class="annot"><span class="annottext">pvalueSpent :: forall (s :: S).
Term
  s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive)
</span><a href="Agora.Utils.html#pvalueSpent"><span class="hs-identifier hs-var hs-var">pvalueSpent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive))
-&gt; Term
     s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive))
 -&gt; Term
      s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive))
-&gt; (forall (s :: S).
    Term
      s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive))
-&gt; Term
     s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-391"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PAsData PTxInInfo))
 -&gt; Term s (PValue 'Sorted 'Positive))
-&gt; Term
     s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinList (PAsData PTxInInfo))
  -&gt; Term s (PValue 'Sorted 'Positive))
 -&gt; Term
      s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive))
-&gt; (Term s (PBuiltinList (PAsData PTxInInfo))
    -&gt; Term s (PValue 'Sorted 'Positive))
-&gt; Term
     s (PBuiltinList (PAsData PTxInInfo) :--&gt; PValue 'Sorted 'Positive)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555693"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo))
</span><a href="#local-6989586621679555693"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-392"></span><span>    </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData PTxInInfo
    :--&gt; (PValue 'Sorted 'Positive :--&gt; PValue 'Sorted 'Positive))
   :--&gt; (PValue 'Sorted 'Positive
         :--&gt; (PBuiltinList (PAsData PTxInInfo)
               :--&gt; PValue 'Sorted 'Positive)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (b :: PType).
PIsListLike list a =&gt;
Term s ((a :--&gt; (b :--&gt; b)) :--&gt; (b :--&gt; (list a :--&gt; b)))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfoldr</span></a></span><span class="hs-cpp">
      # plam
</span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">txInInfo'</span><span> </span><span class="hs-identifier">v</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-395"></span><span>            </span><span class="hs-identifier">pmatch</span><span>
</span><span id="line-396"></span><span>              </span><span class="hs-special">(</span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-identifier">txInInfo'</span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>              </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">PTxInInfo</span><span> </span><span class="hs-identifier">txInInfo</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-398"></span><span>                </span><span class="hs-identifier">paddValue</span><span class="hs-cpp">
                  # pmatch
</span><span>                    </span><span class="hs-special">(</span><span class="hs-identifier">pfield</span><span> </span><span class="hs-glyph">@</span><span class="hs-string">&quot;resolved&quot;</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">txInInfo</span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>                    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">PTxOut</span><span> </span><span class="hs-identifier">o</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">pfield</span><span> </span><span class="hs-glyph">@</span><span class="hs-string">&quot;value&quot;</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">o</span><span class="hs-special">)</span><span class="hs-cpp">
                  # v
</span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>      </span><span class="hs-comment">-- TODO: This should be possible without coercions, but I can't figure out the types atm.</span><span class="hs-cpp">
      # punsafeCoerce (pconstant mempty :: Term _ (PValue 'Unsorted 'NonZero))
</span><span class="hs-cpp">      # inputs
</span><span>
</span><span id="line-408"></span><span class="hs-comment">-- | Find the TxInInfo by a TxOutRef.</span><span>
</span><span id="line-409"></span><span id="local-6989586621679556557"><span class="annot"><a href="Agora.Utils.html#pfindTxInByTxOutRef"><span class="hs-identifier hs-type">pfindTxInByTxOutRef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556557"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxOutRef</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxInInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxInInfo</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-410"></span><span id="pfindTxInByTxOutRef"><span class="annot"><span class="annottext">pfindTxInByTxOutRef :: forall (s :: S).
Term
  s
  (PTxOutRef
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
</span><a href="Agora.Utils.html#pfindTxInByTxOutRef"><span class="hs-identifier hs-var hs-var">pfindTxInByTxOutRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s
   (PTxOutRef
    :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)))
-&gt; Term
     s
     (PTxOutRef
      :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s
    (PTxOutRef
     :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)))
 -&gt; Term
      s
      (PTxOutRef
       :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)))
-&gt; (forall (s :: S).
    Term
      s
      (PTxOutRef
       :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)))
-&gt; Term
     s
     (PTxOutRef
      :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><span class="annottext">(Term s PTxOutRef
 -&gt; Term s (PBuiltinList (PAsData PTxInInfo))
 -&gt; Term s (PMaybe PTxInInfo))
-&gt; Term
     s
     (PTxOutRef
      :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PTxOutRef
  -&gt; Term s (PBuiltinList (PAsData PTxInInfo))
  -&gt; Term s (PMaybe PTxInInfo))
 -&gt; Term
      s
      (PTxOutRef
       :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)))
-&gt; (Term s PTxOutRef
    -&gt; Term s (PBuiltinList (PAsData PTxInInfo))
    -&gt; Term s (PMaybe PTxInInfo))
-&gt; Term
     s
     (PTxOutRef
      :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555654"><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679555654"><span class="hs-identifier hs-var">txOutRef</span></a></span></span><span> </span><span id="local-6989586621679555653"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo))
</span><a href="#local-6989586621679555653"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-412"></span><span>    </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData PTxInInfo :--&gt; PMaybe PTxInInfo)
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (b :: PType).
PIsListLike list a =&gt;
Term s ((a :--&gt; PMaybe b) :--&gt; (list a :--&gt; PMaybe b))
</span><a href="Agora.Utils.html#pfindMap"><span class="hs-identifier hs-var">pfindMap</span></a></span><span class="hs-cpp">
      # plam
</span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">txInInfo'</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-415"></span><span>            </span><span class="hs-identifier">plet</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-identifier">txInInfo'</span><span class="hs-special">)</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">r</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-416"></span><span>              </span><span class="hs-identifier">pmatch</span><span> </span><span class="hs-identifier">r</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">PTxInInfo</span><span> </span><span class="hs-identifier">txInInfo</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-417"></span><span>                </span><span class="hs-identifier">pif</span><span>
</span><span id="line-418"></span><span>                  </span><span class="hs-special">(</span><span class="hs-identifier">pdata</span><span> </span><span class="hs-identifier">txOutRef</span><span> </span><span class="hs-operator">#==</span><span> </span><span class="hs-identifier">pfield</span><span> </span><span class="hs-glyph">@</span><span class="hs-string">&quot;outRef&quot;</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">txInInfo</span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>                  </span><span class="hs-special">(</span><span class="hs-identifier">pcon</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">PJust</span><span> </span><span class="hs-identifier">r</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>                  </span><span class="hs-special">(</span><span class="hs-identifier">pcon</span><span> </span><span class="hs-identifier">PNothing</span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>        </span><span class="hs-special">)</span><span class="hs-cpp">
      #$ inputs
</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- | True if a list is not empty.</span><span>
</span><span id="line-425"></span><span class="annot"><a href="Agora.Utils.html#pnotNull"><span class="hs-identifier hs-type">pnotNull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679555649"><span class="annot"><a href="#local-6989586621679555649"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span id="local-6989586621679555648"><span class="annot"><a href="#local-6989586621679555648"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679555649"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679555648"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679555649"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679555648"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span id="pnotNull"><span class="annot"><span class="annottext">pnotNull :: Term w (list a :--&gt; PBool)
</span><a href="Agora.Utils.html#pnotNull"><span class="hs-identifier hs-var hs-var">pnotNull</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (list a :--&gt; PBool) -&gt; Term w (list a :--&gt; PBool)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (list a :--&gt; PBool) -&gt; Term w (list a :--&gt; PBool))
-&gt; ClosedTerm (list a :--&gt; PBool) -&gt; Term w (list a :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; Term s PBool) -&gt; Term s (list a :--&gt; PBool)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (list a) -&gt; Term s PBool) -&gt; Term s (list a :--&gt; PBool))
-&gt; (Term s (list a) -&gt; Term s PBool) -&gt; Term s (list a :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; Term s (list a) -&gt; Term s PBool)
-&gt; Term s PBool -&gt; Term s (list a) -&gt; Term s PBool
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (r :: PType).
(PListLike list, PElemConstraint list a) =&gt;
(Term s a -&gt; Term s (list a) -&gt; Term s r)
-&gt; Term s r -&gt; Term s (list a) -&gt; Term s r
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pelimList</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Term s a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PTrue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PFalse</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-comment">{- | Check if a particular asset class has been spent in the input list.

     When using this as an authority check, you __MUST__ ensure the authority
     knows how to ensure its end of the contract.
-}</span><span>
</span><span id="line-433"></span><span class="annot"><a href="Agora.Utils.html#ptokenSpent"><span class="hs-identifier hs-type">ptokenSpent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">{</span><span id="local-6989586621679556546"><span class="annot"><a href="#local-6989586621679556546"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">}</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556546"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier hs-type">PAssetClass</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxInInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span id="ptokenSpent"><span class="annot"><span class="annottext">ptokenSpent :: forall {s :: S}.
Term
  s (PAssetClass :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool))
</span><a href="Agora.Utils.html#ptokenSpent"><span class="hs-identifier hs-var hs-var">ptokenSpent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><span class="annottext">(Term s PAssetClass
 -&gt; Term s (PBuiltinList (PAsData PTxInInfo)) -&gt; Term s PBool)
-&gt; Term
     s (PAssetClass :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PAssetClass
  -&gt; Term s (PBuiltinList (PAsData PTxInInfo)) -&gt; Term s PBool)
 -&gt; Term
      s (PAssetClass :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool)))
-&gt; (Term s PAssetClass
    -&gt; Term s (PBuiltinList (PAsData PTxInInfo)) -&gt; Term s PBool)
-&gt; Term
     s (PAssetClass :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555577"><span class="annot"><span class="annottext">Term s PAssetClass
</span><a href="#local-6989586621679555577"><span class="hs-identifier hs-var">tokenClass</span></a></span></span><span> </span><span id="local-6989586621679555576"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo))
</span><a href="#local-6989586621679555576"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-436"></span><span>    </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><span class="hs-number">0</span></span><span class="hs-cpp">
      #&lt; pfoldr @PBuiltinList
</span><span class="hs-cpp">        # plam
</span><span>          </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">txInInfo'</span><span> </span><span class="hs-identifier">acc</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">unTermCont</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-440"></span><span>              </span><span class="hs-identifier">PTxInInfo</span><span> </span><span class="hs-identifier">txInInfo</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">tcmatch</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-identifier">txInInfo'</span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>              </span><span class="hs-identifier">PTxOut</span><span> </span><span class="hs-identifier">txOut'</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">tcmatch</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">pfield</span><span> </span><span class="hs-glyph">@</span><span class="hs-string">&quot;resolved&quot;</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">txInInfo</span><span>
</span><span id="line-442"></span><span>              </span><span class="hs-identifier">txOut</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">tcont</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">pletFields</span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-string">&quot;value&quot;</span><span class="hs-special">]</span><span> </span><span class="hs-identifier">txOut'</span><span>
</span><span id="line-443"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span class="hs-identifier">txOutValue</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pfromData</span><span> </span><span class="hs-identifier">txOut</span><span class="hs-operator">.</span><span class="hs-identifier">value</span><span>
</span><span id="line-444"></span><span>              </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">acc</span><span> </span><span class="hs-operator">+</span><span> </span><span class="hs-identifier">passetClassValueOf</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">txOutValue</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">tokenClass</span><span>
</span><span id="line-445"></span><span>          </span><span class="hs-special">)</span><span class="hs-cpp">
        # 0
</span><span class="hs-cpp">        # inputs
</span><span>
</span><span id="line-449"></span><span class="hs-comment">{- | True if both maps have exactly the same keys.
     Using @'#=='@ is not sufficient, because keys returned are not ordered.
-}</span><span>
</span><span id="line-452"></span><span class="annot"><a href="Agora.Utils.html#pkeysEqual"><span class="hs-identifier hs-type">pkeysEqual</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556510"><span class="annot"><a href="#local-6989586621679556510"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556507"><span class="annot"><a href="#local-6989586621679556507"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556506"><span class="annot"><a href="#local-6989586621679556506"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556508"><span class="annot"><a href="#local-6989586621679556508"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556509"><span class="annot"><a href="#local-6989586621679556509"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">POrd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556510"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556510"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-455"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556509"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556508"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556510"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556507"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556508"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556510"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556506"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-456"></span><span id="pkeysEqual"><span class="annot"><span class="annottext">pkeysEqual :: forall (k :: PType) (a :: PType) (b :: PType)
       (keys :: KeyGuarantees) (s :: S).
(POrd k, PIsData k) =&gt;
Term s (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool))
</span><a href="Agora.Utils.html#pkeysEqual"><span class="hs-identifier hs-var hs-var">pkeysEqual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool))
-&gt; Term s (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool))
 -&gt; Term s (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool)))
-&gt; ClosedTerm (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool))
-&gt; Term s (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-457"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PMap keys k a) -&gt; Term s (PMap keys k b) -&gt; Term s PBool)
-&gt; Term s (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PMap keys k a) -&gt; Term s (PMap keys k b) -&gt; Term s PBool)
 -&gt; Term s (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool)))
-&gt; (Term s (PMap keys k a)
    -&gt; Term s (PMap keys k b) -&gt; Term s PBool)
-&gt; Term s (PMap keys k a :--&gt; (PMap keys k b :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555542"><span class="annot"><span class="annottext">Term s (PMap keys k a)
</span><a href="#local-6989586621679555542"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679555541"><span class="annot"><span class="annottext">Term s (PMap keys k b)
</span><a href="#local-6989586621679555541"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont @PBool s (Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @PBool s (Term s PBool) -&gt; Term s PBool)
-&gt; TermCont @PBool s (Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-458"></span><span>    </span><span id="local-6989586621679555540"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555540"><span class="hs-identifier hs-var">pks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
-&gt; TermCont @PBool s (Term s (PBuiltinList (PAsData k)))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PAsData k))
 -&gt; TermCont @PBool s (Term s (PBuiltinList (PAsData k))))
-&gt; Term s (PBuiltinList (PAsData k))
-&gt; TermCont @PBool s (Term s (PBuiltinList (PAsData k)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k a :--&gt; PBuiltinList (PAsData k))
forall (k :: PType) (v :: PType) (keys :: KeyGuarantees) (s :: S).
Term s (PMap keys k v :--&gt; PBuiltinList (PAsData k))
</span><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier hs-var">pkeys</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k a :--&gt; PBuiltinList (PAsData k))
-&gt; Term s (PMap keys k a) -&gt; Term s (PBuiltinList (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k a)
</span><a href="#local-6989586621679555542"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-459"></span><span>    </span><span id="local-6989586621679555539"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555539"><span class="hs-identifier hs-var">qks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
-&gt; TermCont @PBool s (Term s (PBuiltinList (PAsData k)))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PAsData k))
 -&gt; TermCont @PBool s (Term s (PBuiltinList (PAsData k))))
-&gt; Term s (PBuiltinList (PAsData k))
-&gt; TermCont @PBool s (Term s (PBuiltinList (PAsData k)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k b :--&gt; PBuiltinList (PAsData k))
forall (k :: PType) (v :: PType) (keys :: KeyGuarantees) (s :: S).
Term s (PMap keys k v :--&gt; PBuiltinList (PAsData k))
</span><a href="../file:///nix/store/lglqmvsi4gmqg72impsspvkwi5l7qmjz-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.0.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier hs-var">pkeys</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k b :--&gt; PBuiltinList (PAsData k))
-&gt; Term s (PMap keys k b) -&gt; Term s (PBuiltinList (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k b)
</span><a href="#local-6989586621679555541"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span>    </span><span class="annot"><span class="annottext">Term s PBool -&gt; TermCont @PBool s (Term s PBool)
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @PBool s (Term s PBool))
-&gt; Term s PBool -&gt; TermCont @PBool s (Term s PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-462"></span><span>      </span><span class="annot"><span class="annottext">Term s PBool -&gt; Term s PBool -&gt; Term s PBool -&gt; Term s PBool
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span>
</span><span id="line-463"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k) :--&gt; PInteger @S)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PInteger @S)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plength</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k) :--&gt; PInteger @S)
-&gt; Term s (PBuiltinList (PAsData k)) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555540"><span class="hs-identifier hs-var">pks</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k) :--&gt; PInteger @S)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PInteger @S)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plength</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k) :--&gt; PInteger @S)
-&gt; Term s (PBuiltinList (PAsData k)) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555539"><span class="hs-identifier hs-var">qks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TermCont @PBool s (Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @PBool s (Term s PBool) -&gt; Term s PBool)
-&gt; TermCont @PBool s (Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-465"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555535"><span class="annot"><span class="annottext">comp :: Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
</span><a href="#local-6989586621679555535"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PAsData k :--&gt; (PAsData k :--&gt; PBool))
-&gt; Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PAsData k :--&gt; (PAsData k :--&gt; PBool))
 -&gt; Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool)))
-&gt; ClosedTerm (PAsData k :--&gt; (PAsData k :--&gt; PBool))
-&gt; Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData k) -&gt; Term s (PAsData k) -&gt; Term s PBool)
-&gt; Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PAsData k) -&gt; Term s (PAsData k) -&gt; Term s PBool)
 -&gt; Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool)))
-&gt; (Term s (PAsData k) -&gt; Term s (PAsData k) -&gt; Term s PBool)
-&gt; Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PAsData k) -&gt; Term s k
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679555527"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679555527"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PAsData k) -&gt; Term s k
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679555526"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679555526"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679555527"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term s k -&gt; Term s k -&gt; Term s PBool
forall (t :: PType) (s :: S).
POrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679555526"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-466"></span><span>                </span><span id="local-6989586621679555525"><span class="annot"><span class="annottext">spks :: Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555525"><span class="hs-identifier hs-var hs-var">spks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData k :--&gt; (PAsData k :--&gt; PBool))
   :--&gt; (PBuiltinList (PAsData k) :--&gt; PBuiltinList (PAsData k)))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
</span><a href="Agora.Utils.html#pmsortBy"><span class="hs-identifier hs-var">pmsortBy</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData k :--&gt; (PAsData k :--&gt; PBool))
   :--&gt; (PBuiltinList (PAsData k) :--&gt; PBuiltinList (PAsData k)))
-&gt; Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
-&gt; Term s (PBuiltinList (PAsData k) :--&gt; PBuiltinList (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
ClosedTerm (PAsData k :--&gt; (PAsData k :--&gt; PBool))
</span><a href="#local-6989586621679555535"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k) :--&gt; PBuiltinList (PAsData k))
-&gt; Term s (PBuiltinList (PAsData k))
-&gt; Term s (PBuiltinList (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555540"><span class="hs-identifier hs-var">pks</span></a></span><span>
</span><span id="line-467"></span><span>                </span><span id="local-6989586621679555524"><span class="annot"><span class="annottext">sqks :: Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555524"><span class="hs-identifier hs-var hs-var">sqks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData k :--&gt; (PAsData k :--&gt; PBool))
   :--&gt; (PBuiltinList (PAsData k) :--&gt; PBuiltinList (PAsData k)))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
</span><a href="Agora.Utils.html#pmsortBy"><span class="hs-identifier hs-var">pmsortBy</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData k :--&gt; (PAsData k :--&gt; PBool))
   :--&gt; (PBuiltinList (PAsData k) :--&gt; PBuiltinList (PAsData k)))
-&gt; Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
-&gt; Term s (PBuiltinList (PAsData k) :--&gt; PBuiltinList (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData k :--&gt; (PAsData k :--&gt; PBool))
ClosedTerm (PAsData k :--&gt; (PAsData k :--&gt; PBool))
</span><a href="#local-6989586621679555535"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k) :--&gt; PBuiltinList (PAsData k))
-&gt; Term s (PBuiltinList (PAsData k))
-&gt; Term s (PBuiltinList (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555539"><span class="hs-identifier hs-var">qks</span></a></span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span>            </span><span class="annot"><span class="annottext">Term s PBool -&gt; TermCont @PBool s (Term s PBool)
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @PBool s (Term s PBool))
-&gt; Term s PBool -&gt; TermCont @PBool s (Term s PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PAsData k)
   :--&gt; (PBuiltinList (PAsData k) :--&gt; PBool))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PIsListLike list a, PEq a) =&gt;
Term s (list a :--&gt; (list a :--&gt; PBool))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plistEquals</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PAsData k)
   :--&gt; (PBuiltinList (PAsData k) :--&gt; PBool))
-&gt; Term s (PBuiltinList (PAsData k))
-&gt; Term s (PBuiltinList (PAsData k) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555525"><span class="hs-identifier hs-var">spks</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k) :--&gt; PBool)
-&gt; Term s (PBuiltinList (PAsData k)) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData k))
</span><a href="#local-6989586621679555524"><span class="hs-identifier hs-var">sqks</span></a></span><span>
</span><span id="line-470"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PFalse</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="hs-comment">-- | / O(nlogn) /. Sort and remove dupicate elements in a list.</span><span>
</span><span id="line-474"></span><span class="annot"><a href="Agora.Utils.html#pnubSortBy"><span class="hs-identifier hs-type">pnubSortBy</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556484"><span class="annot"><a href="#local-6989586621679556484"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span id="local-6989586621679556483"><span class="annot"><a href="#local-6989586621679556483"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556482"><span class="annot"><a href="#local-6989586621679556482"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-476"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556484"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556483"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-477"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556482"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556483"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556483"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556483"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556483"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556484"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556483"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556484"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556483"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span id="pnubSortBy"><span class="annot"><span class="annottext">pnubSortBy :: forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
</span><a href="Agora.Utils.html#pnubSortBy"><span class="hs-identifier hs-var hs-var">pnubSortBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
-&gt; Term
     s
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((a :--&gt; (a :--&gt; PBool))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
 -&gt; Term
      s
      ((a :--&gt; (a :--&gt; PBool))
       :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a))))
-&gt; ClosedTerm
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
-&gt; Term
     s
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-479"></span><span>  </span><span class="annot"><span class="annottext">(Term s (a :--&gt; (a :--&gt; PBool))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool))
 -&gt; Term s (list a)
 -&gt; Term s (list a))
-&gt; Term
     s
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (a :--&gt; (a :--&gt; PBool))
  -&gt; Term s (a :--&gt; (a :--&gt; PBool))
  -&gt; Term s (list a)
  -&gt; Term s (list a))
 -&gt; Term
      s
      ((a :--&gt; (a :--&gt; PBool))
       :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a))))
-&gt; (Term s (a :--&gt; (a :--&gt; PBool))
    -&gt; Term s (a :--&gt; (a :--&gt; PBool))
    -&gt; Term s (list a)
    -&gt; Term s (list a))
-&gt; Term
     s
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555502"><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555502"><span class="hs-identifier hs-var">eq</span></a></span></span><span> </span><span id="local-6989586621679555501"><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555501"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679555500"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555500"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool) -&gt; Term s (list a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555500"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555500"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; Term s (list a))
-&gt; Term s (list a) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-480"></span><span>    </span><span class="annot"><span class="annottext">TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a))
-&gt; TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-481"></span><span>      </span><span id="local-6989586621679555499"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555499"><span class="hs-identifier hs-var">sl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
</span><a href="Agora.Utils.html#pmsortBy"><span class="hs-identifier hs-var">pmsortBy</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555501"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555500"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555498"><span class="annot"><span class="annottext">x :: Term s a
</span><a href="#local-6989586621679555498"><span class="hs-identifier hs-var hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a) -&gt; Term s (list a) -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555499"><span class="hs-identifier hs-var">sl</span></a></span><span>
</span><span id="line-484"></span><span>          </span><span id="local-6989586621679555497"><span class="annot"><span class="annottext">xs :: Term s (list a)
</span><a href="#local-6989586621679555497"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555499"><span class="hs-identifier hs-var">sl</span></a></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>      </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (m :: Type -&gt; Type) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
forall {s :: S}.
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
</span><a href="#local-6989586621679555496"><span class="hs-identifier hs-var">pgo</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (a :--&gt; (list a :--&gt; list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555502"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
-&gt; Term s a -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555498"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555497"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-487"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-488"></span><span>    </span><span id="local-6989586621679555496"><span class="annot"><span class="annottext">pgo :: Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
</span><a href="#local-6989586621679555496"><span class="hs-identifier hs-var hs-var">pgo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
-&gt; Term
     s
     ((((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
       :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (((a :--&gt; b) :--&gt; (a :--&gt; b)) :--&gt; (a :--&gt; b))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfix</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
-&gt; Term
     s
     (((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
-&gt; Term
     s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term
   s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool))
 -&gt; Term s a
 -&gt; Term s (list a)
 -&gt; Term s (list a))
-&gt; Term
     s
     (((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a))))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s a
-&gt; Term s (list a)
-&gt; Term s (list a)
forall {list :: PType -&gt; PType} {a :: PType}
       {list :: PType -&gt; PType} {s :: S}.
(PElemConstraint list a, PElemConstraint list a, PListLike list,
 PListLike list) =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s a
-&gt; Term s (list a)
-&gt; Term s (list a)
</span><a href="#local-6989586621679555481"><span class="hs-identifier hs-var">pgo'</span></a></span><span>
</span><span id="line-489"></span><span>    </span><span id="local-6989586621679555481"><span class="annot"><span class="annottext">pgo' :: Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s a
-&gt; Term s (list a)
-&gt; Term s (list a)
</span><a href="#local-6989586621679555481"><span class="hs-identifier hs-var hs-var">pgo'</span></a></span></span><span> </span><span id="local-6989586621679555462"><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
</span><a href="#local-6989586621679555462"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679555461"><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555461"><span class="hs-identifier hs-var">eq</span></a></span></span><span> </span><span id="local-6989586621679555460"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555460"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679555459"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555459"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-490"></span><span>      </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool) -&gt; Term s (list a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555459"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">psingleton</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; list a) -&gt; Term s a -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555460"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; Term s (list a))
-&gt; Term s (list a) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-491"></span><span>        </span><span class="annot"><span class="annottext">TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a))
-&gt; TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-492"></span><span>          </span><span id="local-6989586621679555457"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555457"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; TermCont @(list a) s (Term s a)
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; TermCont @(list a) s (Term s a))
-&gt; Term s a -&gt; TermCont @(list a) s (Term s a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a) -&gt; Term s (list a) -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555459"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-493"></span><span>          </span><span id="local-6989586621679555456"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555456"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555459"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span>          </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (m :: Type -&gt; Type) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-496"></span><span>            </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span>
</span><span id="line-497"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555461"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s a -&gt; Term s (a :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555457"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; PBool) -&gt; Term s a -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555460"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
</span><a href="#local-6989586621679555462"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (a :--&gt; (list a :--&gt; list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555461"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
-&gt; Term s a -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555460"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555456"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcons</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
-&gt; Term s a -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555460"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
</span><a href="#local-6989586621679555462"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (a :--&gt; (list a :--&gt; list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555461"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
-&gt; Term s a -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555457"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555456"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="hs-comment">-- | Special version of 'pnubSortBy', which requires elements have 'POrd'.</span><span>
</span><span id="line-502"></span><span class="annot"><a href="Agora.Utils.html#pnubSort"><span class="hs-identifier hs-type">pnubSort</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-503"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556467"><span class="annot"><a href="#local-6989586621679556467"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span id="local-6989586621679556466"><span class="annot"><a href="#local-6989586621679556466"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556465"><span class="annot"><a href="#local-6989586621679556465"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-504"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556467"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556466"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">POrd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556466"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-505"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556465"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556467"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556466"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556467"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556466"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-506"></span><span id="pnubSort"><span class="annot"><span class="annottext">pnubSort :: forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PIsListLike list a, POrd a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="Agora.Utils.html#pnubSort"><span class="hs-identifier hs-var hs-var">pnubSort</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (list a :--&gt; list a) -&gt; Term s (list a :--&gt; list a)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (list a :--&gt; list a) -&gt; Term s (list a :--&gt; list a))
-&gt; ClosedTerm (list a :--&gt; list a) -&gt; Term s (list a :--&gt; list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
</span><a href="Agora.Utils.html#pnubSortBy"><span class="hs-identifier hs-var">pnubSortBy</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555448"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555447"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-507"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-508"></span><span>    </span><span id="local-6989586621679555448"><span class="annot"><span class="annottext">eq :: Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555448"><span class="hs-identifier hs-var hs-var">eq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; (forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; Term s a -&gt; Term s PBool)
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s a -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">(#==)</span></a></span><span>
</span><span id="line-509"></span><span>    </span><span id="local-6989586621679555447"><span class="annot"><span class="annottext">comp :: Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555447"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; (forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; Term s a -&gt; Term s PBool)
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s a -&gt; Term s PBool
forall (t :: PType) (s :: S).
POrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">(#&lt;)</span></a></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="hs-comment">-- | / O(nlogn) /. Check if a list contains no duplicates.</span><span>
</span><span id="line-512"></span><span class="annot"><a href="Agora.Utils.html#pisUniqBy"><span class="hs-identifier hs-type">pisUniqBy</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556456"><span class="annot"><a href="#local-6989586621679556456"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span id="local-6989586621679556455"><span class="annot"><a href="#local-6989586621679556455"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556454"><span class="annot"><a href="#local-6989586621679556454"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-514"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556456"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556455"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-515"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556454"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556455"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556455"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556455"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556455"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556456"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556455"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span id="pisUniqBy"><span class="annot"><span class="annottext">pisUniqBy :: forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
</span><a href="Agora.Utils.html#pisUniqBy"><span class="hs-identifier hs-var hs-var">pisUniqBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
-&gt; Term
     s
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((a :--&gt; (a :--&gt; PBool))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
 -&gt; Term
      s
      ((a :--&gt; (a :--&gt; PBool))
       :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool))))
-&gt; ClosedTerm
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
-&gt; Term
     s
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-517"></span><span>  </span><span class="annot"><span class="annottext">(Term s (a :--&gt; (a :--&gt; PBool))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool))
 -&gt; Term s (list a)
 -&gt; Term s PBool)
-&gt; Term
     s
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (a :--&gt; (a :--&gt; PBool))
  -&gt; Term s (a :--&gt; (a :--&gt; PBool))
  -&gt; Term s (list a)
  -&gt; Term s PBool)
 -&gt; Term
      s
      ((a :--&gt; (a :--&gt; PBool))
       :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool))))
-&gt; (Term s (a :--&gt; (a :--&gt; PBool))
    -&gt; Term s (a :--&gt; (a :--&gt; PBool))
    -&gt; Term s (list a)
    -&gt; Term s PBool)
-&gt; Term
     s
     ((a :--&gt; (a :--&gt; PBool))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555419"><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555419"><span class="hs-identifier hs-var">eq</span></a></span></span><span> </span><span id="local-6989586621679555418"><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555418"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679555417"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555417"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-518"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555416"><span class="annot"><span class="annottext">nubbed :: Term s (list a)
</span><a href="#local-6989586621679555416"><span class="hs-identifier hs-var hs-var">nubbed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
</span><a href="Agora.Utils.html#pnubSortBy"><span class="hs-identifier hs-var">pnubSortBy</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555419"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; list a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555418"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555417"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-519"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PInteger @S)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PInteger @S)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plength</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PInteger @S)
-&gt; Term s (list a) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555417"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PInteger @S)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PInteger @S)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plength</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PInteger @S)
-&gt; Term s (list a) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555416"><span class="hs-identifier hs-var">nubbed</span></a></span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-comment">-- | A special case of 'pisUniqBy' which requires elements have 'POrd' instance.</span><span>
</span><span id="line-522"></span><span class="annot"><a href="Agora.Utils.html#pisUniq"><span class="hs-identifier hs-type">pisUniq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556448"><span class="annot"><a href="#local-6989586621679556448"><span class="hs-identifier hs-type">list</span></a></span></span><span> </span><span id="local-6989586621679556449"><span class="annot"><a href="#local-6989586621679556449"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556447"><span class="annot"><a href="#local-6989586621679556447"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">POrd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556449"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556448"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556449"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556447"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556448"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556449"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span id="pisUniq"><span class="annot"><span class="annottext">pisUniq :: forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(POrd a, PIsListLike list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="Agora.Utils.html#pisUniq"><span class="hs-identifier hs-var hs-var">pisUniq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (list a :--&gt; PBool) -&gt; Term s (list a :--&gt; PBool)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (list a :--&gt; PBool) -&gt; Term s (list a :--&gt; PBool))
-&gt; ClosedTerm (list a :--&gt; PBool) -&gt; Term s (list a :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
</span><a href="Agora.Utils.html#pisUniqBy"><span class="hs-identifier hs-var">pisUniqBy</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((a :--&gt; (a :--&gt; PBool))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555409"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; PBool))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (list a :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555408"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-525"></span><span>    </span><span id="local-6989586621679555409"><span class="annot"><span class="annottext">eq :: Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555409"><span class="hs-identifier hs-var hs-var">eq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; (forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; Term s a -&gt; Term s PBool)
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s a -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">(#==)</span></a></span><span>
</span><span id="line-526"></span><span>    </span><span id="local-6989586621679555408"><span class="annot"><span class="annottext">comp :: Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555408"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; (forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; Term s a -&gt; Term s PBool)
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s a -&gt; Term s PBool
forall (t :: PType) (s :: S).
POrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">(#&lt;)</span></a></span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-comment">-- | Yield True if a given PMaybeData is of form @'PDJust' _@.</span><span>
</span><span id="line-529"></span><span id="local-6989586621679556437"><span id="local-6989586621679556438"><span class="annot"><a href="Agora.Utils.html#pisDJust"><span class="hs-identifier hs-type">pisDJust</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556438"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybeData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556437"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-530"></span><span id="pisDJust"><span class="annot"><span class="annottext">pisDJust :: forall (s :: S) (a :: PType). Term s (PMaybeData a :--&gt; PBool)
</span><a href="Agora.Utils.html#pisDJust"><span class="hs-identifier hs-var hs-var">pisDJust</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PMaybeData a :--&gt; PBool)
-&gt; Term s (PMaybeData a :--&gt; PBool)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PMaybeData a :--&gt; PBool)
 -&gt; Term s (PMaybeData a :--&gt; PBool))
-&gt; ClosedTerm (PMaybeData a :--&gt; PBool)
-&gt; Term s (PMaybeData a :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-531"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PMaybeData a) -&gt; Term s PBool)
-&gt; Term s (PMaybeData a :--&gt; PBool)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PMaybeData a) -&gt; Term s PBool)
 -&gt; Term s (PMaybeData a :--&gt; PBool))
-&gt; (Term s (PMaybeData a) -&gt; Term s PBool)
-&gt; Term s (PMaybeData a :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555384"><span class="annot"><span class="annottext">Term s (PMaybeData a)
</span><a href="#local-6989586621679555384"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-532"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybeData a)
-&gt; (PMaybeData a s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span>
</span><span id="line-533"></span><span>      </span><span class="annot"><span class="annottext">Term s (PMaybeData a)
</span><a href="#local-6989586621679555384"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-534"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-535"></span><span>          </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDataRecord ((':) @PLabeledType (&quot;_0&quot; ':= a) ('[] @PLabeledType)))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PLifted PBool -&gt; Term s PBool
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
PLifted PBool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-536"></span><span>          </span><span class="annot"><span class="annottext">PMaybeData a s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PLifted PBool -&gt; Term s PBool
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
PLifted PBool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-537"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span class="hs-comment">-- | Determines if a given UTXO is spent.</span><span>
</span><span id="line-540"></span><span id="local-6989586621679556432"><span class="annot"><a href="Agora.Utils.html#pisUTXOSpent"><span class="hs-identifier hs-type">pisUTXOSpent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556432"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxOutRef</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxInInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-541"></span><span id="pisUTXOSpent"><span class="annot"><span class="annottext">pisUTXOSpent :: forall (s :: S).
Term
  s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool))
</span><a href="Agora.Utils.html#pisUTXOSpent"><span class="hs-identifier hs-var hs-var">pisUTXOSpent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool)))
-&gt; Term
     s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool)))
 -&gt; Term
      s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool)))
-&gt; (forall (s :: S).
    Term
      s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool)))
-&gt; Term
     s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-542"></span><span>  </span><span class="annot"><span class="annottext">(Term s PTxOutRef
 -&gt; Term s (PBuiltinList (PAsData PTxInInfo)) -&gt; Term s PBool)
-&gt; Term
     s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PTxOutRef
  -&gt; Term s (PBuiltinList (PAsData PTxInInfo)) -&gt; Term s PBool)
 -&gt; Term
      s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool)))
-&gt; (Term s PTxOutRef
    -&gt; Term s (PBuiltinList (PAsData PTxInInfo)) -&gt; Term s PBool)
-&gt; Term
     s (PTxOutRef :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555377"><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679555377"><span class="hs-identifier hs-var">oref</span></a></span></span><span> </span><span id="local-6989586621679555376"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo))
</span><a href="#local-6989586621679555376"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">P.do</span><span>
</span><span id="line-543"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybe PTxInInfo :--&gt; PBool)
forall (a :: PType) (s :: S). Term s (PMaybe a :--&gt; PBool)
</span><a href="Agora.Utils.html#pisJust"><span class="hs-identifier hs-var">pisJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe PTxInInfo :--&gt; PBool)
-&gt; Term s (PMaybe PTxInInfo) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PTxOutRef
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
forall (s :: S).
Term
  s
  (PTxOutRef
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
</span><a href="Agora.Utils.html#pfindTxInByTxOutRef"><span class="hs-identifier hs-var">pfindTxInByTxOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PTxOutRef
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
-&gt; Term s PTxOutRef
-&gt; Term s (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679555377"><span class="hs-identifier hs-var">oref</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)
-&gt; Term s (PBuiltinList (PAsData PTxInInfo))
-&gt; Term s (PMaybe PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo))
</span><a href="#local-6989586621679555376"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="hs-comment">-- | / O(n) /. Merge two lists which are assumed to be ordered, given a custom comparator.</span><span>
</span><span id="line-546"></span><span id="local-6989586621679556427"><span id="local-6989586621679556428"><span id="local-6989586621679556429"><span class="annot"><a href="Agora.Utils.html#pmergeBy"><span class="hs-identifier hs-type">pmergeBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556429"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556428"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556427"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556428"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556428"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556429"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556428"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556429"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556428"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556429"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556428"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-547"></span><span id="pmergeBy"><span class="annot"><span class="annottext">pmergeBy :: forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
</span><a href="Agora.Utils.html#pmergeBy"><span class="hs-identifier hs-var hs-var">pmergeBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
 -&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a))))
-&gt; ClosedTerm
     ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a))))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (((a :--&gt; b) :--&gt; (a :--&gt; b)) :--&gt; (a :--&gt; b))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfix</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a))))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a))))
-&gt; Term
     s
     (((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a))))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool))
 -&gt; Term s (l a)
 -&gt; Term s (l a)
 -&gt; Term s (l a))
-&gt; Term
     s
     (((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a))))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (l a)
-&gt; Term s (l a)
-&gt; Term s (l a)
forall {list :: PType -&gt; PType} {a :: PType} {s :: S}.
(PElemConstraint list a, PListLike list) =&gt;
Term
  s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (list a)
-&gt; Term s (list a)
-&gt; Term s (list a)
</span><a href="#local-6989586621679555360"><span class="hs-identifier hs-var">pmergeBy'</span></a></span><span>
</span><span id="line-548"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-549"></span><span>    </span><span id="local-6989586621679555360"><span class="annot"><span class="annottext">pmergeBy' :: Term
  s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (list a)
-&gt; Term s (list a)
-&gt; Term s (list a)
</span><a href="#local-6989586621679555360"><span class="hs-identifier hs-var hs-var">pmergeBy'</span></a></span></span><span> </span><span id="local-6989586621679555336"><span class="annot"><span class="annottext">Term
  s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; (list a :--&gt; list a)))
</span><a href="#local-6989586621679555336"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679555335"><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555335"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679555334"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555334"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679555333"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555333"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-550"></span><span>      </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool) -&gt; Term s (list a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555334"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555333"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; Term s (list a))
-&gt; Term s (list a) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-551"></span><span>        </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool) -&gt; Term s (list a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555333"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555334"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; Term s (list a))
-&gt; Term s (list a) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-552"></span><span>          </span><span class="annot"><span class="annottext">TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a))
-&gt; TermCont @(list a) s (Term s (list a)) -&gt; Term s (list a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-553"></span><span>            </span><span id="local-6989586621679555332"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555332"><span class="hs-identifier hs-var">ah</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; TermCont @(list a) s (Term s a)
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; TermCont @(list a) s (Term s a))
-&gt; Term s a -&gt; TermCont @(list a) s (Term s a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a) -&gt; Term s (list a) -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555334"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-554"></span><span>            </span><span id="local-6989586621679555331"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555331"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555334"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-555"></span><span>            </span><span id="local-6989586621679555330"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555330"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; TermCont @(list a) s (Term s a)
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; TermCont @(list a) s (Term s a))
-&gt; Term s a -&gt; TermCont @(list a) s (Term s a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a) -&gt; Term s (list a) -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555333"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-556"></span><span>            </span><span id="local-6989586621679555329"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555329"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555333"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span>            </span><span class="annot"><span class="annottext">Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a) -&gt; TermCont @(list a) s (Term s (list a)))
-&gt; Term s (list a) -&gt; TermCont @(list a) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-559"></span><span>              </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span>
</span><span id="line-560"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555335"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s a -&gt; Term s (a :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555332"><span class="hs-identifier hs-var">ah</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; PBool) -&gt; Term s a -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555330"><span class="hs-identifier hs-var">bh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcons</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
-&gt; Term s a -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555332"><span class="hs-identifier hs-var">ah</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; (list a :--&gt; list a)))
</span><a href="#local-6989586621679555336"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (list a :--&gt; (list a :--&gt; list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555335"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; (list a :--&gt; list a))
-&gt; Term s (list a) -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555331"><span class="hs-identifier hs-var">at</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555333"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcons</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
-&gt; Term s a -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555330"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; (list a :--&gt; list a)))
</span><a href="#local-6989586621679555336"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (list a :--&gt; (list a :--&gt; list a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (list a :--&gt; (list a :--&gt; list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555335"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; (list a :--&gt; list a))
-&gt; Term s (list a) -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555334"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555329"><span class="hs-identifier hs-var">bt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>
</span><span id="line-564"></span><span class="hs-comment">{- | / O(nlogn) /. Merge sort, bottom-up version, given a custom comparator.

   Elements are arranged from lowest to highest,
   keeping duplicates in the order they appeared in the input.
-}</span><span>
</span><span id="line-569"></span><span id="local-6989586621679556488"><span id="local-6989586621679556489"><span id="local-6989586621679556490"><span class="annot"><a href="Agora.Utils.html#pmsortBy"><span class="hs-identifier hs-type">pmsortBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556490"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556489"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556488"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556490"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556490"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556489"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-570"></span><span id="pmsortBy"><span class="annot"><span class="annottext">pmsortBy :: forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
</span><a href="Agora.Utils.html#pmsortBy"><span class="hs-identifier hs-var hs-var">pmsortBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
 -&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a)))
-&gt; ClosedTerm ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a)))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (((a :--&gt; b) :--&gt; (a :--&gt; b)) :--&gt; (a :--&gt; b))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfix</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
    :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a)))
   :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a)))
-&gt; Term
     s
     (((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a)))
-&gt; Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (l a) -&gt; Term s (l a))
-&gt; Term
     s
     (((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
      :--&gt; ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (l a) -&gt; Term s (l a)
forall {l :: PType -&gt; PType} {a :: PType} {s :: S}.
(PElemConstraint l a, PListLike l) =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (l a) -&gt; Term s (l a)
</span><a href="#local-6989586621679555315"><span class="hs-identifier hs-var">pmsortBy'</span></a></span><span>
</span><span id="line-571"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-572"></span><span>    </span><span id="local-6989586621679555315"><span class="annot"><span class="annottext">pmsortBy' :: Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (l a) -&gt; Term s (l a)
</span><a href="#local-6989586621679555315"><span class="hs-identifier hs-var hs-var">pmsortBy'</span></a></span></span><span> </span><span id="local-6989586621679555298"><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
</span><a href="#local-6989586621679555298"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679555297"><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555297"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span id="local-6989586621679555296"><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555296"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s PBool -&gt; Term s (l a) -&gt; Term s (l a) -&gt; Term s (l a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (l a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; PBool) -&gt; Term s (l a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555296"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (l a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnil</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (l a) -&gt; Term s (l a)) -&gt; Term s (l a) -&gt; Term s (l a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-573"></span><span>      </span><span class="annot"><span class="annottext">Term s PBool -&gt; Term s (l a) -&gt; Term s (l a) -&gt; Term s (l a)
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (l a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; PBool) -&gt; Term s (l a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; l a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; l a) -&gt; Term s (l a) -&gt; Term s (l a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555296"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555296"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (l a) -&gt; Term s (l a)) -&gt; Term s (l a) -&gt; Term s (l a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-574"></span><span>        </span><span class="annot"><span class="annottext">Term s (PPair (l a) (l a))
-&gt; (PPair (l a) (l a) s -&gt; Term s (l a)) -&gt; Term s (l a)
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (l a :--&gt; PPair (l a) (l a))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s (l a :--&gt; PPair (l a) (l a))
</span><a href="Agora.Utils.html#phalve"><span class="hs-identifier hs-var">phalve</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; PPair (l a) (l a))
-&gt; Term s (l a) -&gt; Term s (PPair (l a) (l a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555296"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PPair (l a) (l a) s -&gt; Term s (l a)) -&gt; Term s (l a))
-&gt; (PPair (l a) (l a) s -&gt; Term s (l a)) -&gt; Term s (l a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PPair</span></a></span><span> </span><span id="local-6989586621679555294"><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555294"><span class="hs-identifier hs-var">fh</span></a></span></span><span> </span><span id="local-6989586621679555293"><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555293"><span class="hs-identifier hs-var">sh</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-575"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555292"><span class="annot"><span class="annottext">sfh :: Term s (l a)
</span><a href="#local-6989586621679555292"><span class="hs-identifier hs-var hs-var">sfh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
</span><a href="#local-6989586621679555298"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (l a :--&gt; l a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555297"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; l a) -&gt; Term s (l a) -&gt; Term s (l a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555294"><span class="hs-identifier hs-var">fh</span></a></span><span>
</span><span id="line-576"></span><span>              </span><span id="local-6989586621679555291"><span class="annot"><span class="annottext">ssh :: Term s (l a)
</span><a href="#local-6989586621679555291"><span class="hs-identifier hs-var hs-var">ssh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
</span><a href="#local-6989586621679555298"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (l a :--&gt; l a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555297"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; l a) -&gt; Term s (l a) -&gt; Term s (l a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555293"><span class="hs-identifier hs-var">sh</span></a></span><span>
</span><span id="line-577"></span><span>           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
</span><a href="Agora.Utils.html#pmergeBy"><span class="hs-identifier hs-var">pmergeBy</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; (l a :--&gt; l a)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
-&gt; Term s (l a :--&gt; (l a :--&gt; l a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555297"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; (l a :--&gt; l a))
-&gt; Term s (l a) -&gt; Term s (l a :--&gt; l a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555292"><span class="hs-identifier hs-var">sfh</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; l a) -&gt; Term s (l a) -&gt; Term s (l a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555291"><span class="hs-identifier hs-var">ssh</span></a></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span class="hs-comment">-- | A special case of 'pmsortBy' which requires elements have 'POrd' instance.</span><span>
</span><span id="line-580"></span><span id="local-6989586621679556404"><span id="local-6989586621679556405"><span id="local-6989586621679556406"><span class="annot"><a href="Agora.Utils.html#pmsort"><span class="hs-identifier hs-type">pmsort</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">POrd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556406"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556405"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556406"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556404"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556405"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556406"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556405"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556406"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-581"></span><span id="pmsort"><span class="annot"><span class="annottext">pmsort :: forall (a :: PType) (l :: PType -&gt; PType) (s :: S).
(POrd a, PIsListLike l a) =&gt;
Term s (l a :--&gt; l a)
</span><a href="Agora.Utils.html#pmsort"><span class="hs-identifier hs-var hs-var">pmsort</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (l a :--&gt; l a) -&gt; Term s (l a :--&gt; l a)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (l a :--&gt; l a) -&gt; Term s (l a :--&gt; l a))
-&gt; ClosedTerm (l a :--&gt; l a) -&gt; Term s (l a :--&gt; l a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
</span><a href="Agora.Utils.html#pmsortBy"><span class="hs-identifier hs-var">pmsortBy</span></a></span><span> </span><span class="annot"><span class="annottext">Term s ((a :--&gt; (a :--&gt; PBool)) :--&gt; (l a :--&gt; l a))
-&gt; Term s (a :--&gt; (a :--&gt; PBool)) -&gt; Term s (l a :--&gt; l a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (a :--&gt; PBool))
forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555285"><span class="hs-identifier hs-var">comp</span></a></span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-583"></span><span>    </span><span id="local-6989586621679555285"><span class="annot"><span class="annottext">comp :: Term s (a :--&gt; (a :--&gt; PBool))
</span><a href="#local-6989586621679555285"><span class="hs-identifier hs-var hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
 -&gt; Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; (forall {s :: S}. Term s (a :--&gt; (a :--&gt; PBool)))
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; Term s a -&gt; Term s PBool)
-&gt; Term s (a :--&gt; (a :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s a -&gt; Term s PBool
forall (t :: PType) (s :: S).
POrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">(#&lt;)</span></a></span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span class="hs-comment">-- | Split a list in half.</span><span>
</span><span id="line-586"></span><span id="local-6989586621679556407"><span id="local-6989586621679556408"><span id="local-6989586621679556409"><span class="annot"><a href="Agora.Utils.html#phalve"><span class="hs-identifier hs-type">phalve</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsListLike</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556409"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556408"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556407"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556409"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556408"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556409"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556408"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679556409"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556408"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-587"></span><span id="phalve"><span class="annot"><span class="annottext">phalve :: forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s (l a :--&gt; PPair (l a) (l a))
</span><a href="Agora.Utils.html#phalve"><span class="hs-identifier hs-var hs-var">phalve</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (l a :--&gt; PPair (l a) (l a))
-&gt; Term s (l a :--&gt; PPair (l a) (l a))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (l a :--&gt; PPair (l a) (l a))
 -&gt; Term s (l a :--&gt; PPair (l a) (l a)))
-&gt; ClosedTerm (l a :--&gt; PPair (l a) (l a))
-&gt; Term s (l a :--&gt; PPair (l a) (l a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (l a) -&gt; Term s (PPair (l a) (l a)))
-&gt; Term s (l a :--&gt; PPair (l a) (l a))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (l a) -&gt; Term s (PPair (l a) (l a)))
 -&gt; Term s (l a :--&gt; PPair (l a) (l a)))
-&gt; (Term s (l a) -&gt; Term s (PPair (l a) (l a)))
-&gt; Term s (l a :--&gt; PPair (l a) (l a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555270"><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555270"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
forall {s :: S}. Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
</span><a href="#local-6989586621679555269"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
-&gt; Term s (l a) -&gt; Term s (l a :--&gt; PPair (l a) (l a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555270"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; PPair (l a) (l a))
-&gt; Term s (l a) -&gt; Term s (PPair (l a) (l a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a)
</span><a href="#local-6989586621679555270"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-588"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-589"></span><span>    </span><span id="local-6989586621679555269"><span class="annot"><span class="annottext">go :: Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
</span><a href="#local-6989586621679555269"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall {s :: S}. Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
-&gt; Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall {s :: S}. Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
 -&gt; Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
-&gt; (forall {s :: S}.
    Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
-&gt; Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (((l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
    :--&gt; (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
   :--&gt; (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (((a :--&gt; b) :--&gt; (a :--&gt; b)) :--&gt; (a :--&gt; b))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfix</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (((l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
    :--&gt; (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
   :--&gt; (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
-&gt; Term
     s
     ((l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
      :--&gt; (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
-&gt; Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
 -&gt; Term s (l a) -&gt; Term s (l a) -&gt; Term s (PPair (l a) (l a)))
-&gt; Term
     s
     ((l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
      :--&gt; (l a :--&gt; (l a :--&gt; PPair (l a) (l a))))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (l a :--&gt; (l a :--&gt; PPair (l a) (l a)))
-&gt; Term s (l a) -&gt; Term s (l a) -&gt; Term s (PPair (l a) (l a))
forall {list :: PType -&gt; PType} {a :: PType}
       {list :: PType -&gt; PType} {a :: PType} {list :: PType -&gt; PType}
       {s :: S}.
(PElemConstraint list a, PElemConstraint list a,
 PElemConstraint list a, PListLike list, PListLike list,
 PListLike list) =&gt;
Term s (list a :--&gt; (list a :--&gt; PPair (list a) (list a)))
-&gt; Term s (list a)
-&gt; Term s (list a)
-&gt; Term s (PPair (list a) (list a))
</span><a href="#local-6989586621679555254"><span class="hs-identifier hs-var">go'</span></a></span><span>
</span><span id="line-590"></span><span>    </span><span id="local-6989586621679555254"><span class="annot"><span class="annottext">go' :: Term s (list a :--&gt; (list a :--&gt; PPair (list a) (list a)))
-&gt; Term s (list a)
-&gt; Term s (list a)
-&gt; Term s (PPair (list a) (list a))
</span><a href="#local-6989586621679555254"><span class="hs-identifier hs-var hs-var">go'</span></a></span></span><span> </span><span id="local-6989586621679555218"><span class="annot"><span class="annottext">Term s (list a :--&gt; (list a :--&gt; PPair (list a) (list a)))
</span><a href="#local-6989586621679555218"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679555217"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555217"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679555216"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555216"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-591"></span><span>      </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (PPair (list a) (list a))
-&gt; Term s (PPair (list a) (list a))
-&gt; Term s (PPair (list a) (list a))
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span>
</span><span id="line-592"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool) -&gt; Term s (list a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555216"><span class="hs-identifier hs-var">ys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a))
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a)))
-&gt; PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a) -&gt; Term s (list a) -&gt; PPair (list a) (list a) s
forall (a :: PType) (b :: PType) (s :: S).
Term s a -&gt; Term s b -&gt; PPair a b s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PPair</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnil</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555217"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TermCont
  @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
-&gt; Term s (PPair (list a) (list a))
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont
   @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
 -&gt; Term s (PPair (list a) (list a)))
-&gt; TermCont
     @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
-&gt; Term s (PPair (list a) (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-595"></span><span>            </span><span id="local-6989586621679555215"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555215"><span class="hs-identifier hs-var">yt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
-&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a)
 -&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a)))
-&gt; Term s (list a)
-&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555216"><span class="hs-identifier hs-var">ys</span></a></span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span>            </span><span id="local-6989586621679555214"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555214"><span class="hs-identifier hs-var">xh</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; TermCont @(PPair (list a) (list a)) s (Term s a)
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s a -&gt; TermCont @(PPair (list a) (list a)) s (Term s a))
-&gt; Term s a -&gt; TermCont @(PPair (list a) (list a)) s (Term s a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; a) -&gt; Term s (list a) -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555217"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-598"></span><span>            </span><span id="local-6989586621679555213"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555213"><span class="hs-identifier hs-var">xt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
-&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a)
 -&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a)))
-&gt; Term s (list a)
-&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555217"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-599"></span><span>
</span><span id="line-600"></span><span>            </span><span class="annot"><span class="annottext">Term s (PPair (list a) (list a))
-&gt; TermCont
     @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PPair (list a) (list a))
 -&gt; TermCont
      @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a))))
-&gt; Term s (PPair (list a) (list a))
-&gt; TermCont
     @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-601"></span><span>              </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (PPair (list a) (list a))
-&gt; Term s (PPair (list a) (list a))
-&gt; Term s (PPair (list a) (list a))
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pif</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnull</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PBool) -&gt; Term s (list a) -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555215"><span class="hs-identifier hs-var">yt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a))
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a)))
-&gt; PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a) -&gt; Term s (list a) -&gt; PPair (list a) (list a) s
forall (a :: PType) (b :: PType) (s :: S).
Term s a -&gt; Term s b -&gt; PPair a b s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">psingleton</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; list a) -&gt; Term s a -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555214"><span class="hs-identifier hs-var">xh</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555213"><span class="hs-identifier hs-var">xt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term s (PPair (list a) (list a))
 -&gt; Term s (PPair (list a) (list a)))
-&gt; Term s (PPair (list a) (list a))
-&gt; Term s (PPair (list a) (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-602"></span><span>                </span><span class="annot"><span class="annottext">TermCont
  @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
-&gt; Term s (PPair (list a) (list a))
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont
   @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
 -&gt; Term s (PPair (list a) (list a)))
-&gt; TermCont
     @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
-&gt; Term s (PPair (list a) (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-603"></span><span>                  </span><span id="local-6989586621679555212"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555212"><span class="hs-identifier hs-var">yt'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
-&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (list a)
 -&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a)))
-&gt; Term s (list a)
-&gt; TermCont @(PPair (list a) (list a)) s (Term s (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555215"><span class="hs-identifier hs-var">yt</span></a></span><span>
</span><span id="line-604"></span><span>                  </span><span class="annot"><span class="annottext">Term s (PPair (list a) (list a))
-&gt; TermCont
     @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PPair (list a) (list a))
 -&gt; TermCont
      @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a))))
-&gt; Term s (PPair (list a) (list a))
-&gt; TermCont
     @(PPair (list a) (list a)) s (Term s (PPair (list a) (list a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-605"></span><span>                    </span><span class="annot"><span class="annottext">Term s (PPair (list a) (list a))
-&gt; (PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a)))
-&gt; Term s (PPair (list a) (list a))
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (list a :--&gt; (list a :--&gt; PPair (list a) (list a)))
</span><a href="#local-6989586621679555218"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; (list a :--&gt; PPair (list a) (list a)))
-&gt; Term s (list a) -&gt; Term s (list a :--&gt; PPair (list a) (list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555213"><span class="hs-identifier hs-var">xt</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; PPair (list a) (list a))
-&gt; Term s (list a) -&gt; Term s (PPair (list a) (list a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555212"><span class="hs-identifier hs-var">yt'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a)))
 -&gt; Term s (PPair (list a) (list a)))
-&gt; (PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a)))
-&gt; Term s (PPair (list a) (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PPair</span></a></span><span> </span><span id="local-6989586621679555211"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555211"><span class="hs-identifier hs-var">first</span></a></span></span><span> </span><span id="local-6989586621679555210"><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555210"><span class="hs-identifier hs-var">last</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-606"></span><span>                      </span><span class="annot"><span class="annottext">PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a))
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a)))
-&gt; PPair (list a) (list a) s -&gt; Term s (PPair (list a) (list a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a) -&gt; Term s (list a) -&gt; PPair (list a) (list a) s
forall (a :: PType) (b :: PType) (s :: S).
Term s a -&gt; Term s b -&gt; PPair a b s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcons</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (list a :--&gt; list a))
-&gt; Term s a -&gt; Term s (list a :--&gt; list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679555214"><span class="hs-identifier hs-var">xh</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a :--&gt; list a) -&gt; Term s (list a) -&gt; Term s (list a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555211"><span class="hs-identifier hs-var">first</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (list a)
</span><a href="#local-6989586621679555210"><span class="hs-identifier hs-var">last</span></a></span><span>
</span><span id="line-607"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-610"></span><span class="hs-comment">{- Functions which should (probably) not be upstreamed
   All of these functions are quite inefficient.
-}</span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span class="hs-comment">-- | Create a value with a single asset class.</span><span>
</span><span id="line-615"></span><span class="annot"><a href="Agora.Utils.html#psingletonValue"><span class="hs-identifier hs-type">psingletonValue</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556381"><span class="annot"><a href="#local-6989586621679556381"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556380"><span class="annot"><a href="#local-6989586621679556380"><span class="hs-identifier hs-type">amounts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556382"><span class="annot"><a href="#local-6989586621679556382"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-617"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556382"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PCurrencySymbol</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTokenName</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PInteger</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556381"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556380"><span class="hs-identifier hs-type">amounts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span id="psingletonValue"><span class="annot"><span class="annottext">psingletonValue :: forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s
  (PCurrencySymbol
   :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts)))
</span><a href="Agora.Utils.html#psingletonValue"><span class="hs-identifier hs-var hs-var">psingletonValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  (PCurrencySymbol
   :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts)))
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PCurrencySymbol
    :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts)))
 -&gt; Term
      s
      (PCurrencySymbol
       :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts))))
-&gt; ClosedTerm
     (PCurrencySymbol
      :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts)))
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-619"></span><span>  </span><span class="annot"><span class="annottext">(Term s PCurrencySymbol
 -&gt; Term s PTokenName
 -&gt; Term s (PInteger @S)
 -&gt; Term s (PValue keys amounts))
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PCurrencySymbol
  -&gt; Term s PTokenName
  -&gt; Term s (PInteger @S)
  -&gt; Term s (PValue keys amounts))
 -&gt; Term
      s
      (PCurrencySymbol
       :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts))))
-&gt; (Term s PCurrencySymbol
    -&gt; Term s PTokenName
    -&gt; Term s (PInteger @S)
    -&gt; Term s (PValue keys amounts))
-&gt; Term
     s
     (PCurrencySymbol
      :--&gt; (PTokenName :--&gt; (PInteger @S :--&gt; PValue keys amounts)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555179"><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555179"><span class="hs-identifier hs-var">sym</span></a></span></span><span> </span><span id="local-6989586621679555178"><span class="annot"><span class="annottext">Term s PTokenName
</span><a href="#local-6989586621679555178"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span id="local-6989586621679555177"><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><a href="#local-6989586621679555177"><span class="hs-identifier hs-var">int</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-620"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679555176"><span class="annot"><span class="annottext">innerTup :: Term s (PMap keys PTokenName (PInteger @S))
</span><a href="#local-6989586621679555176"><span class="hs-identifier hs-var hs-var">innerTup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PMap keys PTokenName (PInteger @S) s
-&gt; Term s (PMap keys PTokenName (PInteger @S))
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PMap keys PTokenName (PInteger @S) s
 -&gt; Term s (PMap keys PTokenName (PInteger @S)))
-&gt; PMap keys PTokenName (PInteger @S) s
-&gt; Term s (PMap keys PTokenName (PInteger @S))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinMap PTokenName (PInteger @S))
-&gt; PMap keys PTokenName (PInteger @S) s
forall (keysort :: KeyGuarantees) (k :: PType) (v :: PType)
       (s :: S).
Term s (PBuiltinMap k v) -&gt; PMap keysort k v s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PMap</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinMap PTokenName (PInteger @S))
 -&gt; PMap keys PTokenName (PInteger @S) s)
-&gt; Term s (PBuiltinMap PTokenName (PInteger @S))
-&gt; PMap keys PTokenName (PInteger @S) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))
   :--&gt; PBuiltinMap PTokenName (PInteger @S))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">psingleton</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))
   :--&gt; PBuiltinMap PTokenName (PInteger @S))
-&gt; Term
     s (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S)))
-&gt; Term s (PBuiltinMap PTokenName (PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData PTokenName
   :--&gt; (PAsData (PInteger @S)
         :--&gt; PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))))
forall (s :: S) (a :: PType) (b :: PType).
Term
  s
  (PAsData a
   :--&gt; (PAsData b :--&gt; PBuiltinPair (PAsData a) (PAsData b)))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ppairDataBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData PTokenName
   :--&gt; (PAsData (PInteger @S)
         :--&gt; PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S))))
-&gt; Term s (PAsData PTokenName)
-&gt; Term
     s
     (PAsData (PInteger @S)
      :--&gt; PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTokenName -&gt; Term s (PAsData PTokenName)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pdata</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTokenName
</span><a href="#local-6989586621679555178"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData (PInteger @S)
   :--&gt; PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S)))
-&gt; Term s (PAsData (PInteger @S))
-&gt; Term
     s (PBuiltinPair (PAsData PTokenName) (PAsData (PInteger @S)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PAsData (PInteger @S))
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pdata</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><a href="#local-6989586621679555177"><span class="hs-identifier hs-var">int</span></a></span><span>
</span><span id="line-621"></span><span>        </span><span id="local-6989586621679555175"><span class="annot"><span class="annottext">outerTup :: Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555175"><span class="hs-identifier hs-var hs-var">outerTup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)) s
-&gt; Term
     s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)) s
 -&gt; Term
      s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S))))
-&gt; PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)) s
-&gt; Term
     s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)) s
forall (keysort :: KeyGuarantees) (k :: PType) (v :: PType)
       (s :: S).
Term s (PBuiltinMap k v) -&gt; PMap keysort k v s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PMap</span></a></span><span> </span><span class="annot"><span class="annottext">(Term
   s
   (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
 -&gt; PMap
      keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)) s)
-&gt; Term
     s
     (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair
     (PAsData PCurrencySymbol)
     (PAsData (PMap keys PTokenName (PInteger @S)))
   :--&gt; PBuiltinMap
          PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (a :--&gt; list a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">psingleton</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair
     (PAsData PCurrencySymbol)
     (PAsData (PMap keys PTokenName (PInteger @S)))
   :--&gt; PBuiltinMap
          PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; Term
     s
     (PBuiltinPair
        (PAsData PCurrencySymbol)
        (PAsData (PMap keys PTokenName (PInteger @S))))
-&gt; Term
     s
     (PBuiltinMap PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData PCurrencySymbol
   :--&gt; (PAsData (PMap keys PTokenName (PInteger @S))
         :--&gt; PBuiltinPair
                (PAsData PCurrencySymbol)
                (PAsData (PMap keys PTokenName (PInteger @S)))))
forall (s :: S) (a :: PType) (b :: PType).
Term
  s
  (PAsData a
   :--&gt; (PAsData b :--&gt; PBuiltinPair (PAsData a) (PAsData b)))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ppairDataBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData PCurrencySymbol
   :--&gt; (PAsData (PMap keys PTokenName (PInteger @S))
         :--&gt; PBuiltinPair
                (PAsData PCurrencySymbol)
                (PAsData (PMap keys PTokenName (PInteger @S)))))
-&gt; Term s (PAsData PCurrencySymbol)
-&gt; Term
     s
     (PAsData (PMap keys PTokenName (PInteger @S))
      :--&gt; PBuiltinPair
             (PAsData PCurrencySymbol)
             (PAsData (PMap keys PTokenName (PInteger @S))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol -&gt; Term s (PAsData PCurrencySymbol)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pdata</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679555179"><span class="hs-identifier hs-var">sym</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData (PMap keys PTokenName (PInteger @S))
   :--&gt; PBuiltinPair
          (PAsData PCurrencySymbol)
          (PAsData (PMap keys PTokenName (PInteger @S))))
-&gt; Term s (PAsData (PMap keys PTokenName (PInteger @S)))
-&gt; Term
     s
     (PBuiltinPair
        (PAsData PCurrencySymbol)
        (PAsData (PMap keys PTokenName (PInteger @S))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys PTokenName (PInteger @S))
-&gt; Term s (PAsData (PMap keys PTokenName (PInteger @S)))
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pdata</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys PTokenName (PInteger @S))
</span><a href="#local-6989586621679555176"><span class="hs-identifier hs-var">innerTup</span></a></span><span>
</span><span id="line-622"></span><span>        </span><span id="local-6989586621679555174"><span class="annot"><span class="annottext">res :: Term s (PValue keys amounts)
</span><a href="#local-6989586621679555174"><span class="hs-identifier hs-var hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PValue keys amounts s -&gt; Term s (PValue keys amounts)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PValue keys amounts s -&gt; Term s (PValue keys amounts))
-&gt; PValue keys amounts s -&gt; Term s (PValue keys amounts)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; PValue keys amounts s
forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
-&gt; PValue keys amounts s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PValue</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PMap keys PCurrencySymbol (PMap keys PTokenName (PInteger @S)))
</span><a href="#local-6989586621679555175"><span class="hs-identifier hs-var">outerTup</span></a></span><span>
</span><span id="line-623"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679555174"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span class="hs-comment">-- | Finds the TxOut of an effect from TxInfo and TxOutRef</span><span>
</span><span id="line-626"></span><span id="local-6989586621679556375"><span class="annot"><a href="Agora.Utils.html#findTxOutByTxOutRef"><span class="hs-identifier hs-type">findTxOutByTxOutRef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556375"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxOutRef</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxInInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxOut</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-627"></span><span id="findTxOutByTxOutRef"><span class="annot"><span class="annottext">findTxOutByTxOutRef :: forall (s :: S).
Term
  s
  (PTxOutRef
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut))
</span><a href="Agora.Utils.html#findTxOutByTxOutRef"><span class="hs-identifier hs-var hs-var">findTxOutByTxOutRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s
   (PTxOutRef
    :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut)))
-&gt; Term
     s
     (PTxOutRef
      :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s
    (PTxOutRef
     :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut)))
 -&gt; Term
      s
      (PTxOutRef
       :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut)))
-&gt; (forall (s :: S).
    Term
      s
      (PTxOutRef
       :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut)))
-&gt; Term
     s
     (PTxOutRef
      :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-628"></span><span>  </span><span class="annot"><span class="annottext">(Term s PTxOutRef
 -&gt; Term s (PBuiltinList (PAsData PTxInInfo))
 -&gt; Term s (PMaybe PTxOut))
-&gt; Term
     s
     (PTxOutRef
      :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PTxOutRef
  -&gt; Term s (PBuiltinList (PAsData PTxInInfo))
  -&gt; Term s (PMaybe PTxOut))
 -&gt; Term
      s
      (PTxOutRef
       :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut)))
-&gt; (Term s PTxOutRef
    -&gt; Term s (PBuiltinList (PAsData PTxInInfo))
    -&gt; Term s (PMaybe PTxOut))
-&gt; Term
     s
     (PTxOutRef
      :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxOut))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555150"><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679555150"><span class="hs-identifier hs-var">txOutRef</span></a></span></span><span> </span><span id="local-6989586621679555149"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo))
</span><a href="#local-6989586621679555149"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-629"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybe PTxInInfo)
-&gt; (PMaybe PTxInInfo s -&gt; Term s (PMaybe PTxOut))
-&gt; Term s (PMaybe PTxOut)
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PTxOutRef
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
forall (s :: S).
Term
  s
  (PTxOutRef
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
</span><a href="Agora.Utils.html#pfindTxInByTxOutRef"><span class="hs-identifier hs-var">pfindTxInByTxOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PTxOutRef
   :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo))
-&gt; Term s PTxOutRef
-&gt; Term s (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679555150"><span class="hs-identifier hs-var">txOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo) :--&gt; PMaybe PTxInInfo)
-&gt; Term s (PBuiltinList (PAsData PTxInInfo))
-&gt; Term s (PMaybe PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxInInfo))
</span><a href="#local-6989586621679555149"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe PTxInInfo s -&gt; Term s (PMaybe PTxOut))
 -&gt; Term s (PMaybe PTxOut))
-&gt; (PMaybe PTxInInfo s -&gt; Term s (PMaybe PTxOut))
-&gt; Term s (PMaybe PTxOut)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-630"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;resolved&quot;</span></span><span> </span><span class="hs-operator">#</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679555148"><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679555148"><span class="hs-identifier hs-var">txOut</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe PTxOut s -&gt; Term s (PMaybe PTxOut)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PMaybe PTxOut s -&gt; Term s (PMaybe PTxOut))
-&gt; PMaybe PTxOut s -&gt; Term s (PMaybe PTxOut)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTxOut -&gt; PMaybe PTxOut s
forall (a :: PType) (s :: S). Term s a -&gt; PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679555148"><span class="hs-identifier hs-var">txOut</span></a></span><span>
</span><span id="line-631"></span><span>      </span><span class="annot"><span class="annottext">PMaybe PTxInInfo s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe PTxOut s -&gt; Term s (PMaybe PTxOut)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe PTxOut s
forall (a :: PType) (s :: S). PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span>
</span><span id="line-632"></span><span>
</span><span id="line-633"></span><span class="hs-comment">-- | Get script hash from an Address.</span><span>
</span><span id="line-634"></span><span id="local-6989586621679556372"><span class="annot"><a href="Agora.Utils.html#scriptHashFromAddress"><span class="hs-identifier hs-type">scriptHashFromAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556372"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAddress</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValidatorHash</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-635"></span><span id="scriptHashFromAddress"><span class="annot"><span class="annottext">scriptHashFromAddress :: forall (s :: S). Term s (PAddress :--&gt; PMaybe PValidatorHash)
</span><a href="Agora.Utils.html#scriptHashFromAddress"><span class="hs-identifier hs-var hs-var">scriptHashFromAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S). Term s (PAddress :--&gt; PMaybe PValidatorHash))
-&gt; Term s (PAddress :--&gt; PMaybe PValidatorHash)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S). Term s (PAddress :--&gt; PMaybe PValidatorHash))
 -&gt; Term s (PAddress :--&gt; PMaybe PValidatorHash))
-&gt; (forall (s :: S). Term s (PAddress :--&gt; PMaybe PValidatorHash))
-&gt; Term s (PAddress :--&gt; PMaybe PValidatorHash)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-636"></span><span>  </span><span class="annot"><span class="annottext">(Term s PAddress -&gt; Term s (PMaybe PValidatorHash))
-&gt; Term s (PAddress :--&gt; PMaybe PValidatorHash)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PAddress -&gt; Term s (PMaybe PValidatorHash))
 -&gt; Term s (PAddress :--&gt; PMaybe PValidatorHash))
-&gt; (Term s PAddress -&gt; Term s (PMaybe PValidatorHash))
-&gt; Term s (PAddress :--&gt; PMaybe PValidatorHash)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555113"><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679555113"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-637"></span><span>    </span><span class="annot"><span class="annottext">Term s PCredential
-&gt; (PCredential s -&gt; Term s (PMaybe PValidatorHash))
-&gt; Term s (PMaybe PValidatorHash)
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PAsData PCredential) -&gt; Term s PCredential
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PCredential) -&gt; Term s PCredential)
-&gt; Term s (PAsData PCredential) -&gt; Term s PCredential
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;credential&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAddress :--&gt; PAsData PCredential)
-&gt; Term s PAddress -&gt; Term s (PAsData PCredential)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679555113"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PCredential s -&gt; Term s (PMaybe PValidatorHash))
 -&gt; Term s (PMaybe PValidatorHash))
-&gt; (PCredential s -&gt; Term s (PMaybe PValidatorHash))
-&gt; Term s (PMaybe PValidatorHash)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-638"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PScriptCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;_0&quot;</span></span><span> </span><span class="hs-operator">#</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679555112"><span class="annot"><span class="annottext">Term s PValidatorHash
</span><a href="#local-6989586621679555112"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe PValidatorHash s -&gt; Term s (PMaybe PValidatorHash)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PMaybe PValidatorHash s -&gt; Term s (PMaybe PValidatorHash))
-&gt; PMaybe PValidatorHash s -&gt; Term s (PMaybe PValidatorHash)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PValidatorHash -&gt; PMaybe PValidatorHash s
forall (a :: PType) (s :: S). Term s a -&gt; PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PValidatorHash
</span><a href="#local-6989586621679555112"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-639"></span><span>      </span><span class="annot"><span class="annottext">PCredential s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe PValidatorHash s -&gt; Term s (PMaybe PValidatorHash)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe PValidatorHash s
forall (a :: PType) (s :: S). PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span class="hs-comment">-- | Return true if the given address is a script address.</span><span>
</span><span id="line-642"></span><span id="local-6989586621679556366"><span class="annot"><a href="Agora.Utils.html#isScriptAddress"><span class="hs-identifier hs-type">isScriptAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556366"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAddress</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-643"></span><span id="isScriptAddress"><span class="annot"><span class="annottext">isScriptAddress :: forall (s :: S). Term s (PAddress :--&gt; PBool)
</span><a href="Agora.Utils.html#isScriptAddress"><span class="hs-identifier hs-var hs-var">isScriptAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S). Term s (PAddress :--&gt; PBool))
-&gt; Term s (PAddress :--&gt; PBool)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S). Term s (PAddress :--&gt; PBool))
 -&gt; Term s (PAddress :--&gt; PBool))
-&gt; (forall (s :: S). Term s (PAddress :--&gt; PBool))
-&gt; Term s (PAddress :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-644"></span><span>  </span><span class="annot"><span class="annottext">(Term s PAddress -&gt; Term s PBool) -&gt; Term s (PAddress :--&gt; PBool)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PAddress -&gt; Term s PBool) -&gt; Term s (PAddress :--&gt; PBool))
-&gt; (Term s PAddress -&gt; Term s PBool)
-&gt; Term s (PAddress :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555097"><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679555097"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PBool :--&gt; PBool)
forall (s :: S). Term s (PBool :--&gt; PBool)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pnot</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBool :--&gt; PBool) -&gt; Term s PBool -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PCredential :--&gt; PBool)
forall (s :: S). Term s (PCredential :--&gt; PBool)
</span><a href="Agora.Utils.html#isPubKey"><span class="hs-identifier hs-var">isPubKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PCredential :--&gt; PBool)
-&gt; Term s PCredential -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PCredential) -&gt; Term s PCredential
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PCredential) -&gt; Term s PCredential)
-&gt; Term s (PAsData PCredential) -&gt; Term s PCredential
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;credential&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAddress :--&gt; PAsData PCredential)
-&gt; Term s PAddress -&gt; Term s (PAsData PCredential)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679555097"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-645"></span><span>
</span><span id="line-646"></span><span class="hs-comment">-- | Return true if the given credential is a pub-key-hash.</span><span>
</span><span id="line-647"></span><span id="local-6989586621679556363"><span class="annot"><a href="Agora.Utils.html#isPubKey"><span class="hs-identifier hs-type">isPubKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556363"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PCredential</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-648"></span><span id="isPubKey"><span class="annot"><span class="annottext">isPubKey :: forall (s :: S). Term s (PCredential :--&gt; PBool)
</span><a href="Agora.Utils.html#isPubKey"><span class="hs-identifier hs-var hs-var">isPubKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S). Term s (PCredential :--&gt; PBool))
-&gt; Term s (PCredential :--&gt; PBool)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S). Term s (PCredential :--&gt; PBool))
 -&gt; Term s (PCredential :--&gt; PBool))
-&gt; (forall (s :: S). Term s (PCredential :--&gt; PBool))
-&gt; Term s (PCredential :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-649"></span><span>  </span><span class="annot"><span class="annottext">(Term s PCredential -&gt; Term s PBool)
-&gt; Term s (PCredential :--&gt; PBool)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PCredential -&gt; Term s PBool)
 -&gt; Term s (PCredential :--&gt; PBool))
-&gt; (Term s PCredential -&gt; Term s PBool)
-&gt; Term s (PCredential :--&gt; PBool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555088"><span class="annot"><span class="annottext">Term s PCredential
</span><a href="#local-6989586621679555088"><span class="hs-identifier hs-var">cred</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-650"></span><span>    </span><span class="annot"><span class="annottext">Term s PCredential
-&gt; (PCredential s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCredential
</span><a href="#local-6989586621679555088"><span class="hs-identifier hs-var">cred</span></a></span><span> </span><span class="annot"><span class="annottext">((PCredential s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PCredential s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-651"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PScriptCredential</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDataRecord
     ((':) @PLabeledType (&quot;_0&quot; ':= PValidatorHash) ('[] @PLabeledType)))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PLifted PBool -&gt; Term s PBool
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
PLifted PBool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-652"></span><span>      </span><span class="annot"><span class="annottext">PCredential s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PLifted PBool -&gt; Term s PBool
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
PLifted PBool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span class="hs-comment">-- | Find all TxOuts sent to an Address</span><span>
</span><span id="line-655"></span><span id="local-6989586621679556360"><span class="annot"><a href="Agora.Utils.html#findOutputsToAddress"><span class="hs-identifier hs-type">findOutputsToAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556360"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxOut</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAddress</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxOut</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-656"></span><span id="findOutputsToAddress"><span class="annot"><span class="annottext">findOutputsToAddress :: forall (s :: S).
Term
  s
  (PBuiltinList (PAsData PTxOut)
   :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut)))
</span><a href="Agora.Utils.html#findOutputsToAddress"><span class="hs-identifier hs-var hs-var">findOutputsToAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s
   (PBuiltinList (PAsData PTxOut)
    :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut))))
-&gt; Term
     s
     (PBuiltinList (PAsData PTxOut)
      :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s
    (PBuiltinList (PAsData PTxOut)
     :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut))))
 -&gt; Term
      s
      (PBuiltinList (PAsData PTxOut)
       :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut))))
-&gt; (forall (s :: S).
    Term
      s
      (PBuiltinList (PAsData PTxOut)
       :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut))))
-&gt; Term
     s
     (PBuiltinList (PAsData PTxOut)
      :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-657"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PAsData PTxOut))
 -&gt; Term s PAddress -&gt; Term s (PBuiltinList (PAsData PTxOut)))
-&gt; Term
     s
     (PBuiltinList (PAsData PTxOut)
      :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut)))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinList (PAsData PTxOut))
  -&gt; Term s PAddress -&gt; Term s (PBuiltinList (PAsData PTxOut)))
 -&gt; Term
      s
      (PBuiltinList (PAsData PTxOut)
       :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut))))
-&gt; (Term s (PBuiltinList (PAsData PTxOut))
    -&gt; Term s PAddress -&gt; Term s (PBuiltinList (PAsData PTxOut)))
-&gt; Term
     s
     (PBuiltinList (PAsData PTxOut)
      :--&gt; (PAddress :--&gt; PBuiltinList (PAsData PTxOut)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555059"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxOut))
</span><a href="#local-6989586621679555059"><span class="hs-identifier hs-var">outputs</span></a></span></span><span> </span><span id="local-6989586621679555058"><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679555058"><span class="hs-identifier hs-var">address'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont
  @(PBuiltinList (PAsData PTxOut))
  s
  (Term s (PBuiltinList (PAsData PTxOut)))
-&gt; Term s (PBuiltinList (PAsData PTxOut))
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont
   @(PBuiltinList (PAsData PTxOut))
   s
   (Term s (PBuiltinList (PAsData PTxOut)))
 -&gt; Term s (PBuiltinList (PAsData PTxOut)))
-&gt; TermCont
     @(PBuiltinList (PAsData PTxOut))
     s
     (Term s (PBuiltinList (PAsData PTxOut)))
-&gt; Term s (PBuiltinList (PAsData PTxOut))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-658"></span><span>    </span><span id="local-6989586621679555057"><span class="annot"><span class="annottext">Term s (PAsData PAddress)
</span><a href="#local-6989586621679555057"><span class="hs-identifier hs-var">address</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PAddress)
-&gt; TermCont
     @(PBuiltinList (PAsData PTxOut)) s (Term s (PAsData PAddress))
forall (r :: PType) (s :: S) (a :: PType).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Agora.Utils.html#tclet"><span class="hs-identifier hs-var">tclet</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PAddress)
 -&gt; TermCont
      @(PBuiltinList (PAsData PTxOut)) s (Term s (PAsData PAddress)))
-&gt; Term s (PAsData PAddress)
-&gt; TermCont
     @(PBuiltinList (PAsData PTxOut)) s (Term s (PAsData PAddress))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PAddress -&gt; Term s (PAsData PAddress)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pdata</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679555058"><span class="hs-identifier hs-var">address'</span></a></span><span>
</span><span id="line-659"></span><span>    </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxOut))
-&gt; TermCont
     @(PBuiltinList (PAsData PTxOut))
     s
     (Term s (PBuiltinList (PAsData PTxOut)))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PAsData PTxOut))
 -&gt; TermCont
      @(PBuiltinList (PAsData PTxOut))
      s
      (Term s (PBuiltinList (PAsData PTxOut))))
-&gt; Term s (PBuiltinList (PAsData PTxOut))
-&gt; TermCont
     @(PBuiltinList (PAsData PTxOut))
     s
     (Term s (PBuiltinList (PAsData PTxOut)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-660"></span><span>      </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData PTxOut :--&gt; PBool)
   :--&gt; (PBuiltinList (PAsData PTxOut)
         :--&gt; PBuiltinList (PAsData PTxOut)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s ((a :--&gt; PBool) :--&gt; (list a :--&gt; list a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfilter</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData PTxOut :--&gt; PBool)
   :--&gt; (PBuiltinList (PAsData PTxOut)
         :--&gt; PBuiltinList (PAsData PTxOut)))
-&gt; Term s (PAsData PTxOut :--&gt; PBool)
-&gt; Term
     s
     (PBuiltinList (PAsData PTxOut) :--&gt; PBuiltinList (PAsData PTxOut))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PTxOut) -&gt; Term s PBool)
-&gt; Term s (PAsData PTxOut :--&gt; PBool)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PAsData PTxOut) -&gt; Term s PTxOut
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679555056"><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679555056"><span class="hs-identifier hs-var">txOut</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;address&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PTxOut :--&gt; PAsData PAddress)
-&gt; Term s PTxOut -&gt; Term s (PAsData PAddress)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679555056"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PAddress)
-&gt; Term s (PAsData PAddress) -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PAddress)
</span><a href="#local-6989586621679555057"><span class="hs-identifier hs-var">address</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
        # outputs
</span><span>
</span><span id="line-663"></span><span class="hs-comment">-- | Find the data corresponding to a TxOut, if there is one</span><span>
</span><span id="line-664"></span><span id="local-6989586621679556357"><span class="annot"><a href="Agora.Utils.html#findTxOutDatum"><span class="hs-identifier hs-type">findTxOutDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556357"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTuple</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatumHash</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatum</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxOut</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatum</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-665"></span><span id="findTxOutDatum"><span class="annot"><span class="annottext">findTxOutDatum :: forall (s :: S).
Term
  s
  (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
   :--&gt; (PTxOut :--&gt; PMaybe PDatum))
</span><a href="Agora.Utils.html#findTxOutDatum"><span class="hs-identifier hs-var hs-var">findTxOutDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s
   (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
    :--&gt; (PTxOut :--&gt; PMaybe PDatum)))
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; (PTxOut :--&gt; PMaybe PDatum))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s
    (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
     :--&gt; (PTxOut :--&gt; PMaybe PDatum)))
 -&gt; Term
      s
      (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
       :--&gt; (PTxOut :--&gt; PMaybe PDatum)))
-&gt; (forall (s :: S).
    Term
      s
      (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
       :--&gt; (PTxOut :--&gt; PMaybe PDatum)))
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; (PTxOut :--&gt; PMaybe PDatum))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-666"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
 -&gt; Term s PTxOut -&gt; Term s (PMaybe PDatum))
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; (PTxOut :--&gt; PMaybe PDatum))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
  -&gt; Term s PTxOut -&gt; Term s (PMaybe PDatum))
 -&gt; Term
      s
      (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
       :--&gt; (PTxOut :--&gt; PMaybe PDatum)))
-&gt; (Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
    -&gt; Term s PTxOut -&gt; Term s (PMaybe PDatum))
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; (PTxOut :--&gt; PMaybe PDatum))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679555023"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679555023"><span class="hs-identifier hs-var">datums</span></a></span></span><span> </span><span id="local-6989586621679555022"><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679555022"><span class="hs-identifier hs-var">out</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont @(PMaybe PDatum) s (Term s (PMaybe PDatum))
-&gt; Term s (PMaybe PDatum)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @(PMaybe PDatum) s (Term s (PMaybe PDatum))
 -&gt; Term s (PMaybe PDatum))
-&gt; TermCont @(PMaybe PDatum) s (Term s (PMaybe PDatum))
-&gt; Term s (PMaybe PDatum)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-667"></span><span>    </span><span id="local-6989586621679555021"><span class="annot"><span class="annottext">PMaybeData PDatumHash s
</span><a href="#local-6989586621679555021"><span class="hs-identifier hs-var">datumHash'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PMaybeData PDatumHash)
-&gt; TermCont @(PMaybe PDatum) s (PMaybeData PDatumHash s)
forall {r :: PType} (a :: PType) (s :: S).
PlutusType a =&gt;
Term s a -&gt; TermCont @r s (a s)
</span><a href="Agora.Utils.html#tcmatch"><span class="hs-identifier hs-var">tcmatch</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PMaybeData PDatumHash)
 -&gt; TermCont @(PMaybe PDatum) s (PMaybeData PDatumHash s))
-&gt; Term s (PMaybeData PDatumHash)
-&gt; TermCont @(PMaybe PDatum) s (PMaybeData PDatumHash s)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PMaybeData PDatumHash))
-&gt; Term s (PMaybeData PDatumHash)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData (PMaybeData PDatumHash))
 -&gt; Term s (PMaybeData PDatumHash))
-&gt; Term s (PAsData (PMaybeData PDatumHash))
-&gt; Term s (PMaybeData PDatumHash)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;datumHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PTxOut :--&gt; PAsData (PMaybeData PDatumHash))
-&gt; Term s PTxOut -&gt; Term s (PAsData (PMaybeData PDatumHash))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679555022"><span class="hs-identifier hs-var">out</span></a></span><span>
</span><span id="line-668"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybe PDatum)
-&gt; TermCont @(PMaybe PDatum) s (Term s (PMaybe PDatum))
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PMaybe PDatum)
 -&gt; TermCont @(PMaybe PDatum) s (Term s (PMaybe PDatum)))
-&gt; Term s (PMaybe PDatum)
-&gt; TermCont @(PMaybe PDatum) s (Term s (PMaybe PDatum))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PMaybeData PDatumHash s
</span><a href="#local-6989586621679555021"><span class="hs-identifier hs-var">datumHash'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-669"></span><span>      </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDJust</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;_0&quot;</span></span><span> </span><span class="hs-operator">#</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679555020"><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679555020"><span class="hs-identifier hs-var">datumHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
forall (s :: S).
Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
</span><a href="Agora.Utils.html#pfindDatum"><span class="hs-identifier hs-var">pfindDatum</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
-&gt; Term s PDatumHash
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; PMaybe PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679555020"><span class="hs-identifier hs-var">datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
   :--&gt; PMaybe PDatum)
-&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
-&gt; Term s (PMaybe PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679555023"><span class="hs-identifier hs-var">datums</span></a></span><span>
</span><span id="line-670"></span><span>      </span><span class="annot"><span class="annottext">PMaybeData PDatumHash s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PMaybe PDatum s -&gt; Term s (PMaybe PDatum)
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">PMaybe PDatum s
forall (a :: PType) (s :: S). PMaybe a s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PNothing</span></a></span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span class="hs-comment">{- | Safely convert a 'PValidatorHash' into a 'PTokenName'. This can be useful for tagging
     tokens for extra safety.
-}</span><span>
</span><span id="line-675"></span><span class="annot"><a href="Agora.Utils.html#validatorHashToTokenName"><span class="hs-identifier hs-type">validatorHashToTokenName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">ValidatorHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TokenName</span></a></span><span>
</span><span id="line-676"></span><span id="validatorHashToTokenName"><span class="annot"><span class="annottext">validatorHashToTokenName :: ValidatorHash -&gt; TokenName
</span><a href="Agora.Utils.html#validatorHashToTokenName"><span class="hs-identifier hs-var hs-var">validatorHashToTokenName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">ValidatorHash</span></a></span><span> </span><span id="local-6989586621679555018"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679555018"><span class="hs-identifier hs-var">hash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString -&gt; TokenName
</span><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-var">TokenName</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679555018"><span class="hs-identifier hs-var">hash</span></a></span><span>
</span><span id="line-677"></span><span>
</span><span id="line-678"></span><span class="hs-comment">-- | Plutarch level 'validatorHashToTokenName'.</span><span>
</span><span id="line-679"></span><span class="annot"><a href="Agora.Utils.html#pvalidatorHashToTokenName"><span class="hs-identifier hs-type">pvalidatorHashToTokenName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556351"><span class="annot"><a href="#local-6989586621679556351"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556351"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValidatorHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556351"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTokenName</span></a></span><span>
</span><span id="line-680"></span><span id="pvalidatorHashToTokenName"><span class="annot"><span class="annottext">pvalidatorHashToTokenName :: forall (s :: S). Term s PValidatorHash -&gt; Term s PTokenName
</span><a href="Agora.Utils.html#pvalidatorHashToTokenName"><span class="hs-identifier hs-var hs-var">pvalidatorHashToTokenName</span></a></span></span><span> </span><span id="local-6989586621679555013"><span class="annot"><span class="annottext">Term s PValidatorHash
</span><a href="#local-6989586621679555013"><span class="hs-identifier hs-var">vh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PTokenName s -&gt; Term s PTokenName
forall (a :: PType) (s :: S). PCon a =&gt; a s -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PByteString @S) -&gt; PTokenName s
forall (s :: S). Term s (PByteString @S) -&gt; PTokenName s
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PTokenName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s PValidatorHash
-&gt; forall (b :: PType). Term s (PInner PValidatorHash b)
forall (s :: S) (a :: PType).
Term s a -&gt; forall (b :: PType). Term s (PInner a b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PValidatorHash
</span><a href="#local-6989586621679555013"><span class="hs-identifier hs-var">vh</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span>
</span><span id="line-682"></span><span class="hs-comment">-- | Get the CurrencySymbol of a PMintingPolicy.</span><span>
</span><span id="line-683"></span><span class="annot"><a href="Agora.Utils.html#getMintingPolicySymbol"><span class="hs-identifier hs-type">getMintingPolicySymbol</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">ClosedTerm</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMintingPolicy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">CurrencySymbol</span></a></span><span>
</span><span id="line-684"></span><span id="getMintingPolicySymbol"><span class="annot"><span class="annottext">getMintingPolicySymbol :: ClosedTerm PMintingPolicy -&gt; CurrencySymbol
</span><a href="Agora.Utils.html#getMintingPolicySymbol"><span class="hs-identifier hs-var hs-var">getMintingPolicySymbol</span></a></span></span><span> </span><span id="local-6989586621679555012"><span class="annot"><span class="annottext">ClosedTerm PMintingPolicy
</span><a href="#local-6989586621679555012"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MintingPolicy -&gt; CurrencySymbol
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">mintingPolicySymbol</span></a></span><span> </span><span class="annot"><span class="annottext">(MintingPolicy -&gt; CurrencySymbol)
-&gt; MintingPolicy -&gt; CurrencySymbol
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTerm PMintingPolicy -&gt; MintingPolicy
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">mkMintingPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTerm PMintingPolicy
</span><a href="#local-6989586621679555012"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-685"></span><span>
</span><span id="line-686"></span><span class="hs-comment">-- | The entire value only contains one token of the given currency symbol.</span><span>
</span><span id="line-687"></span><span class="annot"><a href="Agora.Utils.html#hasOnlyOneTokenOfCurrencySymbol"><span class="hs-identifier hs-type">hasOnlyOneTokenOfCurrencySymbol</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556344"><span class="annot"><a href="#local-6989586621679556344"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">KeyGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556343"><span class="annot"><a href="#local-6989586621679556343"><span class="hs-identifier hs-type">amounts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">AmountGuarantees</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556345"><span class="annot"><a href="#local-6989586621679556345"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-689"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556345"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PCurrencySymbol</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556344"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556343"><span class="hs-identifier hs-type">amounts</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span id="hasOnlyOneTokenOfCurrencySymbol"><span class="annot"><span class="annottext">hasOnlyOneTokenOfCurrencySymbol :: forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool))
</span><a href="Agora.Utils.html#hasOnlyOneTokenOfCurrencySymbol"><span class="hs-identifier hs-var hs-var">hasOnlyOneTokenOfCurrencySymbol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool))
-&gt; Term s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool))
 -&gt; Term s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool)))
-&gt; ClosedTerm
     (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool))
-&gt; Term s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-691"></span><span>  </span><span class="annot"><span class="annottext">(Term s PCurrencySymbol
 -&gt; Term s (PValue keys amounts) -&gt; Term s PBool)
-&gt; Term s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s PCurrencySymbol
  -&gt; Term s (PValue keys amounts) -&gt; Term s PBool)
 -&gt; Term s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool)))
-&gt; (Term s PCurrencySymbol
    -&gt; Term s (PValue keys amounts) -&gt; Term s PBool)
-&gt; Term s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679554995"><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679554995"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679554994"><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679554994"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">P.do</span><span>
</span><span id="line-692"></span><span>    </span><span class="annot"><span class="annottext">Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
forall (keys :: KeyGuarantees) (amounts :: AmountGuarantees)
       (s :: S).
Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
</span><a href="Agora.Utils.html#psymbolValueOf"><span class="hs-identifier hs-var">psymbolValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PCurrencySymbol :--&gt; (PValue keys amounts :--&gt; PInteger @S))
-&gt; Term s PCurrencySymbol
-&gt; Term s (PValue keys amounts :--&gt; PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679554995"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts :--&gt; PInteger @S)
-&gt; Term s (PValue keys amounts) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue keys amounts)
</span><a href="#local-6989586621679554994"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><span class="hs-number">1</span></span><span class="hs-cpp">
      #&amp;&amp; (plength #$ pto $ pto $ pto vs) #== 1
</span><span>
</span><span id="line-695"></span><span class="hs-comment">-- | Find datum given a maybe datum hash</span><span>
</span><span id="line-696"></span><span class="annot"><a href="Agora.Utils.html#mustFindDatum%27"><span class="hs-identifier hs-type">mustFindDatum'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-697"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679556337"><span class="annot"><a href="#local-6989586621679556337"><span class="hs-identifier hs-type">datum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-698"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556337"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTryFrom</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556337"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-699"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556336"><span class="annot"><a href="#local-6989586621679556336"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-700"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span>
</span><span id="line-701"></span><span>    </span><span class="annot"><a href="#local-6989586621679556336"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-702"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybeData</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatumHash</span></a></span><span>
</span><span id="line-703"></span><span>        </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTuple</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatumHash</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDatum</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>        </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556337"><span class="hs-identifier hs-type">datum</span></a></span><span>
</span><span id="line-705"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span id="mustFindDatum%27"><span class="annot"><span class="annottext">mustFindDatum' :: forall (datum :: PType) (s :: S).
(PIsData datum, PTryFrom PData (PAsData datum)) =&gt;
Term
  s
  (PMaybeData PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; datum))
</span><a href="Agora.Utils.html#mustFindDatum%27"><span class="hs-identifier hs-var hs-var">mustFindDatum'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  (PMaybeData PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; datum))
-&gt; Term
     s
     (PMaybeData PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; datum))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PMaybeData PDatumHash
    :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
          :--&gt; datum))
 -&gt; Term
      s
      (PMaybeData PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; datum)))
-&gt; ClosedTerm
     (PMaybeData PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; datum))
-&gt; Term
     s
     (PMaybeData PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; datum))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-707"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PMaybeData PDatumHash)
 -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
 -&gt; Term s datum)
-&gt; Term
     s
     (PMaybeData PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; datum))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PMaybeData PDatumHash)
  -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
  -&gt; Term s datum)
 -&gt; Term
      s
      (PMaybeData PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; datum)))
-&gt; (Term s (PMaybeData PDatumHash)
    -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
    -&gt; Term s datum)
-&gt; Term
     s
     (PMaybeData PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; datum))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679554968"><span class="annot"><span class="annottext">Term s (PMaybeData PDatumHash)
</span><a href="#local-6989586621679554968"><span class="hs-identifier hs-var">mdh</span></a></span></span><span> </span><span id="local-6989586621679554967"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679554967"><span class="hs-identifier hs-var">datums</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont @datum s (Term s datum) -&gt; Term s datum
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @datum s (Term s datum) -&gt; Term s datum)
-&gt; TermCont @datum s (Term s datum) -&gt; Term s datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-708"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679554966"><span class="annot"><span class="annottext">dh :: Term s PDatumHash
</span><a href="#local-6989586621679554966"><span class="hs-identifier hs-var hs-var">dh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PString @S :--&gt; (PMaybeData PDatumHash :--&gt; PDatumHash))
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PString @S :--&gt; (PMaybeData a :--&gt; a))
</span><a href="Agora.Utils.html#mustBePDJust"><span class="hs-identifier hs-var">mustBePDJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S :--&gt; (PMaybeData PDatumHash :--&gt; PDatumHash))
-&gt; Term s (PString @S)
-&gt; Term s (PMaybeData PDatumHash :--&gt; PDatumHash)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Given TxOut dones't have a datum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybeData PDatumHash :--&gt; PDatumHash)
-&gt; Term s (PMaybeData PDatumHash) -&gt; Term s PDatumHash
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybeData PDatumHash)
</span><a href="#local-6989586621679554968"><span class="hs-identifier hs-var">mdh</span></a></span><span>
</span><span id="line-709"></span><span>        </span><span id="local-6989586621679554965"><span class="annot"><span class="annottext">dt :: Term s PDatum
</span><a href="#local-6989586621679554965"><span class="hs-identifier hs-var hs-var">dt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PString @S :--&gt; (PMaybe PDatum :--&gt; PDatum))
forall (a :: PType) (s :: S).
Term s (PString @S :--&gt; (PMaybe a :--&gt; a))
</span><a href="Agora.Utils.html#mustBePJust"><span class="hs-identifier hs-var">mustBePJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S :--&gt; (PMaybe PDatum :--&gt; PDatum))
-&gt; Term s (PString @S) -&gt; Term s (PMaybe PDatum :--&gt; PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Datum not found in the transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe PDatum :--&gt; PDatum)
-&gt; Term s (PMaybe PDatum) -&gt; Term s PDatum
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
forall (a :: PType) (list :: PType -&gt; PType) (b :: PType) (s :: S).
(PEq a, PIsListLike list (PAsData (PTuple a b)), PIsData a,
 PIsData b) =&gt;
Term s (a :--&gt; (list (PAsData (PTuple a b)) :--&gt; PMaybe b))
</span><a href="Agora.Utils.html#plookupTuple"><span class="hs-identifier hs-var">plookupTuple</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe PDatum))
-&gt; Term s PDatumHash
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; PMaybe PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679554966"><span class="hs-identifier hs-var">dh</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
   :--&gt; PMaybe PDatum)
-&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
-&gt; Term s (PMaybe PDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679554967"><span class="hs-identifier hs-var">datums</span></a></span><span>
</span><span id="line-710"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679554964"><span class="annot"><span class="annottext">Term s (PAsData datum)
</span><a href="#local-6989586621679554964"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reduce @Type (PTryFromExcess PData (PAsData datum) s)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(((Term s (PAsData datum),
   Reduce @Type (PTryFromExcess PData (PAsData datum) s))
  -&gt; Term s datum)
 -&gt; Term s datum)
-&gt; TermCont
     @datum
     s
     (Term s (PAsData datum),
      Reduce @Type (PTryFromExcess PData (PAsData datum) s))
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">((((Term s (PAsData datum),
    Reduce @Type (PTryFromExcess PData (PAsData datum) s))
   -&gt; Term s datum)
  -&gt; Term s datum)
 -&gt; TermCont
      @datum
      s
      (Term s (PAsData datum),
       Reduce @Type (PTryFromExcess PData (PAsData datum) s)))
-&gt; (((Term s (PAsData datum),
      Reduce @Type (PTryFromExcess PData (PAsData datum) s))
     -&gt; Term s datum)
    -&gt; Term s datum)
-&gt; TermCont
     @datum
     s
     (Term s (PAsData datum),
      Reduce @Type (PTryFromExcess PData (PAsData datum) s))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData
-&gt; ((Term s (PAsData datum),
     Reduce @Type (PTryFromExcess PData (PAsData datum) s))
    -&gt; Term s datum)
-&gt; Term s datum
forall (b :: PType) (a :: PType) (s :: S) (r :: PType).
PTryFrom a b =&gt;
Term s a
-&gt; ((Term s b, Reduce @Type (PTryFromExcess a b s)) -&gt; Term s r)
-&gt; Term s r
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptryFrom</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s PData
 -&gt; ((Term s (PAsData datum),
      Reduce @Type (PTryFromExcess PData (PAsData datum) s))
     -&gt; Term s datum)
 -&gt; Term s datum)
-&gt; Term s PData
-&gt; ((Term s (PAsData datum),
     Reduce @Type (PTryFromExcess PData (PAsData datum) s))
    -&gt; Term s datum)
-&gt; Term s datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PDatum) -&gt; Term s PData
forall (s :: S) (a :: PType). Term s (PAsData a) -&gt; Term s PData
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pforgetData</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PDatum) -&gt; Term s PData)
-&gt; Term s (PAsData PDatum) -&gt; Term s PData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PDatum -&gt; Term s (PAsData PDatum)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pdata</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PDatum
</span><a href="#local-6989586621679554965"><span class="hs-identifier hs-var">dt</span></a></span><span>
</span><span id="line-711"></span><span>    </span><span class="annot"><span class="annottext">Term s datum -&gt; TermCont @datum s (Term s datum)
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s datum -&gt; TermCont @datum s (Term s datum))
-&gt; Term s datum -&gt; TermCont @datum s (Term s datum)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData datum) -&gt; Term s datum
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData datum)
</span><a href="#local-6989586621679554964"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-712"></span><span>
</span><span id="line-713"></span><span class="hs-comment">{- | Extract the value stored in a PMaybe container.
     If there's no value, throw an error with the given message.
-}</span><span>
</span><span id="line-716"></span><span class="annot"><a href="Agora.Utils.html#mustBePJust"><span class="hs-identifier hs-type">mustBePJust</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556328"><span class="annot"><a href="#local-6989586621679556328"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679556329"><span class="annot"><a href="#local-6989586621679556329"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556329"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PString</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556328"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556328"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span id="mustBePJust"><span class="annot"><span class="annottext">mustBePJust :: forall (a :: PType) (s :: S).
Term s (PString @S :--&gt; (PMaybe a :--&gt; a))
</span><a href="Agora.Utils.html#mustBePJust"><span class="hs-identifier hs-var hs-var">mustBePJust</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PString @S :--&gt; (PMaybe a :--&gt; a))
-&gt; Term s (PString @S :--&gt; (PMaybe a :--&gt; a))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PString @S :--&gt; (PMaybe a :--&gt; a))
 -&gt; Term s (PString @S :--&gt; (PMaybe a :--&gt; a)))
-&gt; ClosedTerm (PString @S :--&gt; (PMaybe a :--&gt; a))
-&gt; Term s (PString @S :--&gt; (PMaybe a :--&gt; a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-718"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PString @S) -&gt; Term s (PMaybe a) -&gt; Term s a)
-&gt; Term s (PString @S :--&gt; (PMaybe a :--&gt; a))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PString @S) -&gt; Term s (PMaybe a) -&gt; Term s a)
 -&gt; Term s (PString @S :--&gt; (PMaybe a :--&gt; a)))
-&gt; (Term s (PString @S) -&gt; Term s (PMaybe a) -&gt; Term s a)
-&gt; Term s (PString @S :--&gt; (PMaybe a :--&gt; a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679554955"><span class="annot"><span class="annottext">Term s (PString @S)
</span><a href="#local-6989586621679554955"><span class="hs-identifier hs-var">emsg</span></a></span></span><span> </span><span id="local-6989586621679554954"><span class="annot"><span class="annottext">Term s (PMaybe a)
</span><a href="#local-6989586621679554954"><span class="hs-identifier hs-var">mv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe a) -&gt; (PMaybe a s -&gt; Term s a) -&gt; Term s a
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe a)
</span><a href="#local-6989586621679554954"><span class="hs-identifier hs-var">mv'</span></a></span><span> </span><span class="annot"><span class="annottext">((PMaybe a s -&gt; Term s a) -&gt; Term s a)
-&gt; (PMaybe a s -&gt; Term s a) -&gt; Term s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-719"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PJust</span></a></span><span> </span><span id="local-6989586621679554953"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679554953"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679554953"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-720"></span><span>    </span><span class="annot"><span class="annottext">PMaybe a s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s a
forall (s :: S) (a :: PType). Term s (PString @S) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptraceError</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><a href="#local-6989586621679554955"><span class="hs-identifier hs-var">emsg</span></a></span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span class="hs-comment">{- | Extract the value stored in a PMaybeData container.
     If there's no value, throw an error with the given message.
-}</span><span>
</span><span id="line-725"></span><span class="annot"><a href="Agora.Utils.html#mustBePDJust"><span class="hs-identifier hs-type">mustBePDJust</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679556331"><span class="annot"><a href="#local-6989586621679556331"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679556330"><span class="annot"><a href="#local-6989586621679556330"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556331"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556330"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PString</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PMaybeData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556331"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679556331"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span id="mustBePDJust"><span class="annot"><span class="annottext">mustBePDJust :: forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PString @S :--&gt; (PMaybeData a :--&gt; a))
</span><a href="Agora.Utils.html#mustBePDJust"><span class="hs-identifier hs-var hs-var">mustBePDJust</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PString @S :--&gt; (PMaybeData a :--&gt; a))
-&gt; Term s (PString @S :--&gt; (PMaybeData a :--&gt; a))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PString @S :--&gt; (PMaybeData a :--&gt; a))
 -&gt; Term s (PString @S :--&gt; (PMaybeData a :--&gt; a)))
-&gt; ClosedTerm (PString @S :--&gt; (PMaybeData a :--&gt; a))
-&gt; Term s (PString @S :--&gt; (PMaybeData a :--&gt; a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-727"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PString @S) -&gt; Term s (PMaybeData a) -&gt; Term s a)
-&gt; Term s (PString @S :--&gt; (PMaybeData a :--&gt; a))
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PString @S) -&gt; Term s (PMaybeData a) -&gt; Term s a)
 -&gt; Term s (PString @S :--&gt; (PMaybeData a :--&gt; a)))
-&gt; (Term s (PString @S) -&gt; Term s (PMaybeData a) -&gt; Term s a)
-&gt; Term s (PString @S :--&gt; (PMaybeData a :--&gt; a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679554933"><span class="annot"><span class="annottext">Term s (PString @S)
</span><a href="#local-6989586621679554933"><span class="hs-identifier hs-var">emsg</span></a></span></span><span> </span><span id="local-6989586621679554932"><span class="annot"><span class="annottext">Term s (PMaybeData a)
</span><a href="#local-6989586621679554932"><span class="hs-identifier hs-var">mv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PMaybeData a) -&gt; (PMaybeData a s -&gt; Term s a) -&gt; Term s a
forall (a :: PType) (s :: S) (b :: PType).
PMatch a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybeData a)
</span><a href="#local-6989586621679554932"><span class="hs-identifier hs-var">mv'</span></a></span><span> </span><span class="annot"><span class="annottext">((PMaybeData a s -&gt; Term s a) -&gt; Term s a)
-&gt; (PMaybeData a s -&gt; Term s a) -&gt; Term s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-728"></span><span>    </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDJust</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;_0&quot;</span></span><span> </span><span class="hs-operator">#</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679554931"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679554931"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679554931"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-729"></span><span>    </span><span class="annot"><span class="annottext">PMaybeData a s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s a
forall (s :: S) (a :: PType). Term s (PString @S) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">ptraceError</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><a href="#local-6989586621679554933"><span class="hs-identifier hs-var">emsg</span></a></span><span>
</span><span id="line-730"></span><span>
</span><span id="line-731"></span><span class="hs-comment">-- | Create an 'Address' from a given 'ValidatorHash' with no 'PlutusLedgerApi.V1.Credential.StakingCredential'.</span><span>
</span><span id="line-732"></span><span class="annot"><a href="Agora.Utils.html#validatorHashToAddress"><span class="hs-identifier hs-type">validatorHashToAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">ValidatorHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-733"></span><span id="validatorHashToAddress"><span class="annot"><span class="annottext">validatorHashToAddress :: ValidatorHash -&gt; Address
</span><a href="Agora.Utils.html#validatorHashToAddress"><span class="hs-identifier hs-var hs-var">validatorHashToAddress</span></a></span></span><span> </span><span id="local-6989586621679554930"><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679554930"><span class="hs-identifier hs-var">vh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential -&gt; Maybe StakingCredential -&gt; Address
</span><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-var">Address</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValidatorHash -&gt; Credential
</span><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-var">ScriptCredential</span></a></span><span> </span><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679554930"><span class="hs-identifier hs-var">vh</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-734"></span></pre></body></html>