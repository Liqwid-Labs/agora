<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">{- |
Module     : Agora.Effect.GovernorMutation
Maintainer : connor@mlabs.city
Description: An effect that mutates governor settings.

An effect for mutating governor settings.
-}</span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agora.Effect.GovernorMutation</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Haskell-land</span></span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#MutateGovernorDatum"><span class="hs-identifier">MutateGovernorDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Plutarch-land</span></span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier">PMutateGovernorDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Scripts</span></span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#mutateGovernorValidator"><span class="hs-identifier">mutateGovernorValidator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Const</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GHC</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/3m16k3x671sq04j9i42i5m85z4hc6yix-generics-sop-lib-generics-sop-0.5.1.2-haddock-doc/share/doc/generics-sop/html/src"><span class="hs-identifier">Generics.SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/3m16k3x671sq04j9i42i5m85z4hc6yix-generics-sop-lib-generics-sop-0.5.1.2-haddock-doc/share/doc/generics-sop/html/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/i4b5wlkbk9hq0qsg8a7nsnkqwazqb558-sop-core-lib-sop-core-0.5.0.2-haddock-doc/share/doc/sop-core/html/src"><span class="hs-identifier">I</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/i4b5wlkbk9hq0qsg8a7nsnkqwazqb558-sop-core-lib-sop-core-0.5.0.2-haddock-doc/share/doc/sop-core/html/src"><span class="hs-identifier">I</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Api.V1</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTxOutRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PValidator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/b35f340blmkgj1qmq589db02pqy3w2s4-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.1.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">Plutarch.Api.V1.ScriptContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/b35f340blmkgj1qmq589db02pqy3w2s4-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.1.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">ptryFindDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-string">&quot;liqwid-plutarch-extra&quot;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Api.V1.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/b35f340blmkgj1qmq589db02pqy3w2s4-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.1.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier">pvalueOf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.DataRepr</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">DerivePConstantViaData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PDataFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PIsDataReprInstances</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PIsDataReprInstances</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier">Plutarch.Extra.TermCont</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier">pguardC</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Lift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PConstantDecl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PLifted</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PUnsafeLiftDecl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.TryFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">PTryFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">Plutarch.Unsafe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier">punsafeCoerce</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">PlutusLedgerApi.V1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">TxOutRef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">PlutusLedgerApi.V1.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier">AssetClass</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/gpgkl8qqa5x8mrqhgnb52a1l9axlhdd3-plutus-tx-lib-plutus-tx-1.0.0.0-haddock-doc/share/doc/plutus-tx/html/src"><span class="hs-identifier">PlutusTx</span></a></span><span> </span><span class="hs-keyword">qualified</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agora.Effect.html"><span class="hs-identifier">Agora.Effect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agora.Effect.html#makeEffect"><span class="hs-identifier">makeEffect</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agora.Governor.html"><span class="hs-identifier">Agora.Governor</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><a href="Agora.Governor.html#Governor"><span class="hs-identifier">Governor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Agora.Governor.html#GovernorDatum"><span class="hs-identifier">GovernorDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><a href="Agora.Governor.html#PGovernorDatum"><span class="hs-identifier">PGovernorDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Agora.Governor.html#governorDatumValid"><span class="hs-identifier">governorDatumValid</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agora.Governor.Scripts.html"><span class="hs-identifier">Agora.Governor.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Agora.Governor.Scripts.html#authorityTokenSymbolFromGovernor"><span class="hs-identifier">authorityTokenSymbolFromGovernor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="Agora.Governor.Scripts.html#governorSTAssetClassFromGovernor"><span class="hs-identifier">governorSTAssetClassFromGovernor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agora.Utils.html"><span class="hs-identifier">Agora.Utils</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#isScriptAddress"><span class="hs-identifier">isScriptAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#mustBePDJust"><span class="hs-identifier">mustBePDJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="Agora.Utils.html#mustBePJust"><span class="hs-identifier">mustBePJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-comment">-- | Haskell-level datum for the governor mutation effect script.</span><span>
</span><span id="line-74"></span><span id="local-6989586621679538792"><span id="local-6989586621679538793"></span></span><span class="hs-keyword">data</span><span> </span><span id="MutateGovernorDatum"><span class="annot"><a href="Agora.Effect.GovernorMutation.html#MutateGovernorDatum"><span class="hs-identifier hs-var">MutateGovernorDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MutateGovernorDatum"><span class="annot"><a href="Agora.Effect.GovernorMutation.html#MutateGovernorDatum"><span class="hs-identifier hs-var">MutateGovernorDatum</span></a></span></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="governorRef"><span class="annot"><span class="annottext">MutateGovernorDatum -&gt; TxOutRef
</span><a href="Agora.Effect.GovernorMutation.html#governorRef"><span class="hs-identifier hs-var hs-var">governorRef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">TxOutRef</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-comment">-- ^ Referenced governor state UTXO should be updated by the effect.</span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="newDatum"><span class="annot"><span class="annottext">MutateGovernorDatum -&gt; GovernorDatum
</span><a href="Agora.Effect.GovernorMutation.html#newDatum"><span class="hs-identifier hs-var hs-var">newDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agora.Governor.html#GovernorDatum"><span class="hs-identifier hs-type">GovernorDatum</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-comment">-- ^ The new settings for the governor.</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679538777"><span id="local-6989586621679538779"><span id="local-6989586621679538787"><span class="annot"><span class="annottext">Int -&gt; MutateGovernorDatum -&gt; ShowS
[MutateGovernorDatum] -&gt; ShowS
MutateGovernorDatum -&gt; String
(Int -&gt; MutateGovernorDatum -&gt; ShowS)
-&gt; (MutateGovernorDatum -&gt; String)
-&gt; ([MutateGovernorDatum] -&gt; ShowS)
-&gt; Show MutateGovernorDatum
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MutateGovernorDatum] -&gt; ShowS
$cshowList :: [MutateGovernorDatum] -&gt; ShowS
show :: MutateGovernorDatum -&gt; String
$cshow :: MutateGovernorDatum -&gt; String
showsPrec :: Int -&gt; MutateGovernorDatum -&gt; ShowS
$cshowsPrec :: Int -&gt; MutateGovernorDatum -&gt; ShowS
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. MutateGovernorDatum -&gt; Rep MutateGovernorDatum x)
-&gt; (forall x. Rep MutateGovernorDatum x -&gt; MutateGovernorDatum)
-&gt; Generic MutateGovernorDatum
forall x. Rep MutateGovernorDatum x -&gt; MutateGovernorDatum
forall x. MutateGovernorDatum -&gt; Rep MutateGovernorDatum x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep MutateGovernorDatum x -&gt; MutateGovernorDatum
$cfrom :: forall x. MutateGovernorDatum -&gt; Rep MutateGovernorDatum x
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">GHC.Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679538766"><span id="local-6989586621679538768"><span class="annot"><span class="annottext">All @[Type] (SListI @Type) (Code MutateGovernorDatum)
All @[Type] (SListI @Type) (Code MutateGovernorDatum)
-&gt; (MutateGovernorDatum -&gt; Rep MutateGovernorDatum)
-&gt; (Rep MutateGovernorDatum -&gt; MutateGovernorDatum)
-&gt; Generic MutateGovernorDatum
Rep MutateGovernorDatum -&gt; MutateGovernorDatum
MutateGovernorDatum -&gt; Rep MutateGovernorDatum
forall a.
All @[Type] (SListI @Type) (Code a)
-&gt; (a -&gt; Rep a) -&gt; (Rep a -&gt; a) -&gt; Generic a
to :: Rep MutateGovernorDatum -&gt; MutateGovernorDatum
$cto :: Rep MutateGovernorDatum -&gt; MutateGovernorDatum
from :: MutateGovernorDatum -&gt; Rep MutateGovernorDatum
$cfrom :: MutateGovernorDatum -&gt; Rep MutateGovernorDatum
</span><a href="../file:///nix/store/3m16k3x671sq04j9i42i5m85z4hc6yix-generics-sop-lib-generics-sop-0.5.1.2-haddock-doc/share/doc/generics-sop/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span id="local-6989586621679538749"><span id="local-6989586621679538751"><span id="local-6989586621679538757"><span class="hs-identifier">PlutusTx.makeIsDataIndexed</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">MutateGovernorDatum</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier">MutateGovernorDatum</span><span class="hs-special">,</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">-- | Plutarch-level version of 'MutateGovernorDatum'.</span><span>
</span><span id="line-88"></span><span id="local-6989586621679538685"><span id="local-6989586621679538686"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="PMutateGovernorDatum"><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-var">PMutateGovernorDatum</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679539304"><span class="annot"><a href="#local-6989586621679539304"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PMutateGovernorDatum"><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-var">PMutateGovernorDatum</span></a></span></span><span>
</span><span id="line-90"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span>
</span><span id="line-91"></span><span>          </span><span class="annot"><a href="#local-6989586621679539304"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-92"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PDataRecord</span></a></span><span>
</span><span id="line-93"></span><span>              </span><span class="hs-special">'</span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;governorRef&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:=</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTxOutRef</span></a></span><span>
</span><span id="line-94"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;newDatum&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:=</span><span> </span><span class="annot"><a href="Agora.Governor.html#PGovernorDatum"><span class="hs-identifier hs-type">PGovernorDatum</span></a></span><span>
</span><span id="line-95"></span><span>               </span><span class="hs-special">]</span><span>
</span><span id="line-96"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x.
 PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s) x)
-&gt; (forall x.
    Rep (PMutateGovernorDatum s) x -&gt; PMutateGovernorDatum s)
-&gt; Generic (PMutateGovernorDatum s)
forall x. Rep (PMutateGovernorDatum s) x -&gt; PMutateGovernorDatum s
forall x. PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall (s :: S) x.
Rep (PMutateGovernorDatum s) x -&gt; PMutateGovernorDatum s
forall (s :: S) x.
PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s) x
$cto :: forall (s :: S) x.
Rep (PMutateGovernorDatum s) x -&gt; PMutateGovernorDatum s
$cfrom :: forall (s :: S) x.
PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s) x
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">GHC.Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679538675"><span id="local-6989586621679538677"><span class="annot"><span class="annottext">All @[Type] (SListI @Type) (Code (PMutateGovernorDatum s))
All @[Type] (SListI @Type) (Code (PMutateGovernorDatum s))
-&gt; (PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s))
-&gt; (Rep (PMutateGovernorDatum s) -&gt; PMutateGovernorDatum s)
-&gt; Generic (PMutateGovernorDatum s)
Rep (PMutateGovernorDatum s) -&gt; PMutateGovernorDatum s
PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s)
forall a.
All @[Type] (SListI @Type) (Code a)
-&gt; (a -&gt; Rep a) -&gt; (Rep a -&gt; a) -&gt; Generic a
forall {s :: S}.
All @[Type] (SListI @Type) (Code (PMutateGovernorDatum s))
forall (s :: S).
Rep (PMutateGovernorDatum s) -&gt; PMutateGovernorDatum s
forall (s :: S).
PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s)
to :: Rep (PMutateGovernorDatum s) -&gt; PMutateGovernorDatum s
$cto :: forall (s :: S).
Rep (PMutateGovernorDatum s) -&gt; PMutateGovernorDatum s
from :: PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s)
$cfrom :: forall (s :: S).
PMutateGovernorDatum s -&gt; Rep (PMutateGovernorDatum s)
</span><a href="#local-6989586621679538675"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679538661"><span id="local-6989586621679538663"><span class="annot"><span class="annottext">PIsData PMutateGovernorDatum
PlutusType PMutateGovernorDatum
PlutusType PMutateGovernorDatum
-&gt; PIsData PMutateGovernorDatum
-&gt; (forall (s :: S).
    PMutateGovernorDatum s
    -&gt; Term s (PDataSum (PIsDataReprRepr PMutateGovernorDatum)))
-&gt; (forall (s :: S) (b :: PType).
    Term s (PDataSum (PIsDataReprRepr PMutateGovernorDatum))
    -&gt; (PMutateGovernorDatum s -&gt; Term s b) -&gt; Term s b)
-&gt; PIsDataRepr PMutateGovernorDatum
forall (s :: S).
PMutateGovernorDatum s
-&gt; Term s (PDataSum (PIsDataReprRepr PMutateGovernorDatum))
forall (s :: S) (b :: PType).
Term s (PDataSum (PIsDataReprRepr PMutateGovernorDatum))
-&gt; (PMutateGovernorDatum s -&gt; Term s b) -&gt; Term s b
forall (a :: PType).
PlutusType a
-&gt; PIsData a
-&gt; (forall (s :: S). a s -&gt; Term s (PDataSum (PIsDataReprRepr a)))
-&gt; (forall (s :: S) (b :: PType).
    Term s (PDataSum (PIsDataReprRepr a))
    -&gt; (a s -&gt; Term s b) -&gt; Term s b)
-&gt; PIsDataRepr a
pmatchRepr :: forall (s :: S) (b :: PType).
Term s (PDataSum (PIsDataReprRepr PMutateGovernorDatum))
-&gt; (PMutateGovernorDatum s -&gt; Term s b) -&gt; Term s b
$cpmatchRepr :: forall (s :: S) (b :: PType).
Term s (PDataSum (PIsDataReprRepr PMutateGovernorDatum))
-&gt; (PMutateGovernorDatum s -&gt; Term s b) -&gt; Term s b
pconRepr :: forall (s :: S).
PMutateGovernorDatum s
-&gt; Term s (PDataSum (PIsDataReprRepr PMutateGovernorDatum))
$cpconRepr :: forall (s :: S).
PMutateGovernorDatum s
-&gt; Term s (PDataSum (PIsDataReprRepr PMutateGovernorDatum))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">PIsDataRepr</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679538643"><span id="local-6989586621679538650"><span class="annot"><span class="annottext">PCon PMutateGovernorDatum
PMatch PMutateGovernorDatum
PCon PMutateGovernorDatum
-&gt; PMatch PMutateGovernorDatum
-&gt; (forall (s :: S) (b :: PType).
    PMutateGovernorDatum s -&gt; Term s (PInner PMutateGovernorDatum b))
-&gt; (forall (s :: S) (b :: PType).
    Term s (PInner PMutateGovernorDatum b)
    -&gt; (PMutateGovernorDatum s -&gt; Term s b) -&gt; Term s b)
-&gt; PlutusType PMutateGovernorDatum
forall (s :: S) (b :: PType).
Term s (PInner PMutateGovernorDatum b)
-&gt; (PMutateGovernorDatum s -&gt; Term s b) -&gt; Term s b
forall (s :: S) (b :: PType).
PMutateGovernorDatum s -&gt; Term s (PInner PMutateGovernorDatum b)
forall (a :: PType).
PCon a
-&gt; PMatch a
-&gt; (forall (s :: S) (b :: PType). a s -&gt; Term s (PInner a b))
-&gt; (forall (s :: S) (b :: PType).
    Term s (PInner a b) -&gt; (a s -&gt; Term s b) -&gt; Term s b)
-&gt; PlutusType a
pmatch' :: forall (s :: S) (b :: PType).
Term s (PInner PMutateGovernorDatum b)
-&gt; (PMutateGovernorDatum s -&gt; Term s b) -&gt; Term s b
$cpmatch' :: forall (s :: S) (b :: PType).
Term s (PInner PMutateGovernorDatum b)
-&gt; (PMutateGovernorDatum s -&gt; Term s b) -&gt; Term s b
pcon' :: forall (s :: S) (b :: PType).
PMutateGovernorDatum s -&gt; Term s (PInner PMutateGovernorDatum b)
$cpcon' :: forall (s :: S) (b :: PType).
PMutateGovernorDatum s -&gt; Term s (PInner PMutateGovernorDatum b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">PlutusType</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679538630"><span id="local-6989586621679538636"><span class="annot"><span class="annottext">(forall (s :: S).
 Term s (PAsData PMutateGovernorDatum)
 -&gt; Term s PMutateGovernorDatum)
-&gt; (forall (s :: S). Term s PMutateGovernorDatum -&gt; Term s PData)
-&gt; PIsData PMutateGovernorDatum
forall (s :: S).
Term s (PAsData PMutateGovernorDatum)
-&gt; Term s PMutateGovernorDatum
forall (s :: S). Term s PMutateGovernorDatum -&gt; Term s PData
forall (a :: PType).
(forall (s :: S). Term s (PAsData a) -&gt; Term s a)
-&gt; (forall (s :: S). Term s a -&gt; Term s PData) -&gt; PIsData a
pdataImpl :: forall (s :: S). Term s PMutateGovernorDatum -&gt; Term s PData
$cpdataImpl :: forall (s :: S). Term s PMutateGovernorDatum -&gt; Term s PData
pfromDataImpl :: forall (s :: S).
Term s (PAsData PMutateGovernorDatum)
-&gt; Term s PMutateGovernorDatum
$cpfromDataImpl :: forall (s :: S).
Term s (PAsData PMutateGovernorDatum)
-&gt; Term s PMutateGovernorDatum
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">PIsData</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679538624"><span class="annot"><span class="annottext">(forall (s :: S).
 Term s PMutateGovernorDatum
 -&gt; Term s (PDataRecord (PFields PMutateGovernorDatum)))
-&gt; PDataFields PMutateGovernorDatum
forall (s :: S).
Term s PMutateGovernorDatum
-&gt; Term s (PDataRecord (PFields PMutateGovernorDatum))
forall (a :: PType).
(forall (s :: S). Term s a -&gt; Term s (PDataRecord (PFields a)))
-&gt; PDataFields a
ptoFields :: forall (s :: S).
Term s PMutateGovernorDatum
-&gt; Term s (PDataRecord (PFields PMutateGovernorDatum))
$cptoFields :: forall (s :: S).
Term s PMutateGovernorDatum
-&gt; Term s (PDataRecord (PFields PMutateGovernorDatum))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">PDataFields</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679538611"><span class="annot"><span class="annottext">(forall (s :: S).
 Term s PMutateGovernorDatum
 -&gt; Term s PMutateGovernorDatum -&gt; Term s PBool)
-&gt; PEq PMutateGovernorDatum
forall (s :: S).
Term s PMutateGovernorDatum
-&gt; Term s PMutateGovernorDatum -&gt; Term s PBool
forall (t :: PType).
(forall (s :: S). Term s t -&gt; Term s t -&gt; Term s PBool) -&gt; PEq t
#== :: forall (s :: S).
Term s PMutateGovernorDatum
-&gt; Term s PMutateGovernorDatum -&gt; Term s PBool
$c#== :: forall (s :: S).
Term s PMutateGovernorDatum
-&gt; Term s PMutateGovernorDatum -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">PEq</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PIsDataReprInstances</span></a></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-type">PMutateGovernorDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PUnsafeLiftDecl</span></a></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-type">PMutateGovernorDatum</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span class="hs-keyword">type</span><span> </span><span id="PLifted"><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PLifted</span></a></span></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-type">PMutateGovernorDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#MutateGovernorDatum"><span class="hs-identifier hs-type">MutateGovernorDatum</span></a></span><span>
</span><span id="line-106"></span><span id="local-6989586621679538578"><span id="local-6989586621679538588"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">DerivePConstantViaData</span></a></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#MutateGovernorDatum"><span class="hs-identifier hs-type">MutateGovernorDatum</span></a></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-type">PMutateGovernorDatum</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PConstantDecl</span></a></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#MutateGovernorDatum"><span class="hs-identifier hs-type">MutateGovernorDatum</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- TODO: Derive this.</span><span>
</span><span id="line-109"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PTryFrom</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-type">PMutateGovernorDatum</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PTryFromExcess"><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">PTryFromExcess</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PAsData</span></a></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-type">PMutateGovernorDatum</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>  </span><span id="local-6989586621679538556"><span class="annot"><span class="annottext">ptryFrom' :: forall (s :: S) (r :: PType).
Term s PData
-&gt; ((Term s (PAsData PMutateGovernorDatum),
     Reduce
       @Type (PTryFromExcess PData (PAsData PMutateGovernorDatum) s))
    -&gt; Term s r)
-&gt; Term s r
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">ptryFrom'</span></a></span></span><span> </span><span id="local-6989586621679538554"><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679538554"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679538553"><span class="annot"><span class="annottext">(Term s (PAsData PMutateGovernorDatum),
 Reduce
   @Type (PTryFromExcess PData (PAsData PMutateGovernorDatum) s))
-&gt; Term s r
</span><a href="#local-6989586621679538553"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><span class="annottext">(Term s (PAsData PMutateGovernorDatum),
 Reduce
   @Type (PTryFromExcess PData (PAsData PMutateGovernorDatum) s))
-&gt; Term s r
</span><a href="#local-6989586621679538553"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s PData -&gt; Term s (PAsData PMutateGovernorDatum)
forall (s :: S) (a :: PType) (b :: PType). Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679538554"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="hs-comment">{- | Validator for the governor mutation effect.

  This effect is implemented using the 'Agora.Effect.makeEffect' wrapper,
   meaning that the burning of GAT is checked in said wrapper.

  In order to locate the governor, the validator is parametrized with a 'Agora.Governor.Governor'.

  All the information it needs to validate the effect is encoded in the 'MutateGovernorDatum',
   so regardless what redeemer it's given, it will check:

  - No token is minted/burnt other than GAT.
  - Nothing is being paid to the the effect validator.
  - The governor's state UTXO must be spent:

      * It carries exactly one GST.
      * It's referenced by 'governorRef' in the effect's datum.

  - A new state UTXO is paid to the governor:

      * It contains the GST.
      * It has valid governor state datum.
      * The datum is exactly the same as the 'newDatum'.
-}</span><span>
</span><span id="line-139"></span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#mutateGovernorValidator"><span class="hs-identifier hs-type">mutateGovernorValidator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agora.Governor.html#Governor"><span class="hs-identifier hs-type">Governor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">ClosedTerm</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValidator</span></a></span><span>
</span><span id="line-140"></span><span id="mutateGovernorValidator"><span class="annot"><span class="annottext">mutateGovernorValidator :: Governor -&gt; ClosedTerm PValidator
</span><a href="Agora.Effect.GovernorMutation.html#mutateGovernorValidator"><span class="hs-identifier hs-var hs-var">mutateGovernorValidator</span></a></span></span><span> </span><span id="local-6989586621679538550"><span class="annot"><span class="annottext">Governor
</span><a href="#local-6989586621679538550"><span class="hs-identifier hs-var">gov</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CurrencySymbol
-&gt; (forall (s :: S).
    Term s PCurrencySymbol
    -&gt; Term s PMutateGovernorDatum
    -&gt; Term s PTxOutRef
    -&gt; Term s (PAsData PTxInfo)
    -&gt; Term s POpaque)
-&gt; ClosedTerm PValidator
forall (datum :: PType).
(PIsData datum, PTryFrom PData (PAsData datum)) =&gt;
CurrencySymbol
-&gt; (forall (s :: S).
    Term s PCurrencySymbol
    -&gt; Term s datum
    -&gt; Term s PTxOutRef
    -&gt; Term s (PAsData PTxInfo)
    -&gt; Term s POpaque)
-&gt; ClosedTerm PValidator
</span><a href="Agora.Effect.html#makeEffect"><span class="hs-identifier hs-var">makeEffect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Governor -&gt; CurrencySymbol
</span><a href="Agora.Governor.Scripts.html#authorityTokenSymbolFromGovernor"><span class="hs-identifier hs-var">authorityTokenSymbolFromGovernor</span></a></span><span> </span><span class="annot"><span class="annottext">Governor
</span><a href="#local-6989586621679538550"><span class="hs-identifier hs-var">gov</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term s PCurrencySymbol
  -&gt; Term s PMutateGovernorDatum
  -&gt; Term s PTxOutRef
  -&gt; Term s (PAsData PTxInfo)
  -&gt; Term s POpaque)
 -&gt; ClosedTerm PValidator)
-&gt; (forall (s :: S).
    Term s PCurrencySymbol
    -&gt; Term s PMutateGovernorDatum
    -&gt; Term s PTxOutRef
    -&gt; Term s (PAsData PTxInfo)
    -&gt; Term s POpaque)
-&gt; ClosedTerm PValidator
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-glyph">\</span><span id="local-6989586621679538292"><span class="annot"><span class="annottext">Term s PCurrencySymbol
</span><a href="#local-6989586621679538292"><span class="hs-identifier hs-var">_gatCs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679538291"><span class="annot"><span class="annottext">Term s PMutateGovernorDatum
</span><a href="#local-6989586621679538291"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agora.Effect.GovernorMutation.html#PMutateGovernorDatum"><span class="hs-identifier hs-type">PMutateGovernorDatum</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s PTxOutRef
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679538290"><span class="annot"><span class="annottext">Term s (PAsData PTxInfo)
</span><a href="#local-6989586621679538290"><span class="hs-identifier hs-var">txInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont @POpaque s (Term s POpaque) -&gt; Term s POpaque
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @POpaque s (Term s POpaque) -&gt; Term s POpaque)
-&gt; TermCont @POpaque s (Term s POpaque) -&gt; Term s POpaque
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>    </span><span id="local-6989586621679538288"><span class="annot"><span class="annottext">HRec
  ((':)
     @(Symbol, Type)
     '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
     ((':)
        @(Symbol, Type)
        '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
        ('[] @(Symbol, Type))))
</span><a href="#local-6989586621679538288"><span class="hs-identifier hs-var">datumF</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((HRec
    ((':)
       @(Symbol, Type)
       '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
       ((':)
          @(Symbol, Type)
          '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
          ('[] @(Symbol, Type))))
  -&gt; Term s POpaque)
 -&gt; Term s POpaque)
-&gt; TermCont
     @POpaque
     s
     (HRec
        ((':)
           @(Symbol, Type)
           '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
           ((':)
              @(Symbol, Type)
              '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
              ('[] @(Symbol, Type)))))
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">(((HRec
     ((':)
        @(Symbol, Type)
        '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
        ((':)
           @(Symbol, Type)
           '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
           ('[] @(Symbol, Type))))
   -&gt; Term s POpaque)
  -&gt; Term s POpaque)
 -&gt; TermCont
      @POpaque
      s
      (HRec
         ((':)
            @(Symbol, Type)
            '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
            ((':)
               @(Symbol, Type)
               '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
               ('[] @(Symbol, Type))))))
-&gt; ((HRec
       ((':)
          @(Symbol, Type)
          '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
          ((':)
             @(Symbol, Type)
             '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
             ('[] @(Symbol, Type))))
     -&gt; Term s POpaque)
    -&gt; Term s POpaque)
-&gt; TermCont
     @POpaque
     s
     (HRec
        ((':)
           @(Symbol, Type)
           '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
           ((':)
              @(Symbol, Type)
              '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
              ('[] @(Symbol, Type)))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (fs :: [Symbol]) (a :: PType) (s :: S) (b :: PType)
       (ps :: [PLabeledType]) (bs :: [ToBind]).
(PDataFields a,
 (ps :: [PLabeledType]) ~ (PFields a :: [PLabeledType]),
 (bs :: [ToBind]) ~ (Bindings ps fs :: [ToBind]),
 BindFields ps bs) =&gt;
Term s a -&gt; (HRecOf a fs s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pletFields</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;newDatum&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;governorRef&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Term s PMutateGovernorDatum
</span><a href="#local-6989586621679538291"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span id="local-6989586621679538285"><span class="annot"><span class="annottext">HRec
  ((':)
     @(Symbol, Type)
     '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
     ((':)
        @(Symbol, Type)
        '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
        ((':)
           @(Symbol, Type)
           '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
           ((':)
              @(Symbol, Type)
              '(&quot;datums&quot;,
                Term
                  s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
              ('[] @(Symbol, Type))))))
</span><a href="#local-6989586621679538285"><span class="hs-identifier hs-var">txInfoF</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((HRec
    ((':)
       @(Symbol, Type)
       '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
       ((':)
          @(Symbol, Type)
          '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
          ((':)
             @(Symbol, Type)
             '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
             ((':)
                @(Symbol, Type)
                '(&quot;datums&quot;,
                  Term
                    s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
                ('[] @(Symbol, Type))))))
  -&gt; Term s POpaque)
 -&gt; Term s POpaque)
-&gt; TermCont
     @POpaque
     s
     (HRec
        ((':)
           @(Symbol, Type)
           '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
           ((':)
              @(Symbol, Type)
              '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
              ((':)
                 @(Symbol, Type)
                 '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
                 ((':)
                    @(Symbol, Type)
                    '(&quot;datums&quot;,
                      Term
                        s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
                    ('[] @(Symbol, Type)))))))
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">(((HRec
     ((':)
        @(Symbol, Type)
        '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
        ((':)
           @(Symbol, Type)
           '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
           ((':)
              @(Symbol, Type)
              '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
              ((':)
                 @(Symbol, Type)
                 '(&quot;datums&quot;,
                   Term
                     s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
                 ('[] @(Symbol, Type))))))
   -&gt; Term s POpaque)
  -&gt; Term s POpaque)
 -&gt; TermCont
      @POpaque
      s
      (HRec
         ((':)
            @(Symbol, Type)
            '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
            ((':)
               @(Symbol, Type)
               '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
               ((':)
                  @(Symbol, Type)
                  '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
                  ((':)
                     @(Symbol, Type)
                     '(&quot;datums&quot;,
                       Term
                         s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
                     ('[] @(Symbol, Type))))))))
-&gt; ((HRec
       ((':)
          @(Symbol, Type)
          '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
          ((':)
             @(Symbol, Type)
             '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
             ((':)
                @(Symbol, Type)
                '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
                ((':)
                   @(Symbol, Type)
                   '(&quot;datums&quot;,
                     Term
                       s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
                   ('[] @(Symbol, Type))))))
     -&gt; Term s POpaque)
    -&gt; Term s POpaque)
-&gt; TermCont
     @POpaque
     s
     (HRec
        ((':)
           @(Symbol, Type)
           '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
           ((':)
              @(Symbol, Type)
              '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
              ((':)
                 @(Symbol, Type)
                 '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
                 ((':)
                    @(Symbol, Type)
                    '(&quot;datums&quot;,
                      Term
                        s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
                    ('[] @(Symbol, Type)))))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (fs :: [Symbol]) (a :: PType) (s :: S) (b :: PType)
       (ps :: [PLabeledType]) (bs :: [ToBind]).
(PDataFields a,
 (ps :: [PLabeledType]) ~ (PFields a :: [PLabeledType]),
 (bs :: [ToBind]) ~ (Bindings ps fs :: [ToBind]),
 BindFields ps bs) =&gt;
Term s a -&gt; (HRecOf a fs s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pletFields</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;mint&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;inputs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;outputs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;datums&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PTxInfo)
</span><a href="#local-6989586621679538290"><span class="hs-identifier hs-var">txInfo</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679538284"><span class="hs-identifier hs-type">mint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>        </span><span id="local-6989586621679538284"><span class="annot"><span class="annottext">mint :: Term
  s
  (PBuiltinList
     (PBuiltinPair
        (PAsData PCurrencySymbol)
        (PAsData (PMap 'Sorted PTokenName (PInteger @S)))))
</span><a href="#local-6989586621679538284"><span class="hs-identifier hs-var hs-var">mint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PInner
     (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) (Any @PType))
-&gt; forall (b :: PType).
   Term
     s
     (PInner
        (PInner
           (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) (Any @PType))
        b)
forall (s :: S) (a :: PType).
Term s a -&gt; forall (b :: PType). Term s (PInner a b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">(Term
   s
   (PInner
      (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) (Any @PType))
 -&gt; forall (b :: PType).
    Term
      s
      (PInner
         (PInner
            (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) (Any @PType))
         b))
-&gt; Term
     s
     (PInner
        (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) (Any @PType))
-&gt; forall (b :: PType).
   Term
     s
     (PInner
        (PInner
           (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) (Any @PType))
        b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType))
-&gt; forall (b :: PType).
   Term
     s (PInner (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) b)
forall (s :: S) (a :: PType).
Term s a -&gt; forall (b :: PType). Term s (PInner a b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType))
 -&gt; forall (b :: PType).
    Term
      s (PInner (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) b))
-&gt; Term s (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType))
-&gt; forall (b :: PType).
   Term
     s (PInner (PInner (PValue 'Sorted 'NoGuarantees) (Any @PType)) b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue 'Sorted 'NoGuarantees)
-&gt; forall (b :: PType).
   Term s (PInner (PValue 'Sorted 'NoGuarantees) b)
forall (s :: S) (a :: PType).
Term s a -&gt; forall (b :: PType). Term s (PInner a b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PValue 'Sorted 'NoGuarantees)
 -&gt; forall (b :: PType).
    Term s (PInner (PValue 'Sorted 'NoGuarantees) b))
-&gt; Term s (PValue 'Sorted 'NoGuarantees)
-&gt; forall (b :: PType).
   Term s (PInner (PValue 'Sorted 'NoGuarantees) b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PValue 'Sorted 'NoGuarantees))
-&gt; Term s (PValue 'Sorted 'NoGuarantees)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">HRec
  ((':)
     @(Symbol, Type)
     '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
     ((':)
        @(Symbol, Type)
        '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
        ((':)
           @(Symbol, Type)
           '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
           ((':)
              @(Symbol, Type)
              '(&quot;datums&quot;,
                Term
                  s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
              ('[] @(Symbol, Type))))))
</span><a href="#local-6989586621679538285"><span class="hs-identifier hs-var">txInfoF</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">mint</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall {r :: PType} (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier hs-var">pguardC</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Nothing should be minted/burnt other than GAT&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @POpaque s ())
-&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-149"></span><span>      </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList
     (PBuiltinPair
        (PAsData PCurrencySymbol)
        (PAsData (PMap 'Sorted PTokenName (PInteger @S))))
   :--&gt; PInteger @S)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PInteger @S)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plength</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList
     (PBuiltinPair
        (PAsData PCurrencySymbol)
        (PAsData (PMap 'Sorted PTokenName (PInteger @S))))
   :--&gt; PInteger @S)
-&gt; Term
     s
     (PBuiltinList
        (PBuiltinPair
           (PAsData PCurrencySymbol)
           (PAsData (PMap 'Sorted PTokenName (PInteger @S)))))
-&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList
     (PBuiltinPair
        (PAsData PCurrencySymbol)
        (PAsData (PMap 'Sorted PTokenName (PInteger @S)))))
</span><a href="#local-6989586621679538284"><span class="hs-identifier hs-var">mint</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><span class="hs-number">1</span></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-comment">-- Only two script inputs are alloed: one from the effect, one from the governor.</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall {r :: PType} (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier hs-var">pguardC</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Only self and governor script inputs are allowed&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @POpaque s ())
-&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-153"></span><span>      </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData PTxInInfo :--&gt; (PInteger @S :--&gt; PInteger @S))
   :--&gt; (PInteger @S
         :--&gt; (PBuiltinList (PAsData PTxInInfo) :--&gt; PInteger @S)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (b :: PType).
PIsListLike list a =&gt;
Term s ((a :--&gt; (b :--&gt; b)) :--&gt; (b :--&gt; (list a :--&gt; b)))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfoldr</span></a></span><span class="hs-cpp">
        # phoistAcyclic
</span><span>          </span><span class="hs-special">(</span><span> </span><span class="hs-identifier">plam</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">inInfo</span><span> </span><span class="hs-identifier">count</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-156"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span class="hs-identifier">address</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pfield</span><span> </span><span class="hs-glyph">@</span><span class="hs-string">&quot;address&quot;</span><span> </span><span class="hs-operator">#$</span><span> </span><span class="hs-identifier">pfield</span><span> </span><span class="hs-glyph">@</span><span class="hs-string">&quot;resolved&quot;</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">inInfo</span><span>
</span><span id="line-157"></span><span>               </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier">pif</span><span>
</span><span id="line-158"></span><span>                    </span><span class="hs-special">(</span><span class="hs-identifier">isScriptAddress</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">address</span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>                    </span><span class="hs-special">(</span><span class="hs-identifier">count</span><span> </span><span class="hs-operator">+</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>                    </span><span class="hs-identifier">count</span><span>
</span><span id="line-161"></span><span>          </span><span class="hs-special">)</span><span class="hs-cpp">
        # (0 :: Term _ PInteger)
</span><span class="hs-cpp">        # pfromData txInfoF.inputs
</span><span class="hs-cpp">        #== 2
</span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-comment">-- Find the governor input by looking for GST.</span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679538227"><span class="annot"><span class="annottext">inputWithGST :: Term s (PAsData PTxInInfo)
</span><a href="#local-6989586621679538227"><span class="hs-identifier hs-var hs-var">inputWithGST</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-168"></span><span>          </span><span class="annot"><span class="annottext">Term
  s
  (PString @S
   :--&gt; (PMaybe (PAsData PTxInInfo) :--&gt; PAsData PTxInInfo))
forall (a :: PType) (s :: S).
Term s (PString @S :--&gt; (PMaybe a :--&gt; a))
</span><a href="Agora.Utils.html#mustBePJust"><span class="hs-identifier hs-var">mustBePJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PString @S
   :--&gt; (PMaybe (PAsData PTxInInfo) :--&gt; PAsData PTxInInfo))
-&gt; Term s (PString @S)
-&gt; Term s (PMaybe (PAsData PTxInInfo) :--&gt; PAsData PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Governor input not found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe (PAsData PTxInInfo) :--&gt; PAsData PTxInInfo)
-&gt; Term s (PMaybe (PAsData PTxInInfo))
-&gt; Term s (PAsData PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData PTxInInfo :--&gt; PBool)
   :--&gt; (PBuiltinList (PAsData PTxInInfo)
         :--&gt; PMaybe (PAsData PTxInInfo)))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; PBool) :--&gt; (l a :--&gt; PMaybe a))
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfind</span></a></span><span class="hs-cpp">
            # phoistAcyclic
</span><span>              </span><span class="hs-special">(</span><span> </span><span class="hs-identifier">plam</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">inInfo</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-171"></span><span>                  </span><span class="hs-keyword">let</span><span> </span><span class="hs-identifier">value</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pfield</span><span> </span><span class="hs-glyph">@</span><span class="hs-string">&quot;value&quot;</span><span> </span><span class="hs-operator">#$</span><span> </span><span class="hs-identifier">pfield</span><span> </span><span class="hs-glyph">@</span><span class="hs-string">&quot;resolved&quot;</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">inInfo</span><span>
</span><span id="line-172"></span><span>                   </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier">gstValueOf</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">value</span><span> </span><span class="hs-operator">#==</span><span> </span><span class="hs-number">1</span><span>
</span><span id="line-173"></span><span>              </span><span class="hs-special">)</span><span class="hs-cpp">
            # pfromData txInfoF.inputs
</span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621679538201"><span class="annot"><span class="annottext">HRec
  (BoundTerms
     (PFields (PAsData PTxInInfo))
     (Bindings
        (PFields (PAsData PTxInInfo))
        ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
     s)
</span><a href="#local-6989586621679538201"><span class="hs-identifier hs-var">govInInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((HRec
    (BoundTerms
       (PFields (PAsData PTxInInfo))
       (Bindings
          (PFields (PAsData PTxInInfo))
          ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
       s)
  -&gt; Term s POpaque)
 -&gt; Term s POpaque)
-&gt; TermCont
     @POpaque
     s
     (HRec
        (BoundTerms
           (PFields (PAsData PTxInInfo))
           (Bindings
              (PFields (PAsData PTxInInfo))
              ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
           s))
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">(((HRec
     (BoundTerms
        (PFields (PAsData PTxInInfo))
        (Bindings
           (PFields (PAsData PTxInInfo))
           ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
        s)
   -&gt; Term s POpaque)
  -&gt; Term s POpaque)
 -&gt; TermCont
      @POpaque
      s
      (HRec
         (BoundTerms
            (PFields (PAsData PTxInInfo))
            (Bindings
               (PFields (PAsData PTxInInfo))
               ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
            s)))
-&gt; ((HRec
       (BoundTerms
          (PFields (PAsData PTxInInfo))
          (Bindings
             (PFields (PAsData PTxInInfo))
             ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
          s)
     -&gt; Term s POpaque)
    -&gt; Term s POpaque)
-&gt; TermCont
     @POpaque
     s
     (HRec
        (BoundTerms
           (PFields (PAsData PTxInInfo))
           (Bindings
              (PFields (PAsData PTxInInfo))
              ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
           s))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (fs :: [Symbol]) (a :: PType) (s :: S) (b :: PType)
       (ps :: [PLabeledType]) (bs :: [ToBind]).
(PDataFields a,
 (ps :: [PLabeledType]) ~ (PFields a :: [PLabeledType]),
 (bs :: [ToBind]) ~ (Bindings ps fs :: [ToBind]),
 BindFields ps bs) =&gt;
Term s a -&gt; (HRecOf a fs s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pletFields</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;outRef&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;resolved&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PTxInInfo)
 -&gt; (HRec
       (BoundTerms
          (PFields (PAsData PTxInInfo))
          (Bindings
             (PFields (PAsData PTxInInfo))
             ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
          s)
     -&gt; Term s POpaque)
 -&gt; Term s POpaque)
-&gt; Term s (PAsData PTxInInfo)
-&gt; (HRec
      (BoundTerms
         (PFields (PAsData PTxInInfo))
         (Bindings
            (PFields (PAsData PTxInInfo))
            ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
         s)
    -&gt; Term s POpaque)
-&gt; Term s POpaque
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PTxInInfo)
</span><a href="#local-6989586621679538227"><span class="hs-identifier hs-var">inputWithGST</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-comment">-- The effect can only modify the governor UTXO referenced in the datum.</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall {r :: PType} (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier hs-var">pguardC</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Can only modify the pinned governor&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @POpaque s ())
-&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-180"></span><span>      </span><span class="annot"><span class="annottext">HRec
  (BoundTerms
     (PFields (PAsData PTxInInfo))
     (Bindings
        (PFields (PAsData PTxInInfo))
        ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
     s)
</span><a href="#local-6989586621679538201"><span class="hs-identifier hs-var">govInInfo</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">outRef</span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PTxOutRef)
-&gt; Term s (PAsData PTxOutRef) -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">HRec
  ((':)
     @(Symbol, Type)
     '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
     ((':)
        @(Symbol, Type)
        '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
        ('[] @(Symbol, Type))))
</span><a href="#local-6989586621679538288"><span class="hs-identifier hs-var">datumF</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">governorRef</span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-comment">-- The transaction can only have one output, which should be sent to the governor.</span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall {r :: PType} (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier hs-var">pguardC</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Only governor output is allowed&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @POpaque s ())
-&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-184"></span><span>      </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxOut) :--&gt; PInteger @S)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PInteger @S)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plength</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxOut) :--&gt; PInteger @S)
-&gt; Term s (PBuiltinList (PAsData PTxOut)) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PBuiltinList (PAsData PTxOut)))
-&gt; Term s (PBuiltinList (PAsData PTxOut))
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">HRec
  ((':)
     @(Symbol, Type)
     '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
     ((':)
        @(Symbol, Type)
        '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
        ((':)
           @(Symbol, Type)
           '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
           ((':)
              @(Symbol, Type)
              '(&quot;datums&quot;,
                Term
                  s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
              ('[] @(Symbol, Type))))))
</span><a href="#local-6989586621679538285"><span class="hs-identifier hs-var">txInfoF</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">outputs</span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><span class="hs-number">1</span></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679538200"><span class="annot"><span class="annottext">govAddress :: Term
  s
  (PAsData
     (PUnLabel
        (IndexList
           @PLabeledType
           (PLabelIndex &quot;address&quot; (PFields (PAsData PTxOut)))
           (PFields (PAsData PTxOut)))))
</span><a href="#local-6989586621679538200"><span class="hs-identifier hs-var hs-var">govAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (p :: PType) (s :: S) (a :: PType)
       (as :: [PLabeledType]) (n :: Nat) (b :: PType).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfield</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;address&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData PTxOut
   :--&gt; PAsData
          (PUnLabel
             (IndexList
                @PLabeledType
                (PLabelIndex &quot;address&quot; (PFields (PAsData PTxOut)))
                (PFields (PAsData PTxOut)))))
-&gt; Term s (PAsData PTxOut)
-&gt; Term
     s
     (PAsData
        (PUnLabel
           (IndexList
              @PLabeledType
              (PLabelIndex &quot;address&quot; (PFields (PAsData PTxOut)))
              (PFields (PAsData PTxOut)))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">HRec
  (BoundTerms
     (PFields (PAsData PTxInInfo))
     (Bindings
        (PFields (PAsData PTxInInfo))
        ((':) @Symbol &quot;outRef&quot; ((':) @Symbol &quot;resolved&quot; ('[] @Symbol))))
     s)
</span><a href="#local-6989586621679538201"><span class="hs-identifier hs-var">govInInfo</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">resolved</span><span>
</span><span id="line-187"></span><span>        </span><span id="local-6989586621679538199"><span class="annot"><span class="annottext">govOutput' :: Term s PTxOut
</span><a href="#local-6989586621679538199"><span class="hs-identifier hs-var hs-var">govOutput'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PTxOut) -&gt; Term s PTxOut
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PTxOut) -&gt; Term s PTxOut)
-&gt; Term s (PAsData PTxOut) -&gt; Term s PTxOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxOut) :--&gt; PAsData PTxOut)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData PTxOut) :--&gt; PAsData PTxOut)
-&gt; Term s (PBuiltinList (PAsData PTxOut))
-&gt; Term s (PAsData PTxOut)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PBuiltinList (PAsData PTxOut)))
-&gt; Term s (PBuiltinList (PAsData PTxOut))
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="annot"><span class="annottext">HRec
  ((':)
     @(Symbol, Type)
     '(&quot;inputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxInInfo))))
     ((':)
        @(Symbol, Type)
        '(&quot;outputs&quot;, Term s (PAsData (PBuiltinList (PAsData PTxOut))))
        ((':)
           @(Symbol, Type)
           '(&quot;mint&quot;, Term s (PAsData (PValue 'Sorted 'NoGuarantees)))
           ((':)
              @(Symbol, Type)
              '(&quot;datums&quot;,
                Term
                  s (PAsData (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))))
              ('[] @(Symbol, Type))))))
</span><a href="#local-6989586621679538285"><span class="hs-identifier hs-var">txInfoF</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">outputs</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span>    </span><span id="local-6989586621679538197"><span class="annot"><span class="annottext">HRec
  (BoundTerms
     (PFields PTxOut)
     (Bindings
        (PFields PTxOut)
        ((':)
           @Symbol
           &quot;address&quot;
           ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
     s)
</span><a href="#local-6989586621679538197"><span class="hs-identifier hs-var">govOutput</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((HRec
    (BoundTerms
       (PFields PTxOut)
       (Bindings
          (PFields PTxOut)
          ((':)
             @Symbol
             &quot;address&quot;
             ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
       s)
  -&gt; Term s POpaque)
 -&gt; Term s POpaque)
-&gt; TermCont
     @POpaque
     s
     (HRec
        (BoundTerms
           (PFields PTxOut)
           (Bindings
              (PFields PTxOut)
              ((':)
                 @Symbol
                 &quot;address&quot;
                 ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
           s))
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">tcont</span></a></span><span> </span><span class="annot"><span class="annottext">(((HRec
     (BoundTerms
        (PFields PTxOut)
        (Bindings
           (PFields PTxOut)
           ((':)
              @Symbol
              &quot;address&quot;
              ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
        s)
   -&gt; Term s POpaque)
  -&gt; Term s POpaque)
 -&gt; TermCont
      @POpaque
      s
      (HRec
         (BoundTerms
            (PFields PTxOut)
            (Bindings
               (PFields PTxOut)
               ((':)
                  @Symbol
                  &quot;address&quot;
                  ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
            s)))
-&gt; ((HRec
       (BoundTerms
          (PFields PTxOut)
          (Bindings
             (PFields PTxOut)
             ((':)
                @Symbol
                &quot;address&quot;
                ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
          s)
     -&gt; Term s POpaque)
    -&gt; Term s POpaque)
-&gt; TermCont
     @POpaque
     s
     (HRec
        (BoundTerms
           (PFields PTxOut)
           (Bindings
              (PFields PTxOut)
              ((':)
                 @Symbol
                 &quot;address&quot;
                 ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
           s))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (fs :: [Symbol]) (a :: PType) (s :: S) (b :: PType)
       (ps :: [PLabeledType]) (bs :: [ToBind]).
(PDataFields a,
 (ps :: [PLabeledType]) ~ (PFields a :: [PLabeledType]),
 (bs :: [ToBind]) ~ (Bindings ps fs :: [ToBind]),
 BindFields ps bs) =&gt;
Term s a -&gt; (HRecOf a fs s -&gt; Term s b) -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pletFields</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;address&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;value&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;datumHash&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679538199"><span class="hs-identifier hs-var">govOutput'</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall {r :: PType} (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier hs-var">pguardC</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;No output to the governor&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @POpaque s ())
-&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><span class="annottext">HRec
  (BoundTerms
     (PFields PTxOut)
     (Bindings
        (PFields PTxOut)
        ((':)
           @Symbol
           &quot;address&quot;
           ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
     s)
</span><a href="#local-6989586621679538197"><span class="hs-identifier hs-var">govOutput</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">address</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData
     (PUnLabel
        (IndexList
           @PLabeledType
           (PLabelIndex &quot;address&quot; (PFields (PAsData PTxOut)))
           (PFields (PAsData PTxOut)))))
-&gt; Term
     s
     (PAsData
        (PUnLabel
           (IndexList
              @PLabeledType
              (PLabelIndex &quot;address&quot; (PFields (PAsData PTxOut)))
              (PFields (PAsData PTxOut)))))
-&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData
     (PUnLabel
        (IndexList
           @PLabeledType
           (PLabelIndex &quot;address&quot; (PFields (PAsData PTxOut)))
           (PFields (PAsData PTxOut)))))
</span><a href="#local-6989586621679538200"><span class="hs-identifier hs-var">govAddress</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall {r :: PType} (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier hs-var">pguardC</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Governor output doesn't carry the GST&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @POpaque s ())
-&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-195"></span><span>      </span><span class="annot"><span class="annottext">Term s (PValue 'Sorted 'Positive :--&gt; PInteger @S)
forall (s :: S) {w :: KeyGuarantees} {w :: AmountGuarantees}.
Term s (PValue w w :--&gt; PInteger @S)
</span><a href="#local-6989586621679538202"><span class="hs-identifier hs-var">gstValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue 'Sorted 'Positive :--&gt; PInteger @S)
-&gt; Term s (PValue 'Sorted 'Positive) -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">HRec
  (BoundTerms
     (PFields PTxOut)
     (Bindings
        (PFields PTxOut)
        ((':)
           @Symbol
           &quot;address&quot;
           ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
     s)
</span><a href="#local-6989586621679538197"><span class="hs-identifier hs-var">govOutput</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">value</span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S) -&gt; Term s (PInteger @S) -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInteger @S)
</span><span class="hs-number">1</span></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679538196"><span class="annot"><span class="annottext">governorOutputDatumHash :: Term s PDatumHash
</span><a href="#local-6989586621679538196"><span class="hs-identifier hs-var hs-var">governorOutputDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>          </span><span class="annot"><span class="annottext">Term s (PString @S :--&gt; (PMaybeData PDatumHash :--&gt; PDatumHash))
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PString @S :--&gt; (PMaybeData a :--&gt; a))
</span><a href="Agora.Utils.html#mustBePDJust"><span class="hs-identifier hs-var">mustBePDJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S :--&gt; (PMaybeData PDatumHash :--&gt; PDatumHash))
-&gt; Term s (PString @S)
-&gt; Term s (PMaybeData PDatumHash :--&gt; PDatumHash)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Governor output doesn't have datum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMaybeData PDatumHash :--&gt; PDatumHash)
-&gt; Term s (PMaybeData PDatumHash) -&gt; Term s PDatumHash
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">HRec
  (BoundTerms
     (PFields PTxOut)
     (Bindings
        (PFields PTxOut)
        ((':)
           @Symbol
           &quot;address&quot;
           ((':) @Symbol &quot;value&quot; ((':) @Symbol &quot;datumHash&quot; ('[] @Symbol)))))
     s)
</span><a href="#local-6989586621679538197"><span class="hs-identifier hs-var">govOutput</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">datumHash</span><span>
</span><span id="line-199"></span><span>        </span><span id="local-6989586621679538195"><span class="annot"><span class="annottext">governorOutputDatum :: Term s PGovernorDatum
</span><a href="#local-6989586621679538195"><span class="hs-identifier hs-var hs-var">governorOutputDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-200"></span><span>          </span><span class="annot"><span class="annottext">forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pfromData</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Agora.Governor.html#PGovernorDatum"><span class="hs-identifier hs-type">PGovernorDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PGovernorDatum) -&gt; Term s PGovernorDatum)
-&gt; Term s (PAsData PGovernorDatum) -&gt; Term s PGovernorDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-201"></span><span>            </span><span class="annot"><span class="annottext">Term
  s
  (PString @S
   :--&gt; (PMaybe (PAsData PGovernorDatum) :--&gt; PAsData PGovernorDatum))
forall (a :: PType) (s :: S).
Term s (PString @S :--&gt; (PMaybe a :--&gt; a))
</span><a href="Agora.Utils.html#mustBePJust"><span class="hs-identifier hs-var">mustBePJust</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PString @S
   :--&gt; (PMaybe (PAsData PGovernorDatum) :--&gt; PAsData PGovernorDatum))
-&gt; Term s (PString @S)
-&gt; Term
     s (PMaybe (PAsData PGovernorDatum) :--&gt; PAsData PGovernorDatum)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Governor output datum not found&quot;</span></span><span class="hs-cpp">
              #$ ptryFindDatum # governorOutputDatumHash # txInfoF.datums
</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-comment">-- Ensure the output governor datum is what we want.</span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall {r :: PType} (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier hs-var">pguardC</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;Unexpected governor datum&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @POpaque s ())
-&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HRec
  ((':)
     @(Symbol, Type)
     '(&quot;governorRef&quot;, Term s (PAsData PTxOutRef))
     ((':)
        @(Symbol, Type)
        '(&quot;newDatum&quot;, Term s (PAsData PGovernorDatum))
        ('[] @(Symbol, Type))))
</span><a href="#local-6989586621679538288"><span class="hs-identifier hs-var">datumF</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">newDatum</span><span> </span><span class="annot"><span class="annottext">Term s PGovernorDatum -&gt; Term s PGovernorDatum -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PGovernorDatum
</span><a href="#local-6989586621679538195"><span class="hs-identifier hs-var">governorOutputDatum</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall {r :: PType} (s :: S).
Term s (PString @S) -&gt; Term s PBool -&gt; TermCont @r s ()
</span><a href="../file:///nix/store/x2hnvsjw6yhhcdfyc1lfi4f51izw6pvw-plutarch-extra-lib-plutarch-extra-1.1.0-haddock-doc/share/doc/plutarch-extra/html/src"><span class="hs-identifier hs-var">pguardC</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PString @S)
</span><span class="hs-string">&quot;New governor datum should be valid&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Term s PBool -&gt; TermCont @POpaque s ())
-&gt; Term s PBool -&gt; TermCont @POpaque s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PGovernorDatum :--&gt; PBool)
forall (s :: S). Term s (PGovernorDatum :--&gt; PBool)
</span><a href="Agora.Governor.html#governorDatumValid"><span class="hs-identifier hs-var">governorDatumValid</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PGovernorDatum :--&gt; PBool)
-&gt; Term s PGovernorDatum -&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PGovernorDatum
</span><a href="#local-6989586621679538195"><span class="hs-identifier hs-var">governorOutputDatum</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>    </span><span class="annot"><span class="annottext">Term s POpaque -&gt; TermCont @POpaque s (Term s POpaque)
forall (m :: Type -&gt; Type) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s POpaque -&gt; TermCont @POpaque s (Term s POpaque))
-&gt; Term s POpaque -&gt; TermCont @POpaque s (Term s POpaque)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PUnit @S) -&gt; Term s POpaque
forall (s :: S) (a :: PType). Term s a -&gt; Term s POpaque
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">popaque</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PUnit @S) -&gt; Term s POpaque)
-&gt; Term s (PUnit @S) -&gt; Term s POpaque
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted (PUnit @S) -&gt; Term s (PUnit @S)
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-comment">-- Get the amount of GST in the a given value.</span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621679538192"><span class="annot"><a href="#local-6989586621679538202"><span class="hs-identifier hs-type">gstValueOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679538192"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PValue</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-type">PInteger</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621679538202"><span class="annot"><span class="annottext">gstValueOf :: Term s (PValue w w :--&gt; PInteger @S)
</span><a href="#local-6989586621679538202"><span class="hs-identifier hs-var hs-var">gstValueOf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PValue w w :--&gt; PInteger @S)
-&gt; Term s (PValue w w :--&gt; PInteger @S)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PValue w w :--&gt; PInteger @S)
 -&gt; Term s (PValue w w :--&gt; PInteger @S))
-&gt; ClosedTerm (PValue w w :--&gt; PInteger @S)
-&gt; Term s (PValue w w :--&gt; PInteger @S)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PValue w w) -&gt; Term s (PInteger @S))
-&gt; Term s (PValue w w :--&gt; PInteger @S)
forall a (b :: PType) (s :: S) (c :: PType).
PLamN a b s =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PValue w w) -&gt; Term s (PInteger @S))
 -&gt; Term s (PValue w w :--&gt; PInteger @S))
-&gt; (Term s (PValue w w) -&gt; Term s (PInteger @S))
-&gt; Term s (PValue w w :--&gt; PInteger @S)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679538183"><span class="annot"><span class="annottext">Term s (PValue w w)
</span><a href="#local-6989586621679538183"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PValue w w
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
forall (s :: S) (keys :: KeyGuarantees)
       (amounts :: AmountGuarantees).
Term
  s
  (PValue keys amounts
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
</span><a href="../file:///nix/store/b35f340blmkgj1qmq589db02pqy3w2s4-liqwid-plutarch-extra-lib-liqwid-plutarch-extra-1.1.0-haddock-doc/share/doc/liqwid-plutarch-extra/html/src"><span class="hs-identifier hs-var">pvalueOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PValue w w
   :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S)))
-&gt; Term s (PValue w w)
-&gt; Term s (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PValue w w)
</span><a href="#local-6989586621679538183"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PCurrencySymbol :--&gt; (PTokenName :--&gt; PInteger @S))
-&gt; Term s PCurrencySymbol -&gt; Term s (PTokenName :--&gt; PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted PCurrencySymbol -&gt; Term s PCurrencySymbol
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted PCurrencySymbol
CurrencySymbol
</span><a href="#local-6989586621679538182"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PTokenName :--&gt; PInteger @S)
-&gt; Term s PTokenName -&gt; Term s (PInteger @S)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted PTokenName -&gt; Term s PTokenName
forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="../file:///nix/store/bhji90x2v2q0fi8ya6w3sbvwcyh0r0lb-plutarch-lib-plutarch-1.1.0-haddock-doc/share/doc/plutarch/html/src"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted PTokenName
TokenName
</span><a href="#local-6989586621679538181"><span class="hs-identifier hs-var">tn</span></a></span><span>
</span><span id="line-213"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-214"></span><span>        </span><span class="annot"><a href="../file:///nix/store/6ilca7icmqibgfqmnsl33jwlfyzd55gp-plutus-ledger-api-lib-plutus-ledger-api-1.0.0.0-haddock-doc/share/doc/plutus-ledger-api/html/src"><span class="hs-identifier hs-type">AssetClass</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679538182"><span class="annot"><span class="annottext">CurrencySymbol
</span><a href="#local-6989586621679538182"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679538181"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679538181"><span class="hs-identifier hs-var">tn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Governor -&gt; AssetClass
</span><a href="Agora.Governor.Scripts.html#governorSTAssetClassFromGovernor"><span class="hs-identifier hs-var">governorSTAssetClassFromGovernor</span></a></span><span> </span><span class="annot"><span class="annottext">Governor
</span><a href="#local-6989586621679538550"><span class="hs-identifier hs-var">gov</span></a></span><span>
</span><span id="line-215"></span></pre></body></html>